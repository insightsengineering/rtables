<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Table Hierarchy • rtables</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../../apple-touch-icon-60x60.png">
<script src="../../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../../deps/headroom-0.11.0/headroom.min.js"></script><script src="../../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../../deps/search-1.0.0/fuse.min.js"></script><script src="../../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../../pkgdown.js"></script><meta property="og:title" content="Table Hierarchy">
<link rel="stylesheet" href="../../consent.css">
<script src="../../consent.js" type="text/javascript" charset="utf-8"></script>
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../../index.html">rtables</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.6.11.9005</small>

    <div style="width: 140px; margin-left: 0.5rem;"> <small class="nav-text text-muted me-auto">part of</small> <img src="https://github.com/insightsengineering/hex-stickers/blob/main/PNG/nest.png?raw=true" alt="NEST" style="height: 30px;"><a href="https://pharmaverse.org/" class="external-link"><img src="https://github.com/insightsengineering/hex-stickers/blob/main/PNG/pharmaverse.png?raw=true" alt="pharmaverse" style="height: 28px;"></a> </div>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../../articles/rtables.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Getting Started</h6></li>
    <li><a class="dropdown-item" href="../../articles/exploratory_analysis.html">Exploratory Analysis</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Clinical Trials</h6></li>
    <li><a class="dropdown-item" href="../../articles/clinical_trials.html">Example Clinical Trials Tables</a></li>
    <li><a class="dropdown-item" href="../../articles/baseline.html">Comparing Against Baselines or Control</a></li>
    <li><a class="dropdown-item" href="../../articles/ard_how_to.html">Generating QC-Ready Result Data Frames (ARDs) from Tables</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Table Customization</h6></li>
    <li><a class="dropdown-item" href="../../articles/custom_appearance.html">Customizing Appearance</a></li>
    <li><a class="dropdown-item" href="../../articles/title_footer.html">Titles, Footers, and Referential Footnotes</a></li>
    <li><a class="dropdown-item" href="../../articles/sorting_pruning.html">Pruning and Sorting Tables</a></li>
    <li><a class="dropdown-item" href="../../articles/col_counts.html">Column Counts and Formats</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../../articles/index.html">More articles...</a></li>
  </ul>
</li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-developer-guide" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Developer Guide</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-developer-guide">
<li><a class="dropdown-item" href="../../articles/dev-guide/dg_split_machinery.html">Split Machinery</a></li>
    <li><a class="dropdown-item" href="../../articles/dev-guide/dg_tabulation.html">Tabulation</a></li>
    <li><a class="dropdown-item" href="../../articles/dev-guide/dg_table_hierarchy.html">Table Hierarchy</a></li>
    <li><a class="dropdown-item" href="../../articles/dev-guide/dg_debug_rtables.html">Debugging in {rtables} and Beyond</a></li>
    <li><a class="dropdown-item" href="../../articles/dev-guide/dg_notes.html">Sparse Notes on {rtables} Internals</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../../news/index.html">Changelog</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-reports" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Reports</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-reports">
<li><a class="dropdown-item" href="../../coverage-report/">Coverage report</a></li>
    <li><a class="dropdown-item" href="../../unit-test-report/">Unit test report</a></li>
    <li><a class="dropdown-item" href="../../unit-test-report-non-cran/">Non-CRAN unit test report</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/insightsengineering/rtables"><span class="fa fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../../logo.svg" class="logo" alt=""><h1>Table Hierarchy</h1>
                        <h4 data-toc-skip class="author">Abinaya
Yogasekaram</h4>
            
            <h4 data-toc-skip class="date">2025-02-21</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/insightsengineering/rtables/blob/main/vignettes/dev-guide/dg_table_hierarchy.Rmd" class="external-link"><code>vignettes/dev-guide/dg_table_hierarchy.Rmd</code></a></small>
      <div class="d-none name"><code>dg_table_hierarchy.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="disclaimer">Disclaimer<a class="anchor" aria-label="anchor" href="#disclaimer"></a>
</h2>
<p>This article is intended for use by developers only and will contain
low-level explanations of the topics covered. For user-friendly
vignettes, please see the <a href="https://insightsengineering.github.io/rtables/latest-tag/articles/index.html">Articles</a>
page on the <code>rtables</code> website.</p>
<p>Any code or prose which appears in the version of this article on the
<code>main</code> branch of the repository may reflect a specific state
of things that can be more or less recent. This guide describes very
important aspects of table hierarchy that are unlikely to change.
Regardless, we invite the reader to keep in mind that the current
repository code may have drifted from the following material in this
document, and it is always the best practice to read the code directly
on <code>main</code>.</p>
<p>Please keep in mind that <code>rtables</code> is still under active
development, and it has seen the efforts of multiple contributors across
different years. Therefore, there may be legacy mechanisms and ongoing
transformations that could look different in the future.</p>
</div>
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>The scope of this vignette is to understand the structure of
<code>rtable</code> objects, class hierarchy with an exploration of tree
structures as S4 objects. Exploring table structure enables a better
understanding of <code>rtables</code> concepts such as split machinery,
tabulation, pagination and export. More details from the user’s
perspective of table structure can be found in the relevant
vignettes.</p>
<p><code>isS4</code> <code>getclass</code> - for class structure</p>
</div>
<div class="section level2">
<h2 id="process-and-methods">Process and Methods<a class="anchor" aria-label="anchor" href="#process-and-methods"></a>
</h2>
<p>We invite developers to use the provided examples to interactively
explore the <code>rtables</code> hierarchy. The most helpful command is
<code>getClass</code> for a list of the slots associated with a class,
in addition to related classes and their relative distances.</p>
</div>
<div class="section level2">
<h2 id="representation-of-information-before-generation">Representation of Information before generation<a class="anchor" aria-label="anchor" href="#representation-of-information-before-generation"></a>
</h2>
</div>
<div class="section level2">
<h2 id="table-representation">Table Representation<a class="anchor" aria-label="anchor" href="#table-representation"></a>
</h2>
<p><code>PredataAxisLayout</code> class is used to define the data
subset instructions for tabulation. 2 sub-classes (one for each axis):
<code>PredataColLayout</code>, <code>PredataRowLayout</code></p>
</div>
<div class="section level2">
<h2 id="slots-parent-child-relationships">Slots, Parent-Child Relationships<a class="anchor" aria-label="anchor" href="#slots-parent-child-relationships"></a>
</h2>
</div>
<div class="section level2">
<h2 id="content-summary-row-groups">Content (summary row groups)<a class="anchor" aria-label="anchor" href="#content-summary-row-groups"></a>
</h2>
<p>Splits are core functionality for <code>rtables</code> as tabulation
and calculations are often required on subsets of the data.</p>
</div>
<div class="section level2">
<h2 id="split-machinery">Split Machinery<a class="anchor" aria-label="anchor" href="#split-machinery"></a>
</h2>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/insightsengineering/rtables" class="external-link">rtables</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/methods/getClass.html" class="external-link">getClass</a></span><span class="op">(</span><span class="st">"TreePos"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Class "TreePos" [package "rtables"]</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Slots:</span></span>
<span><span class="co">##                                                       </span></span>
<span><span class="co">## Name:       splits    s_values sval_labels      subset</span></span>
<span><span class="co">## Class:        list        list   character   SubsetDef</span></span></code></pre>
<p><code>TreePos</code> class contains split information as a list of
the splits, split label values, and the subsets of the data that are
generated by the split.</p>
<p><code>AllSplit</code> <code>RootSplit</code>
<code>MultiVarSplit</code> <code>VarStaticCutSplit</code>
<code>CumulativeCutSplit</code> <code>VarDynCutSplit</code>
<code>CompoundSplit</code> <code>VarLevWBaselineSplit</code></p>
<p>The highest level of the table hierarchy belong to
<code>TableTree</code>. The code below identifies the slots associated
with with this class.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/methods/getClass.html" class="external-link">getClass</a></span><span class="op">(</span><span class="st">"TableTree"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Class "TableTree" [package "rtables"]</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Slots:</span></span>
<span><span class="co">##                                                                            </span></span>
<span><span class="co">## Name:                 content      page_title_prefix               children</span></span>
<span><span class="co">## Class:        ElementaryTable              character                   list</span></span>
<span><span class="co">##                                                                            </span></span>
<span><span class="co">## Name:                rowspans               labelrow            page_titles</span></span>
<span><span class="co">## Class:             data.frame               LabelRow              character</span></span>
<span><span class="co">##                                                                            </span></span>
<span><span class="co">## Name:          horizontal_sep     header_section_div   trailing_section_div</span></span>
<span><span class="co">## Class:              character              character              character</span></span>
<span><span class="co">##                                                                            </span></span>
<span><span class="co">## Name:                col_info                 format                 na_str</span></span>
<span><span class="co">## Class: InstantiatedColumnInfo             FormatSpec              character</span></span>
<span><span class="co">##                                                                            </span></span>
<span><span class="co">## Name:         indent_modifier            table_inset                  level</span></span>
<span><span class="co">## Class:                integer                integer                integer</span></span>
<span><span class="co">##                                                                            </span></span>
<span><span class="co">## Name:                    name             main_title              subtitles</span></span>
<span><span class="co">## Class:              character              character              character</span></span>
<span><span class="co">##                                                     </span></span>
<span><span class="co">## Name:             main_footer      provenance_footer</span></span>
<span><span class="co">## Class:              character              character</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Extends: </span></span>
<span><span class="co">## Class "VTableTree", directly</span></span>
<span><span class="co">## Class "VTableNodeInfo", by class "VTableTree", distance 2</span></span>
<span><span class="co">## Class "VTree", by class "VTableTree", distance 2</span></span>
<span><span class="co">## Class "VTitleFooter", by class "VTableTree", distance 2</span></span>
<span><span class="co">## Class "VNodeInfo", by class "VTableTree", distance 3</span></span></code></pre>
<p>As an S4 object, the slots can be accessed using <code>@</code>
(similar to the use of <code>$</code> for list objects). You’ll notice
there are classes that fall under “Extends”. The classes contained here
have a relationship to the <code>TableTree</code> object and are
“virtual” classes. To avoid the repetition of slots and carrying the
same data (set of slots for example) that multiple classes may need,
<code>rtables</code> extensively uses virtual classes. A virtual class
cannot be instantiated, the purpose is for other classes to inherit
information from it.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">lyt</span> <span class="op">&lt;-</span> <span class="fu"><a href="../../reference/basic_table.html">basic_table</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"big title"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../../reference/split_rows_by.html">split_rows_by</a></span><span class="op">(</span><span class="st">"SEX"</span>, page_by <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../../reference/analyze.html">analyze</a></span><span class="op">(</span><span class="st">"AGE"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">tt</span> <span class="op">&lt;-</span> <span class="fu"><a href="../../reference/build_table.html">build_table</a></span><span class="op">(</span><span class="va">lyt</span>, <span class="va">DM</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Though we don't recommend using str for studying rtable objects,</span></span>
<span><span class="co"># we do find it useful in this instance to visualize the parent/child relationships.</span></span>
<span><span class="fu"><a href="../../reference/int_methods.html">str</a></span><span class="op">(</span><span class="va">tt</span>, max.level <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Formal class 'TableTree' [package "rtables"] with 20 slots</span></span>
<span><span class="co">##   ..@ content             :Formal class 'ElementaryTable' [package "rtables"] with 19 slots</span></span>
<span><span class="co">##   ..@ page_title_prefix   : chr "SEX"</span></span>
<span><span class="co">##   ..@ children            :List of 4</span></span>
<span><span class="co">##   ..@ rowspans            :'data.frame': 0 obs. of  0 variables</span></span>
<span><span class="co">##   ..@ labelrow            :Formal class 'LabelRow' [package "rtables"] with 13 slots</span></span>
<span><span class="co">##   ..@ page_titles         : chr(0) </span></span>
<span><span class="co">##   ..@ horizontal_sep      : chr "—"</span></span>
<span><span class="co">##   ..@ header_section_div  : chr NA</span></span>
<span><span class="co">##   ..@ trailing_section_div: chr NA</span></span>
<span><span class="co">##   ..@ col_info            :Formal class 'InstantiatedColumnInfo' [package "rtables"] with 9 slots</span></span>
<span><span class="co">##   ..@ format              : NULL</span></span>
<span><span class="co">##   ..@ na_str              : chr NA</span></span>
<span><span class="co">##   ..@ indent_modifier     : int 0</span></span>
<span><span class="co">##   ..@ table_inset         : int 0</span></span>
<span><span class="co">##   ..@ level               : int 1</span></span>
<span><span class="co">##   ..@ name                : chr "SEX"</span></span>
<span><span class="co">##   ..@ main_title          : chr "big title"</span></span>
<span><span class="co">##   ..@ subtitles           : chr(0) </span></span>
<span><span class="co">##   ..@ main_footer         : chr(0) </span></span>
<span><span class="co">##   ..@ provenance_footer   : chr(0)</span></span></code></pre>
<pre><code><span><span class="co">## Warning: str provides a low level, implementation-detail-specific description</span></span>
<span><span class="co">## of the TableTree object structure. See table_structure(.) for a summary of</span></span>
<span><span class="co">## table struture intended for end users.</span></span></code></pre>
</div>
<div class="section level2">
<h2 id="tree-paths">Tree Paths<a class="anchor" aria-label="anchor" href="#tree-paths"></a>
</h2>
<p>Root to Leaves, are vectors of vectors Tables are tree, nodes in the
tree can have summaries associated with them. Tables are trees because
of the nested structure. There is also the benefit of keeping and
repeating necessary information when trying to paginate a table.</p>
<p>Children of <code>ElementaryTables</code> are row objects.
<code>TableTree</code> can have children that are either row objects or
other table objects.</p>
<div class="section level4">
<h4 id="todo">TODO:<a class="anchor" aria-label="anchor" href="#todo"></a>
</h4>
<p>Create Tree Diagram showing class hierarchy.</p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="nest">
  <p>rtables is a part of the <strong>NEST</strong> and <a href="https://pharmaverse.org/" class="external-link"><strong>pharmaverse</strong></a>.</p>
</div>
<script type="text/javascript" src="../../analytics.js"></script></footer>
</div>





  </body>
</html>
