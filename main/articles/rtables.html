<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Introduction to {rtables} • rtables</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Introduction to {rtables}">
<link rel="stylesheet" href="../consent.css">
<script src="../consent.js" type="text/javascript" charset="utf-8"></script>
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">rtables</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.6.11.9009</small>

    <div style="width: 140px; margin-left: 0.5rem;"> <small class="nav-text text-muted me-auto">part of</small> <img src="https://github.com/insightsengineering/hex-stickers/blob/main/PNG/nest.png?raw=true" alt="NEST" style="height: 30px;"><a href="https://pharmaverse.org/" class="external-link"><img src="https://github.com/insightsengineering/hex-stickers/blob/main/PNG/pharmaverse.png?raw=true" alt="pharmaverse" style="height: 28px;"></a> </div>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item"><a class="nav-link" href="../articles/rtables.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Getting Started</h6></li>
    <li><a class="dropdown-item" href="../articles/exploratory_analysis.html">Exploratory Analysis</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Clinical Trials</h6></li>
    <li><a class="dropdown-item" href="../articles/clinical_trials.html">Example Clinical Trials Tables</a></li>
    <li><a class="dropdown-item" href="../articles/baseline.html">Comparing Against Baselines or Control</a></li>
    <li><a class="dropdown-item" href="../articles/ard_how_to.html">Generating QC-Ready Result Data Frames (ARDs) from Tables</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Table Customization</h6></li>
    <li><a class="dropdown-item" href="../articles/custom_appearance.html">Customizing Appearance</a></li>
    <li><a class="dropdown-item" href="../articles/title_footer.html">Titles, Footers, and Referential Footnotes</a></li>
    <li><a class="dropdown-item" href="../articles/sorting_pruning.html">Pruning and Sorting Tables</a></li>
    <li><a class="dropdown-item" href="../articles/col_counts.html">Column Counts and Formats</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../articles/index.html">More articles...</a></li>
  </ul>
</li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-developer-guide" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Developer Guide</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-developer-guide">
<li><a class="dropdown-item" href="../articles/dev-guide/dg_split_machinery.html">Split Machinery</a></li>
    <li><a class="dropdown-item" href="../articles/dev-guide/dg_tabulation.html">Tabulation</a></li>
    <li><a class="dropdown-item" href="../articles/dev-guide/dg_table_hierarchy.html">Table Hierarchy</a></li>
    <li><a class="dropdown-item" href="../articles/dev-guide/dg_debug_rtables.html">Debugging in {rtables} and Beyond</a></li>
    <li><a class="dropdown-item" href="../articles/dev-guide/dg_notes.html">Sparse Notes on {rtables} Internals</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-reports" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Reports</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-reports">
<li><a class="dropdown-item" href="../coverage-report/">Coverage report</a></li>
    <li><a class="dropdown-item" href="../unit-test-report/">Unit test report</a></li>
    <li><a class="dropdown-item" href="../unit-test-report-non-cran/">Non-CRAN unit test report</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/insightsengineering/rtables"><span class="fa fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Introduction to {rtables}</h1>
                        <h4 data-toc-skip class="author">Gabriel Becker
and Adrian Waddell</h4>
            
            <h4 data-toc-skip class="date">2025-02-28</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/insightsengineering/rtables/blob/main/vignettes/rtables.Rmd" class="external-link"><code>vignettes/rtables.Rmd</code></a></small>
      <div class="d-none name"><code>rtables.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>The <code>rtables</code> package provides a framework to create,
tabulate, and output tables in R. Most of the design requirements for
<code>rtables</code> have their origin in studying tables that are
commonly used to report analyses from clinical trials; however, we were
careful to keep <code>rtables</code> a general purpose toolkit.</p>
<p>In this vignette, we give a short introduction into
<code>rtables</code> and tabulating a table.</p>
<p>The content in this vignette is based on the following two
resources:</p>
<ul>
<li>The <a href="https://www.youtube.com/watch?v=CBQzZ8ZhXLA" class="external-link"><code>rtables</code>
useR 2020 presentation</a> by Gabriel Becker</li>
<li>
<a href="https://arxiv.org/pdf/2306.16610" class="external-link"><code>rtables</code> - A
Framework For Creating Complex Structured Reporting Tables Via
Multi-Level Faceted Computations</a>.</li>
</ul>
<p>The packages used in this vignette are <code>rtables</code> and
<code>dplyr</code>:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/insightsengineering/rtables" class="external-link">rtables</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="overview">Overview<a class="anchor" aria-label="anchor" href="#overview"></a>
</h2>
<p>To build a table using <code>rtables</code> two components are
required: A layout constructed using <code>rtables</code> functions, and
a <code>data.frame</code> of unaggregated data. These two elements are
combined to build a table object. Table objects contain information
about both the content and the structure of the table, as well as
instructions on how this information should be processed to construct
the table. After obtaining the table object, a formatted table can be
printed in ASCII format, or exported to a variety of other formats
(<code>.txt</code>, <code>.pdf</code>, <code>.docx</code>, etc.).</p>
<p><img src="images%2Frtables-basics.png" width="722" style="display: block; margin: auto;"></p>
</div>
<div class="section level2">
<h2 id="data">Data<a class="anchor" aria-label="anchor" href="#data"></a>
</h2>
<p>The data used in this vignette is a made up using random number
generators. The data content is relatively simple: one row per imaginary
person and one column per measurement: study arm, the country of origin,
gender, handedness, age, and weight.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">n</span> <span class="op">&lt;-</span> <span class="fl">400</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></span>
<span></span>
<span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span></span>
<span>  arm <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Arm A"</span>, <span class="st">"Arm B"</span><span class="op">)</span>, <span class="va">n</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>, levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Arm A"</span>, <span class="st">"Arm B"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  country <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"CAN"</span>, <span class="st">"USA"</span><span class="op">)</span>, <span class="va">n</span>, replace <span class="op">=</span> <span class="cn">TRUE</span>, prob <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">.55</span>, <span class="fl">.45</span><span class="op">)</span><span class="op">)</span>, levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"CAN"</span>, <span class="st">"USA"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  gender <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Female"</span>, <span class="st">"Male"</span><span class="op">)</span>, <span class="va">n</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>, levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Female"</span>, <span class="st">"Male"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  handed <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Left"</span>, <span class="st">"Right"</span><span class="op">)</span>, <span class="va">n</span>, prob <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">.6</span>, <span class="fl">.4</span><span class="op">)</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>, levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Left"</span>, <span class="st">"Right"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  age <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Chisquare.html" class="external-link">rchisq</a></span><span class="op">(</span><span class="va">n</span>, <span class="fl">30</span><span class="op">)</span> <span class="op">+</span> <span class="fl">10</span></span>
<span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>  weight <span class="op">=</span> <span class="fl">35</span> <span class="op">*</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="va">n</span>, sd <span class="op">=</span> <span class="fl">.5</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">gender</span> <span class="op">==</span> <span class="st">"Female"</span>, <span class="fl">140</span>, <span class="fl">180</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/head_tail.html">head</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span></span>
<span><span class="co"># <span style="color: #949494;"># A tibble: 6 × 6</span></span></span>
<span><span class="co">#   arm   country gender handed   age weight</span></span>
<span><span class="co">#   <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span> <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co"># <span style="color: #BCBCBC;">1</span> Arm A USA     Female Left    31.3   139.</span></span>
<span><span class="co"># <span style="color: #BCBCBC;">2</span> Arm B CAN     Female Right   50.5   116.</span></span>
<span><span class="co"># <span style="color: #BCBCBC;">3</span> Arm A USA     Male   Right   32.4   186.</span></span>
<span><span class="co"># <span style="color: #BCBCBC;">4</span> Arm A USA     Male   Right   34.6   169.</span></span>
<span><span class="co"># <span style="color: #BCBCBC;">5</span> Arm B USA     Female Right   43.0   160.</span></span>
<span><span class="co"># <span style="color: #BCBCBC;">6</span> Arm A USA     Female Right   43.2   126.</span></span></code></pre></div>
<p>Note that we use factor variables so that the level order is
represented in the row or column order when we tabulate the information
of <code>df</code> below.</p>
</div>
<div class="section level2">
<h2 id="building-a-table">Building a Table<a class="anchor" aria-label="anchor" href="#building-a-table"></a>
</h2>
<p>The aim of this vignette is to build the following table step by
step:</p>
<pre><code><span><span class="co">#                     Arm A                     Arm B         </span></span>
<span><span class="co">#              Female        Male        Female        Male   </span></span>
<span><span class="co">#              (N=96)      (N=105)       (N=92)      (N=107)  </span></span>
<span><span class="co"># ————————————————————————————————————————————————————————————</span></span>
<span><span class="co"># CAN        45 (46.9%)   64 (61.0%)   46 (50.0%)   62 (57.9%)</span></span>
<span><span class="co">#   Left     32 (33.3%)   42 (40.0%)   26 (28.3%)   37 (34.6%)</span></span>
<span><span class="co">#     mean     38.87        40.43        40.33        37.68   </span></span>
<span><span class="co">#   Right    13 (13.5%)   22 (21.0%)   20 (21.7%)   25 (23.4%)</span></span>
<span><span class="co">#     mean     36.64        40.19        40.16        40.65   </span></span>
<span><span class="co"># USA        51 (53.1%)   41 (39.0%)   46 (50.0%)   45 (42.1%)</span></span>
<span><span class="co">#   Left     34 (35.4%)   19 (18.1%)   25 (27.2%)   25 (23.4%)</span></span>
<span><span class="co">#     mean     40.36        39.68        39.21        40.07   </span></span>
<span><span class="co">#   Right    17 (17.7%)   22 (21.0%)   21 (22.8%)   20 (18.7%)</span></span>
<span><span class="co">#     mean     36.94        39.80        38.53        39.02</span></span></code></pre>
</div>
<div class="section level2">
<h2 id="quick-start">Quick Start<a class="anchor" aria-label="anchor" href="#quick-start"></a>
</h2>
<p>The table above can be achieved via the <code><a href="../reference/qtable_layout.html">qtable()</a></code>
function. If you are new to tabulation with the <code>rtables</code>
layout framework, you can use this convenience wrapper to create many
types of two-way frequency tables.</p>
<p>The purpose of <code>qtable</code> is to enable quick exploratory
data analysis. See the <a href="https://insightsengineering.github.io/rtables/latest-tag/articles/exploratory_analysis.html"><code>exploratory_analysis</code></a>
vignette for more details.</p>
<p>Here is the code to recreate the table above:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/qtable_layout.html">qtable</a></span><span class="op">(</span><span class="va">df</span>,</span>
<span>  row_vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"country"</span>, <span class="st">"handed"</span><span class="op">)</span>,</span>
<span>  col_vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"arm"</span>, <span class="st">"gender"</span><span class="op">)</span>,</span>
<span>  avar <span class="op">=</span> <span class="st">"age"</span>,</span>
<span>  afun <span class="op">=</span> <span class="va">mean</span>,</span>
<span>  summarize_groups <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  row_labels <span class="op">=</span> <span class="st">"mean"</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#                       Arm A                     Arm B         </span></span>
<span><span class="co">#                Female        Male        Female        Male   </span></span>
<span><span class="co"># age - mean     (N=96)      (N=105)       (N=92)      (N=107)  </span></span>
<span><span class="co"># ——————————————————————————————————————————————————————————————</span></span>
<span><span class="co"># CAN          45 (46.9%)   64 (61.0%)   46 (50.0%)   62 (57.9%)</span></span>
<span><span class="co">#   Left       32 (33.3%)   42 (40.0%)   26 (28.3%)   37 (34.6%)</span></span>
<span><span class="co">#     mean       38.87        40.43        40.33        37.68   </span></span>
<span><span class="co">#   Right      13 (13.5%)   22 (21.0%)   20 (21.7%)   25 (23.4%)</span></span>
<span><span class="co">#     mean       36.64        40.19        40.16        40.65   </span></span>
<span><span class="co"># USA          51 (53.1%)   41 (39.0%)   46 (50.0%)   45 (42.1%)</span></span>
<span><span class="co">#   Left       34 (35.4%)   19 (18.1%)   25 (27.2%)   25 (23.4%)</span></span>
<span><span class="co">#     mean       40.36        39.68        39.21        40.07   </span></span>
<span><span class="co">#   Right      17 (17.7%)   22 (21.0%)   21 (22.8%)   20 (18.7%)</span></span>
<span><span class="co">#     mean       36.94        39.80        38.53        39.02</span></span></code></pre></div>
<p>From the <code>qtable</code> function arguments above we can see many
of the key concepts of the underlying <code>rtables</code> layout
framework. The user needs to define:</p>
<ul>
<li>Which variables should be used as facets in the row and/or column
space?</li>
<li>Which variable should be used in the summary analysis?</li>
<li>Which function should be used as a summary?</li>
<li>Should the table include any marginal summaries?</li>
<li>Are any labels needed to clarify the table content?</li>
</ul>
<p>In the sections below we will look at translating each of these
questions to a set of features part of the <code>rtables</code> layout
framework. Now let’s take a look at building the example table with a
layout.</p>
</div>
<div class="section level2">
<h2 id="layout-instructions">Layout Instructions<a class="anchor" aria-label="anchor" href="#layout-instructions"></a>
</h2>
<p>In <code>rtables</code> a basic table is defined to have 0 rows and
one column representing all data. Analyzing a variable is one way of
adding a row:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">lyt</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/basic_table.html">basic_table</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/analyze.html">analyze</a></span><span class="op">(</span><span class="st">"age"</span>, <span class="va">mean</span>, format <span class="op">=</span> <span class="st">"xx.x"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">tbl</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/build_table.html">build_table</a></span><span class="op">(</span><span class="va">lyt</span>, <span class="va">df</span><span class="op">)</span></span>
<span><span class="va">tbl</span></span>
<span><span class="co">#        all obs</span></span>
<span><span class="co"># ——————————————</span></span>
<span><span class="co"># mean    39.4</span></span></code></pre></div>
<p>In the code above we first described the table and assigned that
description to a variable <code>lyt</code>. We then built the table
using the actual data with <code><a href="../reference/build_table.html">build_table()</a></code>. The description
of a table is called a table layout. <code><a href="../reference/basic_table.html">basic_table()</a></code> is the
start of every table layout and contains the information that we have in
one column representing all data. The <code><a href="../reference/analyze.html">analyze()</a></code> instruction
adds to the layout that the <code>age</code> variable should be analyzed
with the <code><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean()</a></code> analysis function and the result should be
rounded to <code>1</code> decimal place.</p>
<p>Hence, a layout is “pre-data”, that is, it’s a description of how to
build a table once we get data. We can look at the layout isolated:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">lyt</span></span>
<span><span class="co"># A Pre-data Table Layout</span></span>
<span><span class="co"># </span></span>
<span><span class="co"># Column-Split Structure:</span></span>
<span><span class="co">#  () </span></span>
<span><span class="co"># </span></span>
<span><span class="co"># Row-Split Structure:</span></span>
<span><span class="co"># age (** analysis **)</span></span></code></pre></div>
<p>The general layouting instructions are summarized below:</p>
<ul>
<li>
<code><a href="../reference/basic_table.html">basic_table()</a></code> is a layout representing a table with
zero rows and one column</li>
<li>Nested splitting
<ul>
<li>in row space: <code><a href="../reference/split_rows_by.html">split_rows_by()</a></code>,
<code><a href="../reference/split_rows_by_multivar.html">split_rows_by_multivar()</a></code>,
<code><a href="../reference/varcuts.html">split_rows_by_cuts()</a></code>, <code><a href="../reference/varcuts.html">split_rows_by_cutfun()</a></code>,
<code><a href="../reference/varcuts.html">split_rows_by_quartiles()</a></code>
</li>
<li>in column space: <code><a href="../reference/split_cols_by.html">split_cols_by()</a></code>,
<code><a href="../reference/split_cols_by_multivar.html">split_cols_by_multivar()</a></code>,
<code><a href="../reference/varcuts.html">split_cols_by_cuts()</a></code>, <code><a href="../reference/varcuts.html">split_cols_by_cutfun()</a></code>,
<code><a href="../reference/varcuts.html">split_cols_by_quartiles()</a></code>
</li>
</ul>
</li>
<li>Summarizing Groups: <code><a href="../reference/summarize_row_groups.html">summarize_row_groups()</a></code>
</li>
<li>Analyzing Variables: <code><a href="../reference/analyze.html">analyze()</a></code>,
<code><a href="../reference/analyze_colvars.html">analyze_colvars()</a></code>
</li>
</ul>
<p>Using those functions, it is possible to create a wide variety of
tables as we will show in this document.</p>
</div>
<div class="section level2">
<h2 id="adding-column-structure">Adding Column Structure<a class="anchor" aria-label="anchor" href="#adding-column-structure"></a>
</h2>
<p>We will now add more structure to the columns by adding a column
split based on the factor variable <code>arm</code>:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">lyt</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/basic_table.html">basic_table</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/split_cols_by.html">split_cols_by</a></span><span class="op">(</span><span class="st">"arm"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/analyze.html">analyze</a></span><span class="op">(</span><span class="st">"age"</span>, afun <span class="op">=</span> <span class="va">mean</span>, format <span class="op">=</span> <span class="st">"xx.x"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">tbl</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/build_table.html">build_table</a></span><span class="op">(</span><span class="va">lyt</span>, <span class="va">df</span><span class="op">)</span></span>
<span><span class="va">tbl</span></span>
<span><span class="co">#        Arm A   Arm B</span></span>
<span><span class="co"># ————————————————————</span></span>
<span><span class="co"># mean   39.5    39.4</span></span></code></pre></div>
<p>The resulting table has one column per factor level of
<code>arm</code>. So the data represented by the first column is
<code>df[df$arm == "ARM A", ]</code>. Hence, the
<code><a href="../reference/split_cols_by.html">split_cols_by()</a></code> partitions the data among the columns by
default.</p>
<p>Column splitting can be done in a recursive/nested manner by adding
sequential <code><a href="../reference/split_cols_by.html">split_cols_by()</a></code> layout instruction. It’s also
possible to add a non-nested split. Here we splitting each arm further
by the gender:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">lyt</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/basic_table.html">basic_table</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/split_cols_by.html">split_cols_by</a></span><span class="op">(</span><span class="st">"arm"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/split_cols_by.html">split_cols_by</a></span><span class="op">(</span><span class="st">"gender"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/analyze.html">analyze</a></span><span class="op">(</span><span class="st">"age"</span>, afun <span class="op">=</span> <span class="va">mean</span>, format <span class="op">=</span> <span class="st">"xx.x"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">tbl</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/build_table.html">build_table</a></span><span class="op">(</span><span class="va">lyt</span>, <span class="va">df</span><span class="op">)</span></span>
<span><span class="va">tbl</span></span>
<span><span class="co">#            Arm A           Arm B    </span></span>
<span><span class="co">#        Female   Male   Female   Male</span></span>
<span><span class="co"># ————————————————————————————————————</span></span>
<span><span class="co"># mean    38.8    40.1    39.6    39.2</span></span></code></pre></div>
<p>The first column represents the data in <code>df</code> where
<code>df$arm == "A" &amp; df$gender == "Female"</code> and the second
column the data in <code>df</code> where
<code>df$arm == "A" &amp; df$gender == "Male"</code>, and so on.</p>
<p>More information on column structure can be found in the <a href="https://insightsengineering.github.io/rtables/latest-tag/articles/col_counts.html"><code>col_counts</code></a>
vignette.</p>
</div>
<div class="section level2">
<h2 id="adding-row-structure">Adding Row Structure<a class="anchor" aria-label="anchor" href="#adding-row-structure"></a>
</h2>
<p>So far, we have created layouts with analysis and column splitting
instructions, i.e. <code><a href="../reference/analyze.html">analyze()</a></code> and
<code><a href="../reference/split_cols_by.html">split_cols_by()</a></code>, respectively. This resulted with a table
with multiple columns and one data row. We will add more row structure
by stratifying the mean analysis by country (i.e. adding a split in the
row space):</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">lyt</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/basic_table.html">basic_table</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/split_cols_by.html">split_cols_by</a></span><span class="op">(</span><span class="st">"arm"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/split_cols_by.html">split_cols_by</a></span><span class="op">(</span><span class="st">"gender"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/split_rows_by.html">split_rows_by</a></span><span class="op">(</span><span class="st">"country"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/analyze.html">analyze</a></span><span class="op">(</span><span class="st">"age"</span>, afun <span class="op">=</span> <span class="va">mean</span>, format <span class="op">=</span> <span class="st">"xx.x"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">tbl</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/build_table.html">build_table</a></span><span class="op">(</span><span class="va">lyt</span>, <span class="va">df</span><span class="op">)</span></span>
<span><span class="va">tbl</span></span>
<span><span class="co">#              Arm A           Arm B    </span></span>
<span><span class="co">#          Female   Male   Female   Male</span></span>
<span><span class="co"># ——————————————————————————————————————</span></span>
<span><span class="co"># CAN                                   </span></span>
<span><span class="co">#   mean    38.2    40.3    40.3    38.9</span></span>
<span><span class="co"># USA                                   </span></span>
<span><span class="co">#   mean    39.2    39.7    38.9    39.6</span></span></code></pre></div>
<p>In this table the data used to derive the first data cell (average of
age of female Canadians in Arm A) is where
<code>df$country == "CAN" &amp; df$arm == "Arm A" &amp; df$gender == "Female"</code>.
This cell value can also be calculated manually:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">df</span><span class="op">$</span><span class="va">age</span><span class="op">[</span><span class="va">df</span><span class="op">$</span><span class="va">country</span> <span class="op">==</span> <span class="st">"CAN"</span> <span class="op">&amp;</span> <span class="va">df</span><span class="op">$</span><span class="va">arm</span> <span class="op">==</span> <span class="st">"Arm A"</span> <span class="op">&amp;</span> <span class="va">df</span><span class="op">$</span><span class="va">gender</span> <span class="op">==</span> <span class="st">"Female"</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="co"># [1] 38.22447</span></span></code></pre></div>
<p>Row structure can also be used to group the table into titled groups
of pages during rendering. We do this via ‘page by splits’, which are
declared via <code>page_by = TRUE</code> within a call to
<code>split_rows_by</code>:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">lyt</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/basic_table.html">basic_table</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/split_cols_by.html">split_cols_by</a></span><span class="op">(</span><span class="st">"arm"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/split_cols_by.html">split_cols_by</a></span><span class="op">(</span><span class="st">"gender"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/split_rows_by.html">split_rows_by</a></span><span class="op">(</span><span class="st">"country"</span>, page_by <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/split_rows_by.html">split_rows_by</a></span><span class="op">(</span><span class="st">"handed"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/analyze.html">analyze</a></span><span class="op">(</span><span class="st">"age"</span>, afun <span class="op">=</span> <span class="va">mean</span>, format <span class="op">=</span> <span class="st">"xx.x"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">tbl</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/build_table.html">build_table</a></span><span class="op">(</span><span class="va">lyt</span>, <span class="va">df</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="fu"><a href="https://insightsengineering.github.io/formatters/latest-tag/reference/export_as_txt.html" class="external-link">export_as_txt</a></span><span class="op">(</span><span class="va">tbl</span>, page_type <span class="op">=</span> <span class="st">"letter"</span>, page_break <span class="op">=</span> <span class="st">"\n\n~~~~~~ Page Break ~~~~~~\n\n"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co"># </span></span>
<span><span class="co"># country: CAN</span></span>
<span><span class="co"># </span></span>
<span><span class="co"># ————————————————————————————————————————</span></span>
<span><span class="co">#                Arm A           Arm B    </span></span>
<span><span class="co">#            Female   Male   Female   Male</span></span>
<span><span class="co"># ————————————————————————————————————————</span></span>
<span><span class="co"># Left                                    </span></span>
<span><span class="co">#   mean      38.9    40.4    40.3    37.7</span></span>
<span><span class="co"># Right                                   </span></span>
<span><span class="co">#   mean      36.6    40.2    40.2    40.6</span></span>
<span><span class="co"># </span></span>
<span><span class="co"># </span></span>
<span><span class="co"># ~~~~~~ Page Break ~~~~~~</span></span>
<span><span class="co"># </span></span>
<span><span class="co"># </span></span>
<span><span class="co"># country: USA</span></span>
<span><span class="co"># </span></span>
<span><span class="co"># ————————————————————————————————————————</span></span>
<span><span class="co">#                Arm A           Arm B    </span></span>
<span><span class="co">#            Female   Male   Female   Male</span></span>
<span><span class="co"># ————————————————————————————————————————</span></span>
<span><span class="co"># Left                                    </span></span>
<span><span class="co">#   mean      40.4    39.7    39.2    40.1</span></span>
<span><span class="co"># Right                                   </span></span>
<span><span class="co">#   mean      36.9    39.8    38.5    39.0</span></span></code></pre></div>
<p>We go into more detail on page-by splits and how to control the
page-group specific titles in the Title and footer vignette.</p>
<p>Note that if you print or render a table without pagination, the
page_by splits are currently rendered as normal row splits. This may
change in future releases.</p>
</div>
<div class="section level2">
<h2 id="adding-group-information">Adding Group Information<a class="anchor" aria-label="anchor" href="#adding-group-information"></a>
</h2>
<p>When adding row splits, we get by default label rows for each split
level, for example <code>CAN</code> and <code>USA</code> in the table
above. Besides the column space subsetting, we have now further
subsetted the data for each cell. It is often useful when defining a row
splitting to display information about each row group. In
<code>rtables</code> this is referred to as content information,
i.e. <code><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean()</a></code> on row 2 is a descendant of <code>CAN</code>
(visible via the indenting, though the table has an underlying tree
structure that is not of importance for this vignette). In order to add
content information and turn the <code>CAN</code> label row into a
content row, the <code><a href="../reference/summarize_row_groups.html">summarize_row_groups()</a></code> function is
required. By default, the count (<code>nrows()</code>) and percentage of
data relative to the column associated data is calculated:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">lyt</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/basic_table.html">basic_table</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/split_cols_by.html">split_cols_by</a></span><span class="op">(</span><span class="st">"arm"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/split_cols_by.html">split_cols_by</a></span><span class="op">(</span><span class="st">"gender"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/split_rows_by.html">split_rows_by</a></span><span class="op">(</span><span class="st">"country"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/summarize_row_groups.html">summarize_row_groups</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/analyze.html">analyze</a></span><span class="op">(</span><span class="st">"age"</span>, afun <span class="op">=</span> <span class="va">mean</span>, format <span class="op">=</span> <span class="st">"xx.x"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">tbl</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/build_table.html">build_table</a></span><span class="op">(</span><span class="va">lyt</span>, <span class="va">df</span><span class="op">)</span></span>
<span><span class="va">tbl</span></span>
<span><span class="co">#                   Arm A                     Arm B         </span></span>
<span><span class="co">#            Female        Male        Female        Male   </span></span>
<span><span class="co"># ——————————————————————————————————————————————————————————</span></span>
<span><span class="co"># CAN      45 (46.9%)   64 (61.0%)   46 (50.0%)   62 (57.9%)</span></span>
<span><span class="co">#   mean      38.2         40.3         40.3         38.9   </span></span>
<span><span class="co"># USA      51 (53.1%)   41 (39.0%)   46 (50.0%)   45 (42.1%)</span></span>
<span><span class="co">#   mean      39.2         39.7         38.9         39.6</span></span></code></pre></div>
<p>The relative percentage for average age of female Canadians is
calculated as follows:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df_cell</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/subset.html" class="external-link">subset</a></span><span class="op">(</span><span class="va">df</span>, <span class="va">df</span><span class="op">$</span><span class="va">country</span> <span class="op">==</span> <span class="st">"CAN"</span> <span class="op">&amp;</span> <span class="va">df</span><span class="op">$</span><span class="va">arm</span> <span class="op">==</span> <span class="st">"Arm A"</span> <span class="op">&amp;</span> <span class="va">df</span><span class="op">$</span><span class="va">gender</span> <span class="op">==</span> <span class="st">"Female"</span><span class="op">)</span></span>
<span><span class="va">df_col_1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/subset.html" class="external-link">subset</a></span><span class="op">(</span><span class="va">df</span>, <span class="va">df</span><span class="op">$</span><span class="va">arm</span> <span class="op">==</span> <span class="st">"Arm A"</span> <span class="op">&amp;</span> <span class="va">df</span><span class="op">$</span><span class="va">gender</span> <span class="op">==</span> <span class="st">"Female"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>count <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">df_cell</span><span class="op">)</span>, percentage <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">df_cell</span><span class="op">)</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">df_col_1</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#      count percentage </span></span>
<span><span class="co">#   45.00000    0.46875</span></span></code></pre></div>
<p>so the group percentages per row split sum up to 1 for each
column.</p>
<p>We can further split the row space by dividing each country by
handedness:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">lyt</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/basic_table.html">basic_table</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/split_cols_by.html">split_cols_by</a></span><span class="op">(</span><span class="st">"arm"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/split_cols_by.html">split_cols_by</a></span><span class="op">(</span><span class="st">"gender"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/split_rows_by.html">split_rows_by</a></span><span class="op">(</span><span class="st">"country"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/summarize_row_groups.html">summarize_row_groups</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/split_rows_by.html">split_rows_by</a></span><span class="op">(</span><span class="st">"handed"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/analyze.html">analyze</a></span><span class="op">(</span><span class="st">"age"</span>, afun <span class="op">=</span> <span class="va">mean</span>, format <span class="op">=</span> <span class="st">"xx.x"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">tbl</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/build_table.html">build_table</a></span><span class="op">(</span><span class="va">lyt</span>, <span class="va">df</span><span class="op">)</span></span>
<span><span class="va">tbl</span></span>
<span><span class="co">#                     Arm A                     Arm B         </span></span>
<span><span class="co">#              Female        Male        Female        Male   </span></span>
<span><span class="co"># ————————————————————————————————————————————————————————————</span></span>
<span><span class="co"># CAN        45 (46.9%)   64 (61.0%)   46 (50.0%)   62 (57.9%)</span></span>
<span><span class="co">#   Left                                                      </span></span>
<span><span class="co">#     mean      38.9         40.4         40.3         37.7   </span></span>
<span><span class="co">#   Right                                                     </span></span>
<span><span class="co">#     mean      36.6         40.2         40.2         40.6   </span></span>
<span><span class="co"># USA        51 (53.1%)   41 (39.0%)   46 (50.0%)   45 (42.1%)</span></span>
<span><span class="co">#   Left                                                      </span></span>
<span><span class="co">#     mean      40.4         39.7         39.2         40.1   </span></span>
<span><span class="co">#   Right                                                     </span></span>
<span><span class="co">#     mean      36.9         39.8         38.5         39.0</span></span></code></pre></div>
<p>Next, we further add a count and percentage summary for handedness
within each country:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">lyt</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/basic_table.html">basic_table</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/split_cols_by.html">split_cols_by</a></span><span class="op">(</span><span class="st">"arm"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/split_cols_by.html">split_cols_by</a></span><span class="op">(</span><span class="st">"gender"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/split_rows_by.html">split_rows_by</a></span><span class="op">(</span><span class="st">"country"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/summarize_row_groups.html">summarize_row_groups</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/split_rows_by.html">split_rows_by</a></span><span class="op">(</span><span class="st">"handed"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/summarize_row_groups.html">summarize_row_groups</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/analyze.html">analyze</a></span><span class="op">(</span><span class="st">"age"</span>, afun <span class="op">=</span> <span class="va">mean</span>, format <span class="op">=</span> <span class="st">"xx.x"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">tbl</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/build_table.html">build_table</a></span><span class="op">(</span><span class="va">lyt</span>, <span class="va">df</span><span class="op">)</span></span>
<span><span class="va">tbl</span></span>
<span><span class="co">#                     Arm A                     Arm B         </span></span>
<span><span class="co">#              Female        Male        Female        Male   </span></span>
<span><span class="co"># ————————————————————————————————————————————————————————————</span></span>
<span><span class="co"># CAN        45 (46.9%)   64 (61.0%)   46 (50.0%)   62 (57.9%)</span></span>
<span><span class="co">#   Left     32 (33.3%)   42 (40.0%)   26 (28.3%)   37 (34.6%)</span></span>
<span><span class="co">#     mean      38.9         40.4         40.3         37.7   </span></span>
<span><span class="co">#   Right    13 (13.5%)   22 (21.0%)   20 (21.7%)   25 (23.4%)</span></span>
<span><span class="co">#     mean      36.6         40.2         40.2         40.6   </span></span>
<span><span class="co"># USA        51 (53.1%)   41 (39.0%)   46 (50.0%)   45 (42.1%)</span></span>
<span><span class="co">#   Left     34 (35.4%)   19 (18.1%)   25 (27.2%)   25 (23.4%)</span></span>
<span><span class="co">#     mean      40.4         39.7         39.2         40.1   </span></span>
<span><span class="co">#   Right    17 (17.7%)   22 (21.0%)   21 (22.8%)   20 (18.7%)</span></span>
<span><span class="co">#     mean      36.9         39.8         38.5         39.0</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="comparing-with-other-tabulation-frameworks">Comparing with Other Tabulation Frameworks<a class="anchor" aria-label="anchor" href="#comparing-with-other-tabulation-frameworks"></a>
</h2>
<p>There are a number of other table frameworks available in
<code>R</code>, including:</p>
<ul>
<li><a href="https://gt.rstudio.com/" class="external-link">gt</a></li>
<li><a href="https://CRAN.R-project.org/package=xtable" class="external-link">xtable</a></li>
<li><a href="https://CRAN.R-project.org/package=tableone" class="external-link">tableone</a></li>
<li><a href="https://CRAN.R-project.org/package=tables" class="external-link">tables</a></li>
</ul>
<p>There are a number of reasons to choose <code>rtables</code> (yet
another tables R package):</p>
<ul>
<li>Output tables in ASCII to text files.</li>
<li>Table rendering (ASCII, HTML, etc.) is separate from the data model.
Hence, one always has access to the non-rounded/non-formatted
numbers.</li>
<li>Pagination in both horizontal and vertical directions to meet the
health authority submission requirements.</li>
<li>Cell, row, column, and table reference system.</li>
<li>Titles, footers, and referential footnotes.</li>
<li>Path based access to cell content which is useful for automated
content generation.</li>
</ul>
<p>More in depth comparisons of the various tabulation frameworks can be
found in the <a href="https://rconsortium.github.io/rtrs-wg/tablepkgs.html#tablepkgs" class="external-link">Overview
of table R packages</a> chapter of the Tables in Clinical Trials with R
book compiled by the R Consortium Tables Working Group.</p>
</div>
<div class="section level2">
<h2 id="summary">Summary<a class="anchor" aria-label="anchor" href="#summary"></a>
</h2>
<p>In this vignette you have learned:</p>
<ul>
<li>Every cell has an associated subset of data - this means that much
of tabulation has to do with splitting/subsetting data.</li>
<li>Tables can be described with pre-data using layouts.</li>
<li>Tables are a form of visualization of data.</li>
</ul>
<p>The other vignettes in the <code>rtables</code> package will provide
more detailed information about the <code>rtables</code> package. We
recommend that you continue with the <a href="https://insightsengineering.github.io/rtables/latest-tag/articles/tabulation_dplyr.html"><code>tabulation_dplyr</code></a>
vignette which compares the information derived by the table in this
vignette using <code>dplyr</code>.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="nest">
  <p>rtables is a part of the <strong>NEST</strong> and <a href="https://pharmaverse.org/" class="external-link"><strong>pharmaverse</strong></a>.</p>
</div>
<script type="text/javascript" src="../analytics.js"></script></footer>
</div>





  </body>
</html>
