<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="rtables">
<title>Subsetting and Manipulating Table Contents • rtables</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.3/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.3/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Subsetting and Manipulating Table Contents">
<meta property="og:description" content="rtables">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-default navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">rtables</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.5.3</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../articles/index.html">Articles</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
<!-- start dropdown for versions --> <li class="nav-item dropdown">
        <a href="#" class="nav-link dropdown-toggle"
          data-bs-toggle="dropdown" role="button"
          aria-expanded="false" aria-haspopup="true"
          id="dropdown-versions">Versions</a> <div class="dropdown-menu" aria-labelledby="dropdown-versions"> <a class="dropdown-item" data-toggle="tooltip" title="" href="https://Roche.github.io/rtables/main">main</a> </div></li>
<!-- end dropdown for versions -->
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/roche/rtables">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Subsetting and Manipulating Table Contents</h1>
                        <h4 data-toc-skip class="author">Gabriel Becker
and Adrian Waddell</h4>
            
            <h4 data-toc-skip class="date">2022-10-26</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/roche/rtables/blob/HEAD/vignettes/subsetting_tables.Rmd" class="external-link"><code>vignettes/subsetting_tables.Rmd</code></a></small>
      <div class="d-none name"><code>subsetting_tables.Rmd</code></div>
    </div>

    
    
<style type="text/css">
.reveal .r code {
    white-space: pre;
}
</style>
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p><code>TableTree</code> objects are based on a tree data structure as
the name indicates. The package is written such that the user does not
need to walk trees for many basic table manipulations. Walking trees
will still be necessary for certain manipulation and will be the subject
of a different vignette.</p>
<p>In this vignette we show some methods to subset tables and to extract
cell values.</p>
<p>We will use the following table for illustrative purposes:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/roche/rtables" class="external-link">rtables</a></span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co"># Loading required package: magrittr</span></span></code></pre>
<pre><code><span><span class="co"># Loading required package: formatters</span></span></code></pre>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co"># </span></span>
<span><span class="co"># Attaching package: 'dplyr'</span></span></code></pre>
<pre><code><span><span class="co"># The following objects are masked from 'package:stats':</span></span>
<span><span class="co"># </span></span>
<span><span class="co">#     filter, lag</span></span></code></pre>
<pre><code><span><span class="co"># The following objects are masked from 'package:base':</span></span>
<span><span class="co"># </span></span>
<span><span class="co">#     intersect, setdiff, setequal, union</span></span></code></pre>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tbl</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/basic_table.html">basic_table</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/split_cols_by.html">split_cols_by</a></span><span class="op">(</span><span class="st">"ARM"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/split_rows_by.html">split_rows_by</a></span><span class="op">(</span><span class="st">"SEX"</span>, split_fun <span class="op">=</span> <span class="va">drop_split_levels</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/analyze.html">analyze</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"AGE"</span>, <span class="st">"STRATA1"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/build_table.html">build_table</a></span><span class="op">(</span><span class="va">ex_adsl</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">SEX</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"M"</span>, <span class="st">"F"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">tbl</span></span></code></pre></div>
<pre><code><span><span class="co">#             A: Drug X   B: Placebo   C: Combination</span></span>
<span><span class="co"># ———————————————————————————————————————————————————</span></span>
<span><span class="co"># F                                                  </span></span>
<span><span class="co">#   AGE                                              </span></span>
<span><span class="co">#     Mean      32.76       34.12          35.20     </span></span>
<span><span class="co">#   STRATA1                                          </span></span>
<span><span class="co">#     A          21           24             18      </span></span>
<span><span class="co">#     B          25           27             21      </span></span>
<span><span class="co">#     C          33           26             27      </span></span>
<span><span class="co"># M                                                  </span></span>
<span><span class="co">#   AGE                                              </span></span>
<span><span class="co">#     Mean      35.57       37.44          35.38     </span></span>
<span><span class="co">#   STRATA1                                          </span></span>
<span><span class="co">#     A          16           19             20      </span></span>
<span><span class="co">#     B          21           17             21      </span></span>
<span><span class="co">#     C          14           19             19</span></span></code></pre>
</div>
<div class="section level2">
<h2 id="traditional-subsetting-and-modification-with">Traditional Subsetting and modification with <code>[</code><a class="anchor" aria-label="anchor" href="#traditional-subsetting-and-modification-with"></a>
</h2>
<p>The <code>[</code> and <code>[&lt;-</code> acessor functions operate
largerly the same as their <code>data.frame</code> cousins:</p>
<ul>
<li>
<code>[</code> and <code>[&lt;-</code> both treat Tables as
rectangular objects (rather than trees)
<ul>
<li>In particular this means label rows are treated as rows with empty
cell values, rather than rows without cells</li>
</ul>
</li>
<li>
<code>[</code> accepts both column and row absolute position, and
missing arguments mean “all indexes in that dimension”
<ul>
<li>multiple values can be specified in both row and column
position</li>
<li>negative numeric positions are supported, though like
<code>[.data.frame</code> they cannot be mixed with positive ones</li>
</ul>
</li>
<li>
<code>[</code> always returns the same class as the object being
subset unless <code>drop = TRUE</code>
</li>
<li>
<code>[ , drop = TRUE</code> returns the raw (possibly
multi-element) value associated with the cell.</li>
</ul>
<p><strong>Known Differences from <code>[.data.frame</code></strong></p>
<ul>
<li>absolute position cannot currently be used to reorder columns or
rows
<ul>
<li>Note in general the result of such an ordering is unlikely to be
structurally valid</li>
</ul>
</li>
<li>
<code>character</code> indices are treated as paths, not vectors of
names in both <code>[</code> and <code>[&lt;-</code>
</li>
</ul>
<p>The <code>[</code> accessor function always returns an
<code>TableTree</code> object if <code>drop=TRUE</code> is not set. The
first argument are the row indices and the second argument the column
indices. Alternatively logical subsetting can be used. The indices are
based on visible rows and not on the tree structure. So:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tbl</span><span class="op">[</span><span class="fl">1</span>, <span class="fl">1</span><span class="op">]</span></span></code></pre></div>
<pre><code><span><span class="co">#     A: Drug X</span></span>
<span><span class="co"># —————————————</span></span>
<span><span class="co"># F</span></span></code></pre>
<p>is a table with an empty cell because the first row is a label row.
We need to access a cell with actual cell data:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tbl</span><span class="op">[</span><span class="fl">3</span>, <span class="fl">1</span><span class="op">]</span></span></code></pre></div>
<pre><code><span><span class="co">#        A: Drug X</span></span>
<span><span class="co"># ————————————————</span></span>
<span><span class="co"># Mean     32.76</span></span></code></pre>
<p>To retrieve the value, we use <code>drop = TRUE</code>:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tbl</span><span class="op">[</span><span class="fl">3</span>, <span class="fl">1</span>, drop <span class="op">=</span> <span class="cn">TRUE</span><span class="op">]</span></span></code></pre></div>
<pre><code><span><span class="co"># [1] 32.75949</span></span></code></pre>
<p>One can access multiple rows and columns:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tbl</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">2</span><span class="op">]</span></span></code></pre></div>
<pre><code><span><span class="co">#            A: Drug X   B: Placebo</span></span>
<span><span class="co"># —————————————————————————————————</span></span>
<span><span class="co"># F                                </span></span>
<span><span class="co">#   AGE                            </span></span>
<span><span class="co">#     Mean     32.76       34.12</span></span></code></pre>
<p>Note that we do not repeat label rows for descending children,
e.g.</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tbl</span><span class="op">[</span><span class="fl">2</span><span class="op">:</span><span class="fl">4</span>, <span class="op">]</span></span></code></pre></div>
<pre><code><span><span class="co">#           A: Drug X   B: Placebo   C: Combination</span></span>
<span><span class="co"># —————————————————————————————————————————————————</span></span>
<span><span class="co"># AGE                                              </span></span>
<span><span class="co">#   Mean      32.76       34.12          35.20     </span></span>
<span><span class="co"># STRATA1</span></span></code></pre>
<p>does not show that the first row is derived from <code>AGE</code>. In
order to repeat content/label information one should use the pagination
feature. Please read the related vignette.</p>
<p>Character indices are interpreted as paths (see below), NOT elements
to be matched against <code>names(tbl)</code>:</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tbl</span><span class="op">[</span>,<span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ARM"</span>, <span class="st">"A: Drug X"</span><span class="op">)</span><span class="op">]</span></span></code></pre></div>
<pre><code><span><span class="co"># Note: method with signature 'VTableTree#missing#ANY' chosen for function '[',</span></span>
<span><span class="co">#  target signature 'TableTree#missing#character'.</span></span>
<span><span class="co">#  "VTableTree#ANY#character" would also be valid</span></span></code></pre>
<pre><code><span><span class="co">#             A: Drug X</span></span>
<span><span class="co"># —————————————————————</span></span>
<span><span class="co"># F                    </span></span>
<span><span class="co">#   AGE                </span></span>
<span><span class="co">#     Mean      32.76  </span></span>
<span><span class="co">#   STRATA1            </span></span>
<span><span class="co">#     A          21    </span></span>
<span><span class="co">#     B          25    </span></span>
<span><span class="co">#     C          33    </span></span>
<span><span class="co"># M                    </span></span>
<span><span class="co">#   AGE                </span></span>
<span><span class="co">#     Mean      35.57  </span></span>
<span><span class="co">#   STRATA1            </span></span>
<span><span class="co">#     A          16    </span></span>
<span><span class="co">#     B          21    </span></span>
<span><span class="co">#     C          14</span></span></code></pre>
</div>
<div class="section level2">
<h2 id="path-based-cell-value-accessing">Path Based Cell Value Accessing:<a class="anchor" aria-label="anchor" href="#path-based-cell-value-accessing"></a>
</h2>
<p>Tables can be subset or modified in a structurally aware manner via
<em>pathing</em>.</p>
<p>Paths define semantically meaningful positions within a constructed
table that correspond to the logic of the layout used to create it.</p>
<p>A path is an ordered set of split names, the names of subgroups
generated by the split, and the <code>@content</code> directive, which
steps itno a position’s content (or row group summary) table.</p>
<p>We can see the row and column paths of an existing table via the
<code>row_paths</code>, <code>col_paths</code>,
<code>row_paths_summary</code>, and <code>col_paths_summary</code>,
functions, or as a portion of the more general <code>make_rows_df</code>
function output.</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tbl2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/basic_table.html">basic_table</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/split_cols_by.html">split_cols_by</a></span><span class="op">(</span><span class="st">"ARM"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="../reference/split_cols_by.html">split_cols_by</a></span><span class="op">(</span><span class="st">"SEX"</span>, split_fun <span class="op">=</span> <span class="va">drop_split_levels</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="../reference/split_rows_by.html">split_rows_by</a></span><span class="op">(</span><span class="st">"RACE"</span>, split_fun <span class="op">=</span> <span class="va">drop_split_levels</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="../reference/summarize_row_groups.html">summarize_row_groups</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="../reference/analyze.html">analyze</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"AGE"</span>, <span class="st">"STRATA1"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="../reference/build_table.html">build_table</a></span><span class="op">(</span><span class="va">ex_adsl</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">SEX</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"M"</span>, <span class="st">"F"</span><span class="op">)</span> <span class="op">&amp;</span></span>
<span>                                   <span class="va">RACE</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/levels.html" class="external-link">levels</a></span><span class="op">(</span><span class="va">RACE</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">]</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">tbl2</span></span></code></pre></div>
<pre><code><span><span class="co">#                                    A: Drug X                B: Placebo              C: Combination     </span></span>
<span><span class="co">#                                 F            M            F            M            F            M     </span></span>
<span><span class="co"># ———————————————————————————————————————————————————————————————————————————————————————————————————————</span></span>
<span><span class="co"># ASIAN                       41 (53.9%)   25 (54.3%)   36 (52.2%)   30 (60.0%)   39 (60.9%)   32 (57.1%)</span></span>
<span><span class="co">#   AGE                                                                                                  </span></span>
<span><span class="co">#     Mean                      31.22        34.60        35.06        38.63        36.44        37.66   </span></span>
<span><span class="co">#   STRATA1                                                                                              </span></span>
<span><span class="co">#     A                           11           10           14           10           11           7     </span></span>
<span><span class="co">#     B                           11           9            15           7            11           14    </span></span>
<span><span class="co">#     C                           19           6            7            13           17           11    </span></span>
<span><span class="co"># BLACK OR AFRICAN AMERICAN   18 (23.7%)   12 (26.1%)   16 (23.2%)   12 (24.0%)   14 (21.9%)   14 (25.0%)</span></span>
<span><span class="co">#   AGE                                                                                                  </span></span>
<span><span class="co">#     Mean                      34.06        34.58        33.88        36.33        33.21        34.21   </span></span>
<span><span class="co">#   STRATA1                                                                                              </span></span>
<span><span class="co">#     A                           5            2            5            6            3            7     </span></span>
<span><span class="co">#     B                           6            5            3            4            4            4     </span></span>
<span><span class="co">#     C                           7            5            8            2            7            3     </span></span>
<span><span class="co"># WHITE                       17 (22.4%)   9 (19.6%)    17 (24.6%)   8 (16.0%)    11 (17.2%)   10 (17.9%)</span></span>
<span><span class="co">#   AGE                                                                                                  </span></span>
<span><span class="co">#     Mean                      34.12        40.00        32.41        34.62        33.00        30.80   </span></span>
<span><span class="co">#   STRATA1                                                                                              </span></span>
<span><span class="co">#     A                           5            3            3            3            3            5     </span></span>
<span><span class="co">#     B                           5            4            8            4            5            2     </span></span>
<span><span class="co">#     C                           7            2            6            1            3            3</span></span></code></pre>
<p>So the column paths are as follows:</p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/row_paths_summary.html">col_paths_summary</a></span><span class="op">(</span><span class="va">tbl2</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co"># label             path                       </span></span>
<span><span class="co"># —————————————————————————————————————————————</span></span>
<span><span class="co"># A: Drug X         ARM, A: Drug X             </span></span>
<span><span class="co">#   F               ARM, A: Drug X, SEX, F     </span></span>
<span><span class="co">#   M               ARM, A: Drug X, SEX, M     </span></span>
<span><span class="co"># B: Placebo        ARM, B: Placebo            </span></span>
<span><span class="co">#   F               ARM, B: Placebo, SEX, F    </span></span>
<span><span class="co">#   M               ARM, B: Placebo, SEX, M    </span></span>
<span><span class="co"># C: Combination    ARM, C: Combination        </span></span>
<span><span class="co">#   F               ARM, C: Combination, SEX, F</span></span>
<span><span class="co">#   M               ARM, C: Combination, SEX, M</span></span></code></pre>
<p>and the row paths are as follows:</p>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/row_paths_summary.html">row_paths_summary</a></span><span class="op">(</span><span class="va">tbl2</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co"># rowname                      node_class    path                                                                </span></span>
<span><span class="co"># ———————————————————————————————————————————————————————————————————————————————————————————————————————————————</span></span>
<span><span class="co"># ASIAN                        ContentRow    RACE, ASIAN, @content, ASIAN                                        </span></span>
<span><span class="co">#   AGE                        LabelRow      RACE, ASIAN, AGE                                                    </span></span>
<span><span class="co">#     Mean                     DataRow       RACE, ASIAN, AGE, Mean                                              </span></span>
<span><span class="co">#   STRATA1                    LabelRow      RACE, ASIAN, STRATA1                                                </span></span>
<span><span class="co">#     A                        DataRow       RACE, ASIAN, STRATA1, A                                             </span></span>
<span><span class="co">#     B                        DataRow       RACE, ASIAN, STRATA1, B                                             </span></span>
<span><span class="co">#     C                        DataRow       RACE, ASIAN, STRATA1, C                                             </span></span>
<span><span class="co"># BLACK OR AFRICAN AMERICAN    ContentRow    RACE, BLACK OR AFRICAN AMERICAN, @content, BLACK OR AFRICAN AMERICAN</span></span>
<span><span class="co">#   AGE                        LabelRow      RACE, BLACK OR AFRICAN AMERICAN, AGE                                </span></span>
<span><span class="co">#     Mean                     DataRow       RACE, BLACK OR AFRICAN AMERICAN, AGE, Mean                          </span></span>
<span><span class="co">#   STRATA1                    LabelRow      RACE, BLACK OR AFRICAN AMERICAN, STRATA1                            </span></span>
<span><span class="co">#     A                        DataRow       RACE, BLACK OR AFRICAN AMERICAN, STRATA1, A                         </span></span>
<span><span class="co">#     B                        DataRow       RACE, BLACK OR AFRICAN AMERICAN, STRATA1, B                         </span></span>
<span><span class="co">#     C                        DataRow       RACE, BLACK OR AFRICAN AMERICAN, STRATA1, C                         </span></span>
<span><span class="co"># WHITE                        ContentRow    RACE, WHITE, @content, WHITE                                        </span></span>
<span><span class="co">#   AGE                        LabelRow      RACE, WHITE, AGE                                                    </span></span>
<span><span class="co">#     Mean                     DataRow       RACE, WHITE, AGE, Mean                                              </span></span>
<span><span class="co">#   STRATA1                    LabelRow      RACE, WHITE, STRATA1                                                </span></span>
<span><span class="co">#     A                        DataRow       RACE, WHITE, STRATA1, A                                             </span></span>
<span><span class="co">#     B                        DataRow       RACE, WHITE, STRATA1, B                                             </span></span>
<span><span class="co">#     C                        DataRow       RACE, WHITE, STRATA1, C</span></span></code></pre>
<p>To get a semantically meaningful subset of our table, then, we can
use <code>[</code> (or <code>tt_at_path</code> which underlies it)</p>
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tbl2</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"RACE"</span>, <span class="st">"ASIAN"</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ARM"</span>, <span class="st">"C: Combination"</span><span class="op">)</span><span class="op">]</span></span></code></pre></div>
<pre><code><span><span class="co">#                 C: Combination     </span></span>
<span><span class="co">#                 F            M     </span></span>
<span><span class="co"># ———————————————————————————————————</span></span>
<span><span class="co"># ASIAN       39 (60.9%)   32 (57.1%)</span></span>
<span><span class="co">#   AGE                              </span></span>
<span><span class="co">#     Mean      36.44        37.66   </span></span>
<span><span class="co">#   STRATA1                          </span></span>
<span><span class="co">#     A           11           7     </span></span>
<span><span class="co">#     B           11           14    </span></span>
<span><span class="co">#     C           17           11</span></span></code></pre>
<p>We cal also retrieve individual cell-values via the
<code>value_at</code> convenience function, which takes a pair of row
and column paths which resolve together to an individual cell,
e.g. average age for asian femal patients in arm A:</p>
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/cell_values.html">value_at</a></span><span class="op">(</span><span class="va">tbl2</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"RACE"</span>, <span class="st">"ASIAN"</span>, <span class="st">"AGE"</span>,  <span class="st">"Mean"</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ARM"</span>, <span class="st">"A: Drug X"</span>, <span class="st">"SEX"</span>, <span class="st">"F"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co"># [1] 31.21951</span></span></code></pre>
<p>You can also request information from non-cell specific paths with
the <code>cell_values</code> function:</p>
<div class="sourceCode" id="cb33"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/cell_values.html">cell_values</a></span><span class="op">(</span><span class="va">tbl2</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"RACE"</span>, <span class="st">"ASIAN"</span>, <span class="st">"AGE"</span>, <span class="st">"Mean"</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ARM"</span>, <span class="st">"A: Drug X"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co"># $`A: Drug X.F`</span></span>
<span><span class="co"># [1] 31.21951</span></span>
<span><span class="co"># </span></span>
<span><span class="co"># $`A: Drug X.M`</span></span>
<span><span class="co"># [1] 34.6</span></span></code></pre>
<p>Note the return value of <code>cell_values</code> is always a list
even if you specify a path to a cell:</p>
<div class="sourceCode" id="cb35"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/cell_values.html">cell_values</a></span><span class="op">(</span><span class="va">tbl2</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"RACE"</span>, <span class="st">"ASIAN"</span>, <span class="st">"AGE"</span>,  <span class="st">"Mean"</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ARM"</span>, <span class="st">"A: Drug X"</span>, <span class="st">"SEX"</span>, <span class="st">"F"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co"># $`A: Drug X.F`</span></span>
<span><span class="co"># [1] 31.21951</span></span></code></pre>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Gabriel Becker, Adrian Waddell.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
