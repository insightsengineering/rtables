<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Declaring a column-split based on levels of a variable — split_cols_by • rtables</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Declaring a column-split based on levels of a variable — split_cols_by"><meta name="description" content="Will generate children for each subset of a categorical variable."><meta property="og:description" content="Will generate children for each subset of a categorical variable."><meta property="og:image" content="https://insightsengineering.github.io/rtables/logo.png"><link rel="stylesheet" href="../consent.css"><script src="../consent.js" type="text/javascript" charset="utf-8"></script></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">rtables</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.6.10.9011</small>

    <div style="width: 140px; margin-left: 0.5rem;"> <small class="nav-text text-muted me-auto">part of</small> <img src="https://github.com/insightsengineering/hex-stickers/blob/main/PNG/nest.png?raw=true" alt="NEST" style="height: 30px;"><a href="https://pharmaverse.org/" class="external-link"><img src="https://github.com/insightsengineering/hex-stickers/blob/main/PNG/pharmaverse.png?raw=true" alt="pharmaverse" style="height: 28px;"></a> </div>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/rtables.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Getting Started</h6></li>
    <li><a class="dropdown-item" href="../articles/exploratory_analysis.html">Exploratory Analysis</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Clinical Trials</h6></li>
    <li><a class="dropdown-item" href="../articles/clinical_trials.html">Example Clinical Trials Tables</a></li>
    <li><a class="dropdown-item" href="../articles/baseline.html">Comparing Against Baselines or Control</a></li>
    <li><a class="dropdown-item" href="../articles/ard_how_to.html">Generating QC-Ready Result Data Frames (ARDs) from Tables</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Table Customization</h6></li>
    <li><a class="dropdown-item" href="../articles/custom_appearance.html">Customizing Appearance</a></li>
    <li><a class="dropdown-item" href="../articles/title_footer.html">Titles, Footers, and Referential Footnotes</a></li>
    <li><a class="dropdown-item" href="../articles/sorting_pruning.html">Pruning and Sorting Tables</a></li>
    <li><a class="dropdown-item" href="../articles/col_counts.html">Column Counts and Formats</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../articles/index.html">More articles...</a></li>
  </ul></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-developer-guide" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Developer Guide</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-developer-guide"><li><a class="dropdown-item" href="../articles/dev-guide/dg_split_machinery.html">Split Machinery</a></li>
    <li><a class="dropdown-item" href="../articles/dev-guide/dg_tabulation.html">Tabulation</a></li>
    <li><a class="dropdown-item" href="../articles/dev-guide/dg_table_hierarchy.html">Table Hierarchy</a></li>
    <li><a class="dropdown-item" href="../articles/dev-guide/dg_debug_rtables.html">Debugging in {rtables} and Beyond</a></li>
    <li><a class="dropdown-item" href="../articles/dev-guide/dg_notes.html">Sparse Notes on {rtables} Internals</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-reports" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Reports</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-reports"><li><a class="dropdown-item" href="../coverage-report/">Coverage report</a></li>
    <li><a class="dropdown-item" href="../unit-test-report/">Unit test report</a></li>
    <li><a class="dropdown-item" href="../unit-test-report-non-cran/">Non-CRAN unit test report</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/insightsengineering/rtables"><span class="fa fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Declaring a column-split based on levels of a variable</h1>
      <small class="dont-index">Source: <a href="https://github.com/insightsengineering/rtables/blob/main/R/colby_constructors.R" class="external-link"><code>R/colby_constructors.R</code></a></small>
      <div class="d-none name"><code>split_cols_by.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Will generate children for each subset of a categorical variable.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">split_cols_by</span><span class="op">(</span></span>
<span>  <span class="va">lyt</span>,</span>
<span>  <span class="va">var</span>,</span>
<span>  labels_var <span class="op">=</span> <span class="va">var</span>,</span>
<span>  split_label <span class="op">=</span> <span class="va">var</span>,</span>
<span>  split_fun <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  format <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  nested <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  child_labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"default"</span>, <span class="st">"visible"</span>, <span class="st">"hidden"</span><span class="op">)</span>,</span>
<span>  extra_args <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  ref_group <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  show_colcounts <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  colcount_format <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-lyt">lyt<a class="anchor" aria-label="anchor" href="#arg-lyt"></a></dt>
<dd><p>(<code>PreDataTableLayouts</code>)<br> layout object pre-data used for tabulation.</p></dd>


<dt id="arg-var">var<a class="anchor" aria-label="anchor" href="#arg-var"></a></dt>
<dd><p>(<code>string</code>)<br> variable name.</p></dd>


<dt id="arg-labels-var">labels_var<a class="anchor" aria-label="anchor" href="#arg-labels-var"></a></dt>
<dd><p>(<code>string</code>)<br> name of variable containing labels to be displayed for the values of <code>var</code>.</p></dd>


<dt id="arg-split-label">split_label<a class="anchor" aria-label="anchor" href="#arg-split-label"></a></dt>
<dd><p>(<code>string</code>)<br> label to be associated with the table generated by the split. Not to be confused
with labels assigned to each child (which are based on the data and type of split during tabulation).</p></dd>


<dt id="arg-split-fun">split_fun<a class="anchor" aria-label="anchor" href="#arg-split-fun"></a></dt>
<dd><p>(<code>function</code> or <code>NULL</code>)<br> custom splitting function. See <a href="custom_split_funs.html">custom_split_funs</a>.</p></dd>


<dt id="arg-format">format<a class="anchor" aria-label="anchor" href="#arg-format"></a></dt>
<dd><p>(<code>string</code>, <code>function</code>, or <code>list</code>)<br> format associated with this split. Formats can be declared via
strings (<code>"xx.x"</code>) or function. In cases such as <code>analyze</code> calls, they can be character vectors or lists of
functions. See <code><a href="https://insightsengineering.github.io/formatters/latest-tag/reference/list_formats.html" class="external-link">formatters::list_valid_format_labels()</a></code> for a list of all available format strings.</p></dd>


<dt id="arg-nested">nested<a class="anchor" aria-label="anchor" href="#arg-nested"></a></dt>
<dd><p>(<code>logical</code>)<br> whether this layout instruction should be applied within the existing layout structure
<em>if possible</em> (<code>TRUE</code>, the default) or as a new top-level element (<code>FALSE</code>). Ignored if it would nest a split
underneath analyses, which is not allowed.</p></dd>


<dt id="arg-child-labels">child_labels<a class="anchor" aria-label="anchor" href="#arg-child-labels"></a></dt>
<dd><p>(<code>string</code>)<br> the display behavior for the labels (i.e. label rows) of the children of this
split. Accepts <code>"default"</code>, <code>"visible"</code>, and <code>"hidden"</code>. Defaults to <code>"default"</code> which flags the label row as
visible only if the child has 0 content rows.</p></dd>


<dt id="arg-extra-args">extra_args<a class="anchor" aria-label="anchor" href="#arg-extra-args"></a></dt>
<dd><p>(<code>list</code>)<br> extra arguments to be passed to the tabulation function. Element position in the list
corresponds to the children of this split. Named elements in the child-specific lists are ignored if they do
not match a formal argument of the tabulation function.</p></dd>


<dt id="arg-ref-group">ref_group<a class="anchor" aria-label="anchor" href="#arg-ref-group"></a></dt>
<dd><p>(<code>string</code> or <code>NULL</code>)<br> level of <code>var</code> that should be considered <code>ref_group</code>/reference.</p></dd>


<dt id="arg-show-colcounts">show_colcounts<a class="anchor" aria-label="anchor" href="#arg-show-colcounts"></a></dt>
<dd><p>(<code>logical(1)</code>)<br> should column counts be displayed at the level
facets created by this split. Defaults to <code>FALSE</code>.</p></dd>


<dt id="arg-colcount-format">colcount_format<a class="anchor" aria-label="anchor" href="#arg-colcount-format"></a></dt>
<dd><p>(<code>character(1)</code>)<br> if <code>show_colcounts</code> is <code>TRUE</code>, the
format which should be used to display column counts for facets generated by
this split. Defaults to <code>"(N=xx)"</code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A <code>PreDataTableLayouts</code> object suitable for passing to further layouting functions, and to <code><a href="build_table.html">build_table()</a></code>.</p>
    </div>
    <div class="section level2">
    <h2 id="custom-splitting-function-details">Custom Splitting Function Details<a class="anchor" aria-label="anchor" href="#custom-splitting-function-details"></a></h2>



<p>User-defined custom split functions can perform any type of computation on the incoming data provided that they
meet the requirements for generating "splits" of the incoming data based on the split object.</p>
<p>Split functions are functions that accept:</p><dl><dt>df</dt>
<dd><p>a <code>data.frame</code> of incoming data to be split.</p></dd>

<dt>spl</dt>
<dd><p>a Split object. This is largely an internal detail custom functions will not need to worry about,
but <code>obj_name(spl)</code>, for example, will give the name of the split as it will appear in paths in the resulting
table.</p></dd>

<dt>vals</dt>
<dd><p>any pre-calculated values. If given non-<code>NULL</code> values, the values returned should match these.
Should be <code>NULL</code> in most cases and can usually be ignored.</p></dd>

<dt>labels</dt>
<dd><p>any pre-calculated value labels. Same as above for <code>values</code>.</p></dd>

<dt>trim</dt>
<dd><p>if <code>TRUE</code>, resulting splits that are empty are removed.</p></dd>

<dt>(optional) .spl_context</dt>
<dd><p>a <code>data.frame</code> describing previously performed splits which collectively
arrived at <code>df</code>.</p></dd>


</dl><p>The function must then output a named <code>list</code> with the following elements:</p>
<dl><dt>values</dt>
<dd><p>the vector of all values corresponding to the splits of <code>df</code>.</p></dd>

<dt>datasplit</dt>
<dd><p>a list of <code>data.frame</code>s representing the groupings of the actual observations from <code>df</code>.</p></dd>

<dt>labels</dt>
<dd><p>a character vector giving a string label for each value listed in the <code>values</code> element above.</p></dd>

<dt>(optional) extras</dt>
<dd><p>if present, extra arguments are to be passed to summary and analysis functions
whenever they are executed on the corresponding element of <code>datasplit</code> or a subset thereof.</p></dd>


</dl><p>One way to generate custom splitting functions is to wrap existing split functions and modify either the incoming
data before they are called or their outputs.</p>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Gabriel Becker</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">lyt</span> <span class="op">&lt;-</span> <span class="fu"><a href="basic_table.html">basic_table</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu">split_cols_by</span><span class="op">(</span><span class="st">"ARM"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="analyze.html">analyze</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"AGE"</span>, <span class="st">"BMRKR2"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">tbl</span> <span class="op">&lt;-</span> <span class="fu"><a href="build_table.html">build_table</a></span><span class="op">(</span><span class="va">lyt</span>, <span class="va">ex_adsl</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">tbl</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            A: Drug X   B: Placebo   C: Combination</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ——————————————————————————————————————————————————</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> AGE                                               </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Mean       33.77       35.43          35.43     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> BMRKR2                                            </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   LOW         50           45             40      </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   MEDIUM      37           56             42      </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   HIGH        47           33             50      </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Let's look at the splits in more detail</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">lyt1</span> <span class="op">&lt;-</span> <span class="fu"><a href="basic_table.html">basic_table</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu">split_cols_by</span><span class="op">(</span><span class="st">"ARM"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">lyt1</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> A Pre-data Table Layout</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Column-Split Structure:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ARM (lvls) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Row-Split Structure:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  () </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># add an analysis (summary)</span></span></span>
<span class="r-in"><span><span class="va">lyt2</span> <span class="op">&lt;-</span> <span class="va">lyt1</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="analyze.html">analyze</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"AGE"</span>, <span class="st">"COUNTRY"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    afun <span class="op">=</span> <span class="fu"><a href="list_wrap.html">list_wrap_x</a></span><span class="op">(</span><span class="va">summary</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    format <span class="op">=</span> <span class="st">"xx.xx"</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">lyt2</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> A Pre-data Table Layout</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Column-Split Structure:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ARM (lvls) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Row-Split Structure:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> AGE:COUNTRY (** multivar analysis **) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">tbl2</span> <span class="op">&lt;-</span> <span class="fu"><a href="build_table.html">build_table</a></span><span class="op">(</span><span class="va">lyt2</span>, <span class="va">DM</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">tbl2</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             A: Drug X   B: Placebo   C: Combination</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ———————————————————————————————————————————————————</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> AGE                                                </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Min.        20.00       21.00          22.00     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   1st Qu.     29.00       29.00          30.00     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Median      33.00       32.00          33.00     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Mean        34.91       33.02          34.57     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   3rd Qu.     39.00       37.00          38.00     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Max.        60.00       55.00          53.00     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> COUNTRY                                            </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   CHN         62.00       48.00          69.00     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   USA         13.00       14.00          17.00     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   BRA         9.00        13.00           7.00     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   PAK         8.00         8.00          12.00     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   NGA         10.00        5.00           9.00     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   RUS         9.00         5.00           6.00     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   JPN         5.00         8.00           5.00     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   GBR         2.00         3.00           2.00     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   CAN         3.00         2.00           2.00     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   CHE         0.00         0.00           0.00     </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># By default sequentially adding layouts results in nesting</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">DM_MF</span> <span class="op">&lt;-</span> <span class="va">DM</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">SEX</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"M"</span>, <span class="st">"F"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>SEX <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/droplevels.html" class="external-link">droplevels</a></span><span class="op">(</span><span class="va">SEX</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">lyt3</span> <span class="op">&lt;-</span> <span class="fu"><a href="basic_table.html">basic_table</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu">split_cols_by</span><span class="op">(</span><span class="st">"ARM"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu">split_cols_by</span><span class="op">(</span><span class="st">"SEX"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="analyze.html">analyze</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"AGE"</span>, <span class="st">"COUNTRY"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    afun <span class="op">=</span> <span class="fu"><a href="list_wrap.html">list_wrap_x</a></span><span class="op">(</span><span class="va">summary</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    format <span class="op">=</span> <span class="st">"xx.xx"</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">lyt3</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> A Pre-data Table Layout</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Column-Split Structure:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ARM (lvls) -&gt; SEX (lvls) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Row-Split Structure:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> AGE:COUNTRY (** multivar analysis **) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">tbl3</span> <span class="op">&lt;-</span> <span class="fu"><a href="build_table.html">build_table</a></span><span class="op">(</span><span class="va">lyt3</span>, <span class="va">DM_MF</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">tbl3</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>               A: Drug X      B: Placebo      C: Combination  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>               F       M       F       M        F         M   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> —————————————————————————————————————————————————————————————</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> AGE                                                          </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Min.      20.00   24.00   21.00   21.00    22.00     25.00 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   1st Qu.   29.00   31.00   29.00   28.00    30.00     29.00 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Median    32.00   35.00   33.00   31.00    35.00     32.00 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Mean      33.71   36.55   33.84   32.10    34.89     34.28 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   3rd Qu.   38.00   41.50   38.00   35.75    39.00     38.00 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Max.      58.00   60.00   55.00   47.00    53.00     53.00 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> COUNTRY                                                      </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   CHN       34.00   28.00   29.00   19.00    31.00     38.00 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   USA       8.00    5.00    6.00    8.00     10.00     7.00  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   BRA       6.00    3.00    6.00    7.00     3.00      4.00  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   PAK       2.00    6.00    5.00    3.00     5.00      7.00  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   NGA       6.00    4.00    2.00    3.00     5.00      4.00  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   RUS       7.00    2.00    1.00    4.00     2.00      4.00  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   JPN       2.00    3.00    3.00    5.00     4.00      1.00  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   GBR       2.00    0.00    3.00    0.00     1.00      1.00  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   CAN       3.00    0.00    1.00    1.00     0.00      2.00  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   CHE       0.00    0.00    0.00    0.00     0.00      0.00  </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># nested=TRUE vs not</span></span></span>
<span class="r-in"><span><span class="va">lyt4</span> <span class="op">&lt;-</span> <span class="fu"><a href="basic_table.html">basic_table</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu">split_cols_by</span><span class="op">(</span><span class="st">"ARM"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="split_rows_by.html">split_rows_by</a></span><span class="op">(</span><span class="st">"SEX"</span>, split_fun <span class="op">=</span> <span class="va">drop_split_levels</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="split_rows_by.html">split_rows_by</a></span><span class="op">(</span><span class="st">"RACE"</span>, split_fun <span class="op">=</span> <span class="va">drop_split_levels</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="analyze.html">analyze</a></span><span class="op">(</span><span class="st">"AGE"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">lyt4</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> A Pre-data Table Layout</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Column-Split Structure:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ARM (lvls) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Row-Split Structure:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> SEX (lvls) -&gt; RACE (lvls) -&gt; AGE (** analysis **) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">tbl4</span> <span class="op">&lt;-</span> <span class="fu"><a href="build_table.html">build_table</a></span><span class="op">(</span><span class="va">lyt4</span>, <span class="va">DM</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">tbl4</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                               A: Drug X   B: Placebo   C: Combination</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> —————————————————————————————————————————————————————————————————————</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> F                                                                    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ASIAN                                                              </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     Mean                        33.55       34.00          34.90     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   BLACK OR AFRICAN AMERICAN                                          </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     Mean                        33.17       30.58          33.85     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   WHITE                                                              </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     Mean                        35.88       38.57          36.50     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> M                                                                    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ASIAN                                                              </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     Mean                        35.03       31.10          34.39     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   BLACK OR AFRICAN AMERICAN                                          </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     Mean                        37.40       32.83          34.14     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   WHITE                                                              </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     Mean                        44.00       35.29          34.00     </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">lyt5</span> <span class="op">&lt;-</span> <span class="fu"><a href="basic_table.html">basic_table</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu">split_cols_by</span><span class="op">(</span><span class="st">"ARM"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="split_rows_by.html">split_rows_by</a></span><span class="op">(</span><span class="st">"SEX"</span>, split_fun <span class="op">=</span> <span class="va">drop_split_levels</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="analyze.html">analyze</a></span><span class="op">(</span><span class="st">"AGE"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="split_rows_by.html">split_rows_by</a></span><span class="op">(</span><span class="st">"RACE"</span>, nested <span class="op">=</span> <span class="cn">FALSE</span>, split_fun <span class="op">=</span> <span class="va">drop_split_levels</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="analyze.html">analyze</a></span><span class="op">(</span><span class="st">"AGE"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">lyt5</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> A Pre-data Table Layout</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Column-Split Structure:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ARM (lvls) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Row-Split Structure:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> SEX (lvls) -&gt; AGE (** analysis **) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> RACE (lvls) -&gt; AGE (** analysis **) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">tbl5</span> <span class="op">&lt;-</span> <span class="fu"><a href="build_table.html">build_table</a></span><span class="op">(</span><span class="va">lyt5</span>, <span class="va">DM</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">tbl5</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                             A: Drug X   B: Placebo   C: Combination</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ———————————————————————————————————————————————————————————————————</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> F                                                                  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Mean                        33.71       33.84          34.89     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> M                                                                  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Mean                        36.55       32.10          34.28     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ASIAN                                                              </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Mean                        34.20       32.68          34.63     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> BLACK OR AFRICAN AMERICAN                                          </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Mean                        34.68       31.71          34.00     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> WHITE                                                              </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Mean                        39.36       36.93          35.11     </span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="nest">
  <p>rtables is a part of the <strong>NEST</strong> and <a href="https://pharmaverse.org/" class="external-link"><strong>pharmaverse</strong></a>.</p>
</div>
<script type="text/javascript" src="../analytics.js"></script></footer></div>





  </body></html>

