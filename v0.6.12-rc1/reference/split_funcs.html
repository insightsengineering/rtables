<!DOCTYPE html>
<!-- Generated by pkgdown + https://github.com/insightsengineering/r-pkgdown-multiversion -->
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Split functions — split_funcs • rtables</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Split functions — split_funcs">
<meta name="description" content="This is a collection of useful, default split function that can help you in dividing the data, hence the
table rows or columns, into different parts or groups (splits). You can also create your own split function if you
need to create a custom division as specific as you need. Please consider reading custom_split_funs if
this is the case. Beyond this list of functions, you can also use add_overall_level() and add_combo_levels()
for adding or modifying levels and trim_levels_to_map() to provide possible level combinations to filter the split
with.">
<meta property="og:description" content="This is a collection of useful, default split function that can help you in dividing the data, hence the
table rows or columns, into different parts or groups (splits). You can also create your own split function if you
need to create a custom division as specific as you need. Please consider reading custom_split_funs if
this is the case. Beyond this list of functions, you can also use add_overall_level() and add_combo_levels()
for adding or modifying levels and trim_levels_to_map() to provide possible level combinations to filter the split
with.">
<meta property="og:image" content="https://insightsengineering.github.io/rtables/logo.svg">
<link rel="stylesheet" href="../consent.css">
<script src="../consent.js" type="text/javascript" charset="utf-8"></script>
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">rtables</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.6.12</small>

    <div style="width: 140px; margin-left: 0.5rem;"> <small class="nav-text text-muted me-auto">part of</small> <img src="https://github.com/insightsengineering/hex-stickers/blob/main/PNG/nest.png?raw=true" alt="NEST" style="height: 30px;"><a href="https://pharmaverse.org/" class="external-link"><img src="https://github.com/insightsengineering/hex-stickers/blob/main/PNG/pharmaverse.png?raw=true" alt="pharmaverse" style="height: 28px;"></a> </div>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../articles/rtables.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Getting Started</h6></li>
    <li><a class="dropdown-item" href="../articles/exploratory_analysis.html">Exploratory Analysis</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Clinical Trials</h6></li>
    <li><a class="dropdown-item" href="../articles/clinical_trials.html">Example Clinical Trials Tables</a></li>
    <li><a class="dropdown-item" href="../articles/baseline.html">Comparing Against Baselines or Control</a></li>
    <li><a class="dropdown-item" href="../articles/ard_how_to.html">Generating QC-Ready Result Data Frames (ARDs) from Tables</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Table Customization</h6></li>
    <li><a class="dropdown-item" href="../articles/custom_appearance.html">Customizing Appearance</a></li>
    <li><a class="dropdown-item" href="../articles/title_footer.html">Titles, Footers, and Referential Footnotes</a></li>
    <li><a class="dropdown-item" href="../articles/sorting_pruning.html">Pruning and Sorting Tables</a></li>
    <li><a class="dropdown-item" href="../articles/col_counts.html">Column Counts and Formats</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../articles/index.html">More articles...</a></li>
  </ul>
</li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-developer-guide" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Developer Guide</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-developer-guide">
<li><a class="dropdown-item" href="../articles/dev-guide/dg_split_machinery.html">Split Machinery</a></li>
    <li><a class="dropdown-item" href="../articles/dev-guide/dg_tabulation.html">Tabulation</a></li>
    <li><a class="dropdown-item" href="../articles/dev-guide/dg_table_hierarchy.html">Table Hierarchy</a></li>
    <li><a class="dropdown-item" href="../articles/dev-guide/dg_debug_rtables.html">Debugging in {rtables} and Beyond</a></li>
    <li><a class="dropdown-item" href="../articles/dev-guide/dg_notes.html">Sparse Notes on {rtables} Internals</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-reports" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Reports</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-reports">
<li><a class="dropdown-item" href="../coverage-report/">Coverage report</a></li>
    <li><a class="dropdown-item" href="../unit-test-report/">Unit test report</a></li>
    <li><a class="dropdown-item" href="../unit-test-report-non-cran/">Non-CRAN unit test report</a></li>
  </ul>
</li>
      <div><li class="nav-item dropdown">
    <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-versions">Versions</a>
    <div class="dropdown-menu" aria-labelledby="dropdown-versions">
    <a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/rtables/release-candidate">release-candidate</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/rtables/main">main</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/rtables/latest-release">latest-release</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/rtables/v0.6.13">v0.6.13</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/rtables/v0.6.13-rc2">v0.6.13-rc2</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/rtables/v0.6.13-rc1">v0.6.13-rc1</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/rtables/v0.6.12">v0.6.12</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/rtables/v0.6.12-rc2">v0.6.12-rc2</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/rtables/v0.6.12-rc1">v0.6.12-rc1</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/rtables/v0.6.11">v0.6.11</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/rtables/v0.6.10">v0.6.10</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/rtables/v0.6.9">v0.6.9</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/rtables/v0.6.8">v0.6.8</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/rtables/v0.6.7">v0.6.7</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/rtables/v0.6.6">v0.6.6</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/rtables/v0.6.6-rc1">v0.6.6-rc1</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/rtables/v0.6.5">v0.6.5</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/rtables/v0.6.4">v0.6.4</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/rtables/v0.6.3">v0.6.3</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/rtables/v0.6.2">v0.6.2</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/rtables/v0.6.1">v0.6.1</a>
</div>
</li></div>
</ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/insightsengineering/rtables"><span class="fa fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Split functions</h1>
      <small class="dont-index">Source: <a href="https://github.com/insightsengineering/rtables/blob/main/R/default_split_funs.R" class="external-link"><code>R/default_split_funs.R</code></a></small>
      <div class="d-none name"><code>split_funcs.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This is a collection of useful, default split function that can help you in dividing the data, hence the
table rows or columns, into different parts or groups (splits). You can also create your own split function if you
need to create a custom division as specific as you need. Please consider reading <a href="custom_split_funs.html">custom_split_funs</a> if
this is the case. Beyond this list of functions, you can also use <code><a href="add_overall_level.html">add_overall_level()</a></code> and <code><a href="add_overall_level.html">add_combo_levels()</a></code>
for adding or modifying levels and <code><a href="trim_levels_to_map.html">trim_levels_to_map()</a></code> to provide possible level combinations to filter the split
with.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a>
</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">keep_split_levels</span><span class="op">(</span><span class="va">only</span>, reorder <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">remove_split_levels</span><span class="op">(</span><span class="va">excl</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">drop_split_levels</span><span class="op">(</span><span class="va">df</span>, <span class="va">spl</span>, vals <span class="op">=</span> <span class="cn">NULL</span>, labels <span class="op">=</span> <span class="cn">NULL</span>, trim <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">drop_and_remove_levels</span><span class="op">(</span><span class="va">excl</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">reorder_split_levels</span><span class="op">(</span><span class="va">neworder</span>, newlabels <span class="op">=</span> <span class="va">neworder</span>, drlevels <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">trim_levels_in_group</span><span class="op">(</span><span class="va">innervar</span>, drop_outlevs <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a>
</h2>


<dl>
<dt id="arg-only">only<a class="anchor" aria-label="anchor" href="#arg-only"></a>
</dt>
<dd><p>(<code>character</code>)<br> levels to retain (all others will be dropped). If none of the levels is present
an empty table is returned.</p></dd>


<dt id="arg-reorder">reorder<a class="anchor" aria-label="anchor" href="#arg-reorder"></a>
</dt>
<dd><p>(<code>flag</code>)<br> whether the order of <code>only</code> should be used as the order of the children of the
split. Defaults to <code>TRUE</code>.</p></dd>


<dt id="arg-excl">excl<a class="anchor" aria-label="anchor" href="#arg-excl"></a>
</dt>
<dd><p>(<code>character</code>)<br> levels to be excluded (they will not be reflected in the resulting table structure
regardless of presence in the data).</p></dd>


<dt id="arg-df">df<a class="anchor" aria-label="anchor" href="#arg-df"></a>
</dt>
<dd><p>(<code>data.frame</code> or <code>tibble</code>)<br> dataset.</p></dd>


<dt id="arg-spl">spl<a class="anchor" aria-label="anchor" href="#arg-spl"></a>
</dt>
<dd><p>(<code>Split</code>)<br> a <code>Split</code> object defining a partitioning or analysis/tabulation of the data.</p></dd>


<dt id="arg-vals">vals<a class="anchor" aria-label="anchor" href="#arg-vals"></a>
</dt>
<dd><p>(<code>ANY</code>)<br> for internal use only.</p></dd>


<dt id="arg-labels">labels<a class="anchor" aria-label="anchor" href="#arg-labels"></a>
</dt>
<dd><p>(<code>character</code>)<br> labels to use for the remaining levels instead of the existing ones.</p></dd>


<dt id="arg-trim">trim<a class="anchor" aria-label="anchor" href="#arg-trim"></a>
</dt>
<dd><p>(<code>flag</code>)<br> whether splits corresponding with 0 observations should be kept when tabulating.</p></dd>


<dt id="arg-neworder">neworder<a class="anchor" aria-label="anchor" href="#arg-neworder"></a>
</dt>
<dd><p>(<code>character</code>)<br> new order of factor levels. All need to be present in the data.
To add empty levels, rely on pre-processing or create your <a href="custom_split_funs.html">custom_split_funs</a>.</p></dd>


<dt id="arg-newlabels">newlabels<a class="anchor" aria-label="anchor" href="#arg-newlabels"></a>
</dt>
<dd><p>(<code>character</code>)<br> labels for (new order of) factor levels. If named, the levels are matched.
Otherwise, the order of <code>neworder</code> is used.</p></dd>


<dt id="arg-drlevels">drlevels<a class="anchor" aria-label="anchor" href="#arg-drlevels"></a>
</dt>
<dd><p>(<code>flag</code>)<br> whether levels that are not in <code>neworder</code> should be dropped.
Default is <code>TRUE</code>. Note: <code>drlevels = TRUE</code> does not drop levels that are not originally in the data.
Rely on pre-processing or use a combination of split functions with <code><a href="make_split_fun.html">make_split_fun()</a></code> to also drop
unused levels.</p></dd>


<dt id="arg-innervar">innervar<a class="anchor" aria-label="anchor" href="#arg-innervar"></a>
</dt>
<dd><p>(<code>string</code>)<br> variable whose factor levels should be trimmed (e.g. empty levels dropped)
<em>separately within each grouping defined at this point in the structure</em>.</p></dd>


<dt id="arg-drop-outlevs">drop_outlevs<a class="anchor" aria-label="anchor" href="#arg-drop-outlevs"></a>
</dt>
<dd><p>(<code>flag</code>)<br> whether empty levels in the variable being split on (i.e. the "outer"
variable, not <code>innervar</code>) should be dropped. Defaults to <code>TRUE</code>.</p></dd>

</dl>
</div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a>
</h2>
    <p>A function that can be used to split the data accordingly. The actual function signature
is similar to the one you can define when creating a fully custom one. For more details see <a href="custom_split_funs.html">custom_split_funs</a>.</p>
    </div>
    <div class="section level2">
    <h2 id="functions">Functions<a class="anchor" aria-label="anchor" href="#functions"></a>
</h2>

<ul>
<li><p><code>keep_split_levels()</code>: keeps only specified levels (<code>only</code>) in the split variable. If any of the specified
levels is not present, an error is returned. <code>reorder = TRUE</code> (the default) orders the split levels
according to the order of <code>only</code>.</p></li>
<li><p><code>remove_split_levels()</code>: Removes specified levels (<code>excl</code>) from the split variable. Nothing done if not in data.</p></li>
<li><p><code>drop_split_levels()</code>: Drops levels that have no representation in the data.</p></li>
<li><p><code>drop_and_remove_levels()</code>: Removes specified levels <code>excl</code> and drops all levels that are
not in the data.</p></li>
<li><p><code>reorder_split_levels()</code>: Reorders split levels following <code>neworder</code>, which needs to be of
same size as the levels in data.</p></li>
<li><p><code>trim_levels_in_group()</code>: Takes the split groups and removes levels of <code>innervar</code> if not present in
those split groups. If you want to specify a filter of possible combinations, please
consider using <code><a href="trim_levels_to_map.html">trim_levels_to_map()</a></code>.</p></li>
</ul>
</div>
    <div class="section level2">
    <h2 id="note">Note<a class="anchor" aria-label="anchor" href="#note"></a>
</h2>
    <p>The following parameters are also documented here but they are only the default
signature of a split function: <code>df</code> (data to be split), <code>spl</code> (split object), and <code>vals = NULL</code>,
<code>labels = NULL</code>, <code>trim = FALSE</code> (last three only for internal use). See <a href="custom_split_funs.html">custom_split_funs</a> for more details
and <code><a href="make_split_fun.html">make_split_fun()</a></code> for a more advanced API.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a>
</h2>
    <div class="dont-index"><p><a href="custom_split_funs.html">custom_split_funs</a>, <code><a href="add_overall_level.html">add_overall_level()</a></code>, <code><a href="add_overall_level.html">add_combo_levels()</a></code>, and <code><a href="trim_levels_to_map.html">trim_levels_to_map()</a></code>.</p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a>
</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># keep_split_levels keeps specified levels (reorder = TRUE by default)</span></span></span>
<span class="r-in"><span><span class="va">lyt</span> <span class="op">&lt;-</span> <span class="fu"><a href="basic_table.html">basic_table</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="split_rows_by.html">split_rows_by</a></span><span class="op">(</span><span class="st">"COUNTRY"</span>,</span></span>
<span class="r-in"><span>    split_fun <span class="op">=</span> <span class="fu">keep_split_levels</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"USA"</span>, <span class="st">"CAN"</span>, <span class="st">"BRA"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="analyze.html">analyze</a></span><span class="op">(</span><span class="st">"AGE"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">tbl</span> <span class="op">&lt;-</span> <span class="fu"><a href="build_table.html">build_table</a></span><span class="op">(</span><span class="va">lyt</span>, <span class="va">DM</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">tbl</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          all obs</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ————————————————</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> USA             </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Mean    35.30 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> CAN             </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Mean    33.57 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> BRA             </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Mean    32.31 </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># remove_split_levels removes specified split levels</span></span></span>
<span class="r-in"><span><span class="va">lyt</span> <span class="op">&lt;-</span> <span class="fu"><a href="basic_table.html">basic_table</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="split_rows_by.html">split_rows_by</a></span><span class="op">(</span><span class="st">"COUNTRY"</span>,</span></span>
<span class="r-in"><span>    split_fun <span class="op">=</span> <span class="fu">remove_split_levels</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>      <span class="st">"USA"</span>, <span class="st">"CAN"</span>,</span></span>
<span class="r-in"><span>      <span class="st">"CHE"</span>, <span class="st">"BRA"</span></span></span>
<span class="r-in"><span>    <span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="analyze.html">analyze</a></span><span class="op">(</span><span class="st">"AGE"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">tbl</span> <span class="op">&lt;-</span> <span class="fu"><a href="build_table.html">build_table</a></span><span class="op">(</span><span class="va">lyt</span>, <span class="va">DM</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">tbl</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          all obs</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ————————————————</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> CHN             </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Mean    34.64 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> PAK             </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Mean    35.32 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> NGA             </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Mean    32.96 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> RUS             </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Mean    33.45 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> JPN             </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Mean    33.17 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> GBR             </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Mean    30.14 </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># drop_split_levels drops levels that are not present in the data</span></span></span>
<span class="r-in"><span><span class="va">lyt</span> <span class="op">&lt;-</span> <span class="fu"><a href="basic_table.html">basic_table</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="split_rows_by.html">split_rows_by</a></span><span class="op">(</span><span class="st">"SEX"</span>, split_fun <span class="op">=</span> <span class="va">drop_split_levels</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="analyze.html">analyze</a></span><span class="op">(</span><span class="st">"AGE"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">tbl</span> <span class="op">&lt;-</span> <span class="fu"><a href="build_table.html">build_table</a></span><span class="op">(</span><span class="va">lyt</span>, <span class="va">DM</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">tbl</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          all obs</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ————————————————</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> F               </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Mean    34.13 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> M               </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Mean    34.32 </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Removing "M" and "U" directly, then "UNDIFFERENTIATED" because not in data</span></span></span>
<span class="r-in"><span><span class="va">lyt</span> <span class="op">&lt;-</span> <span class="fu"><a href="basic_table.html">basic_table</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="split_rows_by.html">split_rows_by</a></span><span class="op">(</span><span class="st">"SEX"</span>, split_fun <span class="op">=</span> <span class="fu">drop_and_remove_levels</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"M"</span>, <span class="st">"U"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="analyze.html">analyze</a></span><span class="op">(</span><span class="st">"AGE"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">tbl</span> <span class="op">&lt;-</span> <span class="fu"><a href="build_table.html">build_table</a></span><span class="op">(</span><span class="va">lyt</span>, <span class="va">DM</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">tbl</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          all obs</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ————————————————</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> F               </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Mean    34.13 </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Reordering levels in split variable</span></span></span>
<span class="r-in"><span><span class="va">lyt</span> <span class="op">&lt;-</span> <span class="fu"><a href="basic_table.html">basic_table</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="split_rows_by.html">split_rows_by</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="st">"SEX"</span>,</span></span>
<span class="r-in"><span>    split_fun <span class="op">=</span> <span class="fu">reorder_split_levels</span><span class="op">(</span></span></span>
<span class="r-in"><span>      neworder <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"U"</span>, <span class="st">"F"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>      newlabels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>U <span class="op">=</span> <span class="st">"Uu"</span>, `F` <span class="op">=</span> <span class="st">"Female"</span><span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="analyze.html">analyze</a></span><span class="op">(</span><span class="st">"AGE"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">tbl</span> <span class="op">&lt;-</span> <span class="fu"><a href="build_table.html">build_table</a></span><span class="op">(</span><span class="va">lyt</span>, <span class="va">DM</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">tbl</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          all obs</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ————————————————</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Uu              </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Mean     NA   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Female          </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Mean    34.13 </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Reordering levels in split variable but keeping all the levels</span></span></span>
<span class="r-in"><span><span class="va">lyt</span> <span class="op">&lt;-</span> <span class="fu"><a href="basic_table.html">basic_table</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="split_rows_by.html">split_rows_by</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="st">"SEX"</span>,</span></span>
<span class="r-in"><span>    split_fun <span class="op">=</span> <span class="fu">reorder_split_levels</span><span class="op">(</span></span></span>
<span class="r-in"><span>      neworder <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"U"</span>, <span class="st">"F"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>      newlabels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Uu"</span>, <span class="st">"Female"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>      drlevels <span class="op">=</span> <span class="cn">FALSE</span></span></span>
<span class="r-in"><span>    <span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="analyze.html">analyze</a></span><span class="op">(</span><span class="st">"AGE"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">tbl</span> <span class="op">&lt;-</span> <span class="fu"><a href="build_table.html">build_table</a></span><span class="op">(</span><span class="va">lyt</span>, <span class="va">DM</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">tbl</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                    all obs</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ——————————————————————————</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Uu                        </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Mean               NA   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Female                    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Mean              34.13 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> M                         </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Mean              34.32 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> UNDIFFERENTIATED          </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Mean               NA   </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># trim_levels_in_group() trims levels within each group defined by the split variable</span></span></span>
<span class="r-in"><span><span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  col1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"A"</span>, <span class="st">"B"</span>, <span class="st">"C"</span><span class="op">)</span>, levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"A"</span>, <span class="st">"B"</span>, <span class="st">"C"</span>, <span class="st">"N"</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  col2 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"a"</span>, <span class="st">"b"</span>, <span class="st">"c"</span><span class="op">)</span>, levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"a"</span>, <span class="st">"b"</span>, <span class="st">"c"</span>, <span class="st">"x"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span> <span class="co"># N is removed if drop_outlevs = TRUE, x is removed always</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">tbl</span> <span class="op">&lt;-</span> <span class="fu"><a href="basic_table.html">basic_table</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="split_rows_by.html">split_rows_by</a></span><span class="op">(</span><span class="st">"col1"</span>, split_fun <span class="op">=</span> <span class="fu">trim_levels_in_group</span><span class="op">(</span><span class="st">"col2"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="analyze.html">analyze</a></span><span class="op">(</span><span class="st">"col2"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="build_table.html">build_table</a></span><span class="op">(</span><span class="va">dat</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">tbl</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       all obs</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> —————————————</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> A            </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   a      1   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> B            </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   b      1   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> C            </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   c      1   </span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>


    <footer><div class="nest">
  <p>rtables is a part of the <strong>NEST</strong> and <a href="https://pharmaverse.org/" class="external-link"><strong>pharmaverse</strong></a>.</p>
</div>
<script type="text/javascript" src="../analytics.js"></script></footer>
</div>





  </body>
</html>
