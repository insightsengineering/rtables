<!DOCTYPE html>
<!-- Generated by pkgdown + https://github.com/insightsengineering/r-pkgdown-multiversion -->
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="rtables">
<title>Tabulation Concepts • rtables</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Tabulation Concepts">
<meta property="og:description" content="rtables">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><link rel="stylesheet" href="../consent.css">
<script src="../consent.js" type="text/javascript" charset="utf-8"></script>
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar fixed-top navbar-default navbar-expand-lg bg-light"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">rtables</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.6.5</small>

    <div style="width: 140px; margin-left: 0.5rem;"> <small class="nav-text text-muted me-auto">part of</small> <img src="https://github.com/insightsengineering/hex-stickers/blob/main/PNG/nest.png?raw=true" alt="NEST" style="height: 30px;"><a href="https://pharmaverse.org/" class="external-link"><img src="https://github.com/insightsengineering/hex-stickers/blob/main/PNG/pharmaverse.png?raw=true" alt="pharmaverse" style="height: 28px;"></a> </div>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <h6 class="dropdown-header" data-toc-skip>Getting Started</h6>
    <a class="dropdown-item" href="../articles/introduction.html">Introduction to rtables</a>
    <a class="dropdown-item" href="../articles/exploratory_analysis.html">Exploratory Analysis</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Clinical Trials</h6>
    <a class="dropdown-item" href="../articles/clinical_trials.html">Example Clinical Trials Tables</a>
    <a class="dropdown-item" href="../articles/baseline.html">Comparing Against Baselines or Control</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Table Customization</h6>
    <a class="dropdown-item" href="../articles/custom_appearance.html">Customizing Appearance</a>
    <a class="dropdown-item" href="../articles/title_footer.html">Titles, Footers, and Referential Footnotes</a>
    <a class="dropdown-item" href="../articles/sorting_pruning.html">Pruning and Sorting Tables</a>
    <div class="dropdown-divider"></div>
    <a class="dropdown-item" href="../articles/index.html">More articles...</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>

      <li class="nav-item dropdown">
    <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-versions">Versions</a>
    <div class="dropdown-menu" aria-labelledby="dropdown-versions">
    <a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/rtables/release-candidate">release-candidate</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/rtables/main">main</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/rtables/latest-release">latest-release</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/rtables/v0.6.14">v0.6.14</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/rtables/v0.6.13">v0.6.13</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/rtables/v0.6.13-rc2">v0.6.13-rc2</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/rtables/v0.6.13-rc1">v0.6.13-rc1</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/rtables/v0.6.12">v0.6.12</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/rtables/v0.6.12-rc2">v0.6.12-rc2</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/rtables/v0.6.12-rc1">v0.6.12-rc1</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/rtables/v0.6.11">v0.6.11</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/rtables/v0.6.10">v0.6.10</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/rtables/v0.6.9">v0.6.9</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/rtables/v0.6.8">v0.6.8</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/rtables/v0.6.7">v0.6.7</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/rtables/v0.6.6">v0.6.6</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/rtables/v0.6.6-rc1">v0.6.6-rc1</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/rtables/v0.6.5">v0.6.5</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/rtables/v0.6.4">v0.6.4</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/rtables/v0.6.3">v0.6.3</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/rtables/v0.6.2">v0.6.2</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/rtables/v0.6.1">v0.6.1</a>
</div>
</li>
</ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/insightsengineering/rtables">
    <span class="fa fa-github fa-lg"></span>

  </a>
</li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Tabulation Concepts</h1>
                        <h4 data-toc-skip class="author">Adrian
Waddell</h4>

            <h4 data-toc-skip class="date">6/12/2020</h4>

      <small class="dont-index">Source: <a href="https://github.com/insightsengineering/rtables/blob/HEAD/vignettes/tabulation_concepts.Rmd" class="external-link"><code>vignettes/tabulation_concepts.Rmd</code></a></small>
      <div class="d-none name"><code>tabulation_concepts.Rmd</code></div>
    </div>



<style type="text/css">
.reveal .r code {
    white-space: pre;
}
</style>
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>In this vignette we will introduce some theory behind using layouts
for table creation. Much of the theory also holds true when using other
table packages. For this vignette we will use the following
packages:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tibble.tidyverse.org/" class="external-link">tibble</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/insightsengineering/rtables" class="external-link">rtables</a></span><span class="op">)</span></span></code></pre></div>
<p>The data we use is the following, created with random number
generators:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">add_subgroup</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/chartr.html" class="external-link">tolower</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span>, <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span>, <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></span>
<span></span>
<span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span></span>
<span>  x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">100</span><span class="op">)</span>,</span>
<span>  c1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"A"</span>, <span class="st">"B"</span>, <span class="st">"C"</span><span class="op">)</span>, <span class="fl">100</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>, levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"A"</span>, <span class="st">"B"</span>, <span class="st">"C"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  r1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"U"</span>, <span class="st">"V"</span>, <span class="st">"W"</span><span class="op">)</span>, <span class="fl">100</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>, levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"U"</span>, <span class="st">"V"</span>, <span class="st">"W"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>    c2 <span class="op">=</span> <span class="fu">add_subgroup</span><span class="op">(</span><span class="va">c1</span><span class="op">)</span>,</span>
<span>    r2 <span class="op">=</span> <span class="fu">add_subgroup</span><span class="op">(</span><span class="va">r1</span><span class="op">)</span>,</span>
<span>    y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="fl">2</span> <span class="op">*</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="va">c1</span><span class="op">)</span> <span class="op">-</span> <span class="fl">3</span> <span class="op">*</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="va">r1</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">c1</span>, <span class="va">c2</span>, <span class="va">r1</span>, <span class="va">r2</span>, <span class="va">x</span>, <span class="va">y</span><span class="op">)</span></span>
<span></span>
<span><span class="va">df</span></span></code></pre></div>
<pre><code><span><span class="co"># <span style="color: #949494;"># A tibble: 100 × 6</span></span></span>
<span><span class="co">#    c1    c2    r1    r2         x     y</span></span>
<span><span class="co">#    <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co"># <span style="color: #BCBCBC;"> 1</span> B     b2    U     u3    -<span style="color: #BB0000;">0.626</span>     1</span></span>
<span><span class="co"># <span style="color: #BCBCBC;"> 2</span> A     a3    V     v2     0.184    -<span style="color: #BB0000;">4</span></span></span>
<span><span class="co"># <span style="color: #BCBCBC;"> 3</span> B     b1    V     v2    -<span style="color: #BB0000;">0.836</span>    -<span style="color: #BB0000;">2</span></span></span>
<span><span class="co"># <span style="color: #BCBCBC;"> 4</span> B     b3    V     v2     1.60     -<span style="color: #BB0000;">2</span></span></span>
<span><span class="co"># <span style="color: #BCBCBC;"> 5</span> B     b1    U     u1     0.330     1</span></span>
<span><span class="co"># <span style="color: #BCBCBC;"> 6</span> C     c1    U     u3    -<span style="color: #BB0000;">0.820</span>     3</span></span>
<span><span class="co"># <span style="color: #BCBCBC;"> 7</span> A     a3    U     u3     0.487    -<span style="color: #BB0000;">1</span></span></span>
<span><span class="co"># <span style="color: #BCBCBC;"> 8</span> B     b1    U     u3     0.738     1</span></span>
<span><span class="co"># <span style="color: #BCBCBC;"> 9</span> C     c3    V     v2     0.576     0</span></span>
<span><span class="co"># <span style="color: #BCBCBC;">10</span> C     c3    U     u2    -<span style="color: #BB0000;">0.305</span>     3</span></span>
<span><span class="co"># <span style="color: #949494;"># ℹ 90 more rows</span></span></span></code></pre>
</div>
<div class="section level2">
<h2 id="building-a-table-row-by-row">Building A Table Row By Row<a class="anchor" aria-label="anchor" href="#building-a-table-row-by-row"></a>
</h2>
<p>Let’s look at a table that has 3 columns and 3 rows. Each row
represents a different analysis (functions <code>foo</code>,
<code>bar</code>, <code>zoo</code> that return an <code><a href="../reference/rcell.html">rcell()</a></code>
object):</p>
<pre><code>                     A         B         C
------------------------------------------------
foo_label        foo(df_A)  foo(df_B)  foo(df_C)
bar_label        bar(df_A)  bar(df_B)  bar(df_C)
zoo_label        zoo(df_A)  zoo(df_B)  zoo(df_C)</code></pre>
<p>The data passed to the analysis functions are a subset defined by the
respective column and:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df_A</span> <span class="op">&lt;-</span> <span class="va">df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">c1</span> <span class="op">==</span> <span class="st">"A"</span><span class="op">)</span></span>
<span><span class="va">df_B</span> <span class="op">&lt;-</span> <span class="va">df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">c1</span> <span class="op">==</span> <span class="st">"B"</span><span class="op">)</span></span>
<span><span class="va">df_C</span> <span class="op">&lt;-</span> <span class="va">df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">c1</span> <span class="op">==</span> <span class="st">"C"</span><span class="op">)</span></span></code></pre></div>
<p>Let’s do this on the concrete data with <code><a href="../reference/analyze.html">analyze()</a></code>:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">foo</span> <span class="op">&lt;-</span> <span class="va">prod</span></span>
<span><span class="va">bar</span> <span class="op">&lt;-</span> <span class="va">sum</span></span>
<span><span class="va">zoo</span> <span class="op">&lt;-</span> <span class="va">mean</span></span>
<span></span>
<span><span class="va">lyt</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/basic_table.html">basic_table</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/split_cols_by.html">split_cols_by</a></span><span class="op">(</span><span class="st">"c1"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/analyze.html">analyze</a></span><span class="op">(</span><span class="st">"x"</span>, <span class="kw">function</span><span class="op">(</span><span class="va">df</span><span class="op">)</span> <span class="fu">foo</span><span class="op">(</span><span class="va">df</span><span class="op">$</span><span class="va">x</span><span class="op">)</span>, var_labels <span class="op">=</span> <span class="st">"foo label"</span>, format <span class="op">=</span> <span class="st">"xx.xx"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/analyze.html">analyze</a></span><span class="op">(</span><span class="st">"x"</span>, <span class="kw">function</span><span class="op">(</span><span class="va">df</span><span class="op">)</span> <span class="fu">bar</span><span class="op">(</span><span class="va">df</span><span class="op">$</span><span class="va">x</span><span class="op">)</span>, var_labels <span class="op">=</span> <span class="st">"bar label"</span>, format <span class="op">=</span> <span class="st">"xx.xx"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/analyze.html">analyze</a></span><span class="op">(</span><span class="st">"x"</span>, <span class="kw">function</span><span class="op">(</span><span class="va">df</span><span class="op">)</span> <span class="fu">zoo</span><span class="op">(</span><span class="va">df</span><span class="op">$</span><span class="va">x</span><span class="op">)</span>, var_labels <span class="op">=</span> <span class="st">"zoo label"</span>, format <span class="op">=</span> <span class="st">"xx.xx"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">tbl</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/build_table.html">build_table</a></span><span class="op">(</span><span class="va">lyt</span>, <span class="va">df</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co"># Warning: Non-unique sibling analysis table names. Using Labels instead. Use the table_names argument to analyze to avoid this when analyzing the same variable multiple times.</span></span>
<span><span class="co">#   occured at (row) path: root</span></span></code></pre>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tbl</span></span></code></pre></div>
<pre><code><span><span class="co">#                A       B       C  </span></span>
<span><span class="co"># ——————————————————————————————————</span></span>
<span><span class="co"># foo label                         </span></span>
<span><span class="co">#   foo label   0.00   -0.00   -0.00</span></span>
<span><span class="co"># bar label                         </span></span>
<span><span class="co">#   bar label   1.87   4.37    4.64 </span></span>
<span><span class="co"># zoo label                         </span></span>
<span><span class="co">#   zoo label   0.05   0.13    0.18</span></span></code></pre>
<p>or if we wanted the <code>x</code> variable instead of the data
frame:</p>
<pre><code>                     A         B         C
------------------------------------------------
foo_label        foo(x_A)  foo(x_B)  foo(x_C)
bar_label        bar(x_A)  bar(x_B)  bar(x_C)
zoo_label        zoo(x_A)  zoo(x_B)  zoo(x_C)</code></pre>
<p>where:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x_A</span> <span class="op">&lt;-</span> <span class="va">df_A</span><span class="op">$</span><span class="va">x</span></span>
<span><span class="va">x_B</span> <span class="op">&lt;-</span> <span class="va">df_B</span><span class="op">$</span><span class="va">x</span></span>
<span><span class="va">x_C</span> <span class="op">&lt;-</span> <span class="va">df_C</span><span class="op">$</span><span class="va">x</span></span></code></pre></div>
<p>The function passed to <code>afun</code> is evaluated using argument
matching. If <code>afun</code> has an argument <code>x</code> the
analysis variable specified in <code>vars</code> in
<code><a href="../reference/analyze.html">analyze()</a></code> is passed to the function, and if
<code>afun</code> has an argument <code>df</code> then a subset of the
dataset is passed to <code>afun</code>:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">lyt2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/basic_table.html">basic_table</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/split_cols_by.html">split_cols_by</a></span><span class="op">(</span><span class="st">"c1"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/analyze.html">analyze</a></span><span class="op">(</span><span class="st">"x"</span>, <span class="va">foo</span>, var_labels <span class="op">=</span> <span class="st">"foo label"</span>, format <span class="op">=</span> <span class="st">"xx.xx"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/analyze.html">analyze</a></span><span class="op">(</span><span class="st">"x"</span>, <span class="va">bar</span>, var_labels <span class="op">=</span> <span class="st">"bar label"</span>, format <span class="op">=</span> <span class="st">"xx.xx"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/analyze.html">analyze</a></span><span class="op">(</span><span class="st">"x"</span>, <span class="va">zoo</span>, var_labels <span class="op">=</span> <span class="st">"zoo label"</span>, format <span class="op">=</span> <span class="st">"xx.xx"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">tbl2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/build_table.html">build_table</a></span><span class="op">(</span><span class="va">lyt2</span>, <span class="va">df</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co"># Warning: Non-unique sibling analysis table names. Using Labels instead. Use the table_names argument to analyze to avoid this when analyzing the same variable multiple times.</span></span>
<span><span class="co">#   occured at (row) path: root</span></span></code></pre>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tbl2</span></span></code></pre></div>
<pre><code><span><span class="co">#              A       B       C  </span></span>
<span><span class="co"># ————————————————————————————————</span></span>
<span><span class="co"># foo label                       </span></span>
<span><span class="co">#   foo       0.00   -0.00   -0.00</span></span>
<span><span class="co"># bar label                       </span></span>
<span><span class="co">#   bar       1.87   4.37    4.64 </span></span>
<span><span class="co"># zoo label                       </span></span>
<span><span class="co">#   zoo       0.05   0.13    0.18</span></span></code></pre>
<p>Note that it is also possible that a function returns multiple rows
with <code><a href="../reference/in_rows.html">in_rows()</a></code>:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">lyt3</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/basic_table.html">basic_table</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/split_cols_by.html">split_cols_by</a></span><span class="op">(</span><span class="st">"c1"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/analyze.html">analyze</a></span><span class="op">(</span><span class="st">"x"</span>, <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="fu"><a href="../reference/in_rows.html">in_rows</a></span><span class="op">(</span></span>
<span>      <span class="st">"row 1"</span> <span class="op">=</span> <span class="fu"><a href="../reference/rcell.html">rcell</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span>, format <span class="op">=</span> <span class="st">"xx.xx"</span><span class="op">)</span>,</span>
<span>      <span class="st">"row 2"</span> <span class="op">=</span> <span class="fu"><a href="../reference/rcell.html">rcell</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/sd.html" class="external-link">sd</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span>, format <span class="op">=</span> <span class="st">"xx.xxx"</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">}</span>, var_labels <span class="op">=</span> <span class="st">"foo label"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/analyze.html">analyze</a></span><span class="op">(</span><span class="st">"x"</span>, <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="fu"><a href="../reference/in_rows.html">in_rows</a></span><span class="op">(</span></span>
<span>      <span class="st">"more rows 1"</span> <span class="op">=</span>  <span class="fu"><a href="../reference/rcell.html">rcell</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/median.html" class="external-link">median</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span>, format <span class="op">=</span> <span class="st">"xx.x"</span><span class="op">)</span>,</span>
<span>      <span class="st">"even more rows 1"</span> <span class="op">=</span> <span class="fu"><a href="../reference/rcell.html">rcell</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/IQR.html" class="external-link">IQR</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span>, format <span class="op">=</span> <span class="st">"xx.xx"</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">}</span>, var_labels <span class="op">=</span> <span class="st">"bar label"</span>, format <span class="op">=</span> <span class="st">"xx.xx"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">tbl3</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/build_table.html">build_table</a></span><span class="op">(</span><span class="va">lyt3</span>, <span class="va">df</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co"># Warning: Non-unique sibling analysis table names. Using Labels instead. Use the table_names argument to analyze to avoid this when analyzing the same variable multiple times.</span></span>
<span><span class="co">#   occured at (row) path: root</span></span></code></pre>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tbl3</span></span></code></pre></div>
<pre><code><span><span class="co">#                        A       B       C  </span></span>
<span><span class="co"># ——————————————————————————————————————————</span></span>
<span><span class="co"># foo label                                 </span></span>
<span><span class="co">#   row 1              0.05    0.13    0.18 </span></span>
<span><span class="co">#   row 2              0.985   0.815   0.890</span></span>
<span><span class="co"># bar label                                 </span></span>
<span><span class="co">#   more rows 1        -0.0     0.2     0.3 </span></span>
<span><span class="co">#   even more rows 1   1.20    1.15    1.16</span></span></code></pre>
<p>This is how we recommend you specify the row names explicitly.</p>
</div>
<div class="section level2">
<h2 id="tabulation-with-row-structure">Tabulation With Row Structure<a class="anchor" aria-label="anchor" href="#tabulation-with-row-structure"></a>
</h2>
<p>Let’s say we would like to create the following table:</p>
<pre><code>            A         B         C
--------------------------------------
U        foo(df_UA)  foo(df_UB)  foo(df_UC)
V        foo(df_VA)  foo(df_VB)  foo(df_VC)
W        foo(df_WA)  foo(df_WB)  foo(df_WC)</code></pre>
<p>where <code>df_*</code> are subsets of <code>df</code> as
follows:</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df_UA</span> <span class="op">&lt;-</span> <span class="va">df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">r1</span> <span class="op">==</span> <span class="st">"U"</span>, <span class="va">c1</span> <span class="op">==</span> <span class="st">"A"</span><span class="op">)</span></span>
<span><span class="va">df_VA</span> <span class="op">&lt;-</span> <span class="va">df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">r1</span> <span class="op">==</span> <span class="st">"V"</span>, <span class="va">c1</span> <span class="op">==</span> <span class="st">"A"</span><span class="op">)</span></span>
<span><span class="va">df_WA</span> <span class="op">&lt;-</span> <span class="va">df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">r1</span> <span class="op">==</span> <span class="st">"W"</span>, <span class="va">c1</span> <span class="op">==</span> <span class="st">"A"</span><span class="op">)</span></span>
<span><span class="va">df_UB</span> <span class="op">&lt;-</span> <span class="va">df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">r1</span> <span class="op">==</span> <span class="st">"U"</span>, <span class="va">c1</span> <span class="op">==</span> <span class="st">"B"</span><span class="op">)</span></span>
<span><span class="va">df_VB</span> <span class="op">&lt;-</span> <span class="va">df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">r1</span> <span class="op">==</span> <span class="st">"V"</span>, <span class="va">c1</span> <span class="op">==</span> <span class="st">"B"</span><span class="op">)</span></span>
<span><span class="va">df_WB</span> <span class="op">&lt;-</span> <span class="va">df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">r1</span> <span class="op">==</span> <span class="st">"W"</span>, <span class="va">c1</span> <span class="op">==</span> <span class="st">"C"</span><span class="op">)</span></span>
<span><span class="va">df_UC</span> <span class="op">&lt;-</span> <span class="va">df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">r1</span> <span class="op">==</span> <span class="st">"U"</span>, <span class="va">c1</span> <span class="op">==</span> <span class="st">"C"</span><span class="op">)</span></span>
<span><span class="va">df_VC</span> <span class="op">&lt;-</span> <span class="va">df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">r1</span> <span class="op">==</span> <span class="st">"V"</span>, <span class="va">c1</span> <span class="op">==</span> <span class="st">"C"</span><span class="op">)</span></span>
<span><span class="va">df_WC</span> <span class="op">&lt;-</span> <span class="va">df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">r1</span> <span class="op">==</span> <span class="st">"W"</span>, <span class="va">c1</span> <span class="op">==</span> <span class="st">"C"</span><span class="op">)</span></span></code></pre></div>
<p>further note that <code>df_*</code> are of the same class as
<code>df</code>, i.e. <code>tibble</code>s. Hence <code>foo</code>
aggregates the subset of our data to a cell value.</p>
<p>Given a function <code>foo</code> (ignore the <code>...</code> for
now):</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">foo</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">df</span>, <span class="va">labelstr</span> <span class="op">=</span> <span class="st">""</span>, <span class="va">...</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span>, collapse <span class="op">=</span> <span class="st">" x "</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>we can start calculating the cell values individually:</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">foo</span><span class="op">(</span><span class="va">df_UA</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co"># [1] "17 x 6"</span></span></code></pre>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">foo</span><span class="op">(</span><span class="va">df_VA</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co"># [1] "9 x 6"</span></span></code></pre>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">foo</span><span class="op">(</span><span class="va">df_WA</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co"># [1] "14 x 6"</span></span></code></pre>
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">foo</span><span class="op">(</span><span class="va">df_UB</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co"># [1] "13 x 6"</span></span></code></pre>
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">foo</span><span class="op">(</span><span class="va">df_VB</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co"># [1] "15 x 6"</span></span></code></pre>
<div class="sourceCode" id="cb33"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">foo</span><span class="op">(</span><span class="va">df_WB</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co"># [1] "11 x 6"</span></span></code></pre>
<div class="sourceCode" id="cb35"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">foo</span><span class="op">(</span><span class="va">df_UC</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co"># [1] "10 x 6"</span></span></code></pre>
<div class="sourceCode" id="cb37"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">foo</span><span class="op">(</span><span class="va">df_VC</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co"># [1] "5 x 6"</span></span></code></pre>
<div class="sourceCode" id="cb39"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">foo</span><span class="op">(</span><span class="va">df_WC</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co"># [1] "11 x 6"</span></span></code></pre>
<p>Now we are still missing the table structure:</p>
<div class="sourceCode" id="cb41"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    <span class="fu">foo</span><span class="op">(</span><span class="va">df_UA</span><span class="op">)</span>,</span>
<span>    <span class="fu">foo</span><span class="op">(</span><span class="va">df_VA</span><span class="op">)</span>,</span>
<span>    <span class="fu">foo</span><span class="op">(</span><span class="va">df_WA</span><span class="op">)</span>,</span>
<span>    <span class="fu">foo</span><span class="op">(</span><span class="va">df_UB</span><span class="op">)</span>,</span>
<span>    <span class="fu">foo</span><span class="op">(</span><span class="va">df_VB</span><span class="op">)</span>,</span>
<span>    <span class="fu">foo</span><span class="op">(</span><span class="va">df_WB</span><span class="op">)</span>,</span>
<span>    <span class="fu">foo</span><span class="op">(</span><span class="va">df_UC</span><span class="op">)</span>,</span>
<span>    <span class="fu">foo</span><span class="op">(</span><span class="va">df_VC</span><span class="op">)</span>,</span>
<span>    <span class="fu">foo</span><span class="op">(</span><span class="va">df_WC</span><span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  byrow <span class="op">=</span> <span class="cn">FALSE</span>, ncol <span class="op">=</span> <span class="fl">3</span></span>
<span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">#      [,1]     [,2]     [,3]    </span></span>
<span><span class="co"># [1,] "17 x 6" "13 x 6" "10 x 6"</span></span>
<span><span class="co"># [2,] "9 x 6"  "15 x 6" "5 x 6" </span></span>
<span><span class="co"># [3,] "14 x 6" "11 x 6" "11 x 6"</span></span></code></pre>
<p>In <code>rtables</code> this type of tabulation is done with
<code>layouts</code>:</p>
<div class="sourceCode" id="cb43"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">lyt4</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/basic_table.html">basic_table</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/split_cols_by.html">split_cols_by</a></span><span class="op">(</span><span class="st">"c1"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/split_rows_by.html">split_rows_by</a></span><span class="op">(</span><span class="st">"r1"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/analyze.html">analyze</a></span><span class="op">(</span><span class="st">"x"</span>, <span class="va">foo</span><span class="op">)</span></span>
<span></span>
<span><span class="va">tbl4</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/build_table.html">build_table</a></span><span class="op">(</span><span class="va">lyt4</span>, <span class="va">df</span><span class="op">)</span></span>
<span><span class="va">tbl4</span></span></code></pre></div>
<pre><code><span><span class="co">#           A        B        C   </span></span>
<span><span class="co"># ————————————————————————————————</span></span>
<span><span class="co"># U                               </span></span>
<span><span class="co">#   foo   17 x 6   13 x 6   10 x 6</span></span>
<span><span class="co"># V                               </span></span>
<span><span class="co">#   foo   9 x 6    15 x 6   5 x 6 </span></span>
<span><span class="co"># W                               </span></span>
<span><span class="co">#   foo   14 x 6   6 x 6    11 x 6</span></span></code></pre>
<p>or if we would not want to see the <code>foo</code> label we would
have to use:</p>
<div class="sourceCode" id="cb45"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">lyt5</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/basic_table.html">basic_table</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/split_cols_by.html">split_cols_by</a></span><span class="op">(</span><span class="st">"c1"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/split_rows_by.html">split_rows_by</a></span><span class="op">(</span><span class="st">"r1"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/summarize_row_groups.html">summarize_row_groups</a></span><span class="op">(</span>cfun <span class="op">=</span> <span class="va">foo</span>, format <span class="op">=</span> <span class="st">"xx"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">tbl5</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/build_table.html">build_table</a></span><span class="op">(</span><span class="va">lyt5</span>, <span class="va">df</span><span class="op">)</span></span>
<span><span class="va">tbl5</span></span></code></pre></div>
<pre><code><span><span class="co">#      A        B        C   </span></span>
<span><span class="co"># ———————————————————————————</span></span>
<span><span class="co">#    17 x 6   13 x 6   10 x 6</span></span>
<span><span class="co">#    9 x 6    15 x 6   5 x 6 </span></span>
<span><span class="co">#    14 x 6   6 x 6    11 x 6</span></span></code></pre>
<p>but now the row labels have disappeared. This is because
<code>cfun</code> needs to define its row label. So let’s redefine
<code>foo</code>:</p>
<div class="sourceCode" id="cb47"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">foo</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">df</span>, <span class="va">labelstr</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="../reference/rcell.html">rcell</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span>, collapse <span class="op">=</span> <span class="st">" x "</span><span class="op">)</span>, format <span class="op">=</span> <span class="st">"xx"</span>, label <span class="op">=</span> <span class="va">labelstr</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="va">lyt6</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/basic_table.html">basic_table</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/split_cols_by.html">split_cols_by</a></span><span class="op">(</span><span class="st">"c1"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/split_rows_by.html">split_rows_by</a></span><span class="op">(</span><span class="st">"r1"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/summarize_row_groups.html">summarize_row_groups</a></span><span class="op">(</span>cfun <span class="op">=</span> <span class="va">foo</span><span class="op">)</span></span>
<span></span>
<span><span class="va">tbl6</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/build_table.html">build_table</a></span><span class="op">(</span><span class="va">lyt6</span>, <span class="va">df</span><span class="op">)</span></span>
<span><span class="va">tbl6</span></span></code></pre></div>
<pre><code><span><span class="co">#       A        B        C   </span></span>
<span><span class="co"># ————————————————————————————</span></span>
<span><span class="co"># U   17 x 6   13 x 6   10 x 6</span></span>
<span><span class="co"># V   9 x 6    15 x 6   5 x 6 </span></span>
<span><span class="co"># W   14 x 6   6 x 6    11 x 6</span></span></code></pre>
<div class="section level3">
<h3 id="calculating-the-mean">Calculating the Mean<a class="anchor" aria-label="anchor" href="#calculating-the-mean"></a>
</h3>
<p>Now let’s calculate the mean of <code>df$y</code> for pattern I:</p>
<div class="sourceCode" id="cb49"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">foo</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">df</span>, <span class="va">labelstr</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="../reference/rcell.html">rcell</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">df</span><span class="op">$</span><span class="va">y</span><span class="op">)</span>, label <span class="op">=</span> <span class="va">labelstr</span>, format <span class="op">=</span> <span class="st">"xx.xx"</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="va">lyt7</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/basic_table.html">basic_table</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/split_cols_by.html">split_cols_by</a></span><span class="op">(</span><span class="st">"c1"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/split_rows_by.html">split_rows_by</a></span><span class="op">(</span><span class="st">"r1"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/summarize_row_groups.html">summarize_row_groups</a></span><span class="op">(</span>cfun <span class="op">=</span> <span class="va">foo</span><span class="op">)</span> </span>
<span></span>
<span><span class="va">tbl7</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/build_table.html">build_table</a></span><span class="op">(</span><span class="va">lyt7</span>, <span class="va">df</span><span class="op">)</span></span>
<span><span class="va">tbl7</span></span></code></pre></div>
<pre><code><span><span class="co">#       A       B       C  </span></span>
<span><span class="co"># —————————————————————————</span></span>
<span><span class="co"># U   -1.00   1.00    3.00 </span></span>
<span><span class="co"># V   -4.00   -2.00   0.00 </span></span>
<span><span class="co"># W   -7.00   -5.00   -3.00</span></span></code></pre>
<p>Note that <code>foo</code> has the variable information hard-encoded
in the function body. Let’s try some alternatives returning to
<code><a href="../reference/analyze.html">analyze()</a></code>:</p>
<div class="sourceCode" id="cb51"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">lyt8</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/basic_table.html">basic_table</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/split_cols_by.html">split_cols_by</a></span><span class="op">(</span><span class="st">"c1"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/split_rows_by.html">split_rows_by</a></span><span class="op">(</span><span class="st">"r1"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/analyze.html">analyze</a></span><span class="op">(</span><span class="st">"y"</span>, afun <span class="op">=</span> <span class="va">mean</span><span class="op">)</span></span>
<span></span>
<span><span class="va">tbl8</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/build_table.html">build_table</a></span><span class="op">(</span><span class="va">lyt8</span>, <span class="va">df</span><span class="op">)</span></span>
<span><span class="va">tbl8</span></span></code></pre></div>
<pre><code><span><span class="co">#          A    B    C </span></span>
<span><span class="co"># —————————————————————</span></span>
<span><span class="co"># U                    </span></span>
<span><span class="co">#   mean   -1   1    3 </span></span>
<span><span class="co"># V                    </span></span>
<span><span class="co">#   mean   -4   -2   0 </span></span>
<span><span class="co"># W                    </span></span>
<span><span class="co">#   mean   -7   -5   -3</span></span></code></pre>
<p>Note that the subset of the <code>y</code> variable is passed as the
<code>x</code> argument to <code><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean()</a></code>. We could also get the
<code>data.frame</code> instead of the variable:</p>
<div class="sourceCode" id="cb53"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">lyt9</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/basic_table.html">basic_table</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/split_cols_by.html">split_cols_by</a></span><span class="op">(</span><span class="st">"c1"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/split_rows_by.html">split_rows_by</a></span><span class="op">(</span><span class="st">"r1"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/analyze.html">analyze</a></span><span class="op">(</span><span class="st">"y"</span>, afun <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">df</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">df</span><span class="op">$</span><span class="va">y</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">tbl9</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/build_table.html">build_table</a></span><span class="op">(</span><span class="va">lyt9</span>, <span class="va">df</span><span class="op">)</span></span>
<span><span class="va">tbl9</span></span></code></pre></div>
<pre><code><span><span class="co">#       A    B    C </span></span>
<span><span class="co"># ——————————————————</span></span>
<span><span class="co"># U                 </span></span>
<span><span class="co">#   y   -1   1    3 </span></span>
<span><span class="co"># V                 </span></span>
<span><span class="co">#   y   -4   -2   0 </span></span>
<span><span class="co"># W                 </span></span>
<span><span class="co">#   y   -7   -5   -3</span></span></code></pre>
<p>which is in contrast to:</p>
<div class="sourceCode" id="cb55"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">lyt10</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/basic_table.html">basic_table</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/split_cols_by.html">split_cols_by</a></span><span class="op">(</span><span class="st">"c1"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/split_rows_by.html">split_rows_by</a></span><span class="op">(</span><span class="st">"r1"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/analyze.html">analyze</a></span><span class="op">(</span><span class="st">"y"</span>, afun <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">)</span> </span>
<span></span>
<span><span class="va">tbl10</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/build_table.html">build_table</a></span><span class="op">(</span><span class="va">lyt10</span>, <span class="va">df</span><span class="op">)</span></span>
<span><span class="va">tbl10</span></span></code></pre></div>
<pre><code><span><span class="co">#       A    B    C </span></span>
<span><span class="co"># ——————————————————</span></span>
<span><span class="co"># U                 </span></span>
<span><span class="co">#   y   -1   1    3 </span></span>
<span><span class="co"># V                 </span></span>
<span><span class="co">#   y   -4   -2   0 </span></span>
<span><span class="co"># W                 </span></span>
<span><span class="co">#   y   -7   -5   -3</span></span></code></pre>
<p>where the function receives the subset of <code>y</code>.</p>
</div>
<div class="section level3">
<h3 id="group-summaries">Group Summaries<a class="anchor" aria-label="anchor" href="#group-summaries"></a>
</h3>
<p>Pattern I is an interesting one as we can add more row structure
(with further splits). Consider the following table:</p>
<pre><code>            A         B         C
--------------------------------------
U
  u1     foo(&lt;&gt;)  foo(&lt;&gt;)  foo(&lt;&gt;)
  u2     foo(&lt;&gt;)  foo(&lt;&gt;)  foo(&lt;&gt;)
  u3     foo(&lt;&gt;)  foo(&lt;&gt;)  foo(&lt;&gt;)
V
  v1     foo(&lt;&gt;)  foo(&lt;&gt;)  foo(&lt;&gt;)
  v2     foo(&lt;&gt;)  foo(&lt;&gt;)  foo(&lt;&gt;)
  v3     foo(&lt;&gt;)  foo(&lt;&gt;)  foo(&lt;&gt;)
W
  w1     foo(&lt;&gt;)  foo(&lt;&gt;)  foo(&lt;&gt;)
  w2     foo(&lt;&gt;)  foo(&lt;&gt;)  foo(&lt;&gt;)
  w3     foo(&lt;&gt;)  foo(&lt;&gt;)  foo(&lt;&gt;)</code></pre>
<p>where <code>&lt;&gt;</code> represents the data that is represented
by the cell. So for the cell <code>U &gt; u1, A</code> we would have the
subset:</p>
<div class="sourceCode" id="cb58"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">r1</span> <span class="op">==</span> <span class="st">"U"</span>, <span class="va">r2</span> <span class="op">==</span> <span class="st">"u1"</span>, <span class="va">c1</span> <span class="op">==</span> <span class="st">"A"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co"># <span style="color: #949494;"># A tibble: 2 × 6</span></span></span>
<span><span class="co">#   c1    c2    r1    r2        x     y</span></span>
<span><span class="co">#   <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co"># <span style="color: #BCBCBC;">1</span> A     a2    U     u1    1.12     -<span style="color: #BB0000;">1</span></span></span>
<span><span class="co"># <span style="color: #BCBCBC;">2</span> A     a1    U     u1    0.594    -<span style="color: #BB0000;">1</span></span></span></code></pre>
<p>and so on. We can get this table as follows:</p>
<div class="sourceCode" id="cb60"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">lyt11</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/basic_table.html">basic_table</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/split_cols_by.html">split_cols_by</a></span><span class="op">(</span><span class="st">"c1"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/split_rows_by.html">split_rows_by</a></span><span class="op">(</span><span class="st">"r1"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/split_rows_by.html">split_rows_by</a></span><span class="op">(</span><span class="st">"r2"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/summarize_row_groups.html">summarize_row_groups</a></span><span class="op">(</span>cfun <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">df</span>, <span class="va">labelstr</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="fu"><a href="../reference/rcell.html">rcell</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">df</span><span class="op">$</span><span class="va">x</span><span class="op">)</span>, format <span class="op">=</span> <span class="st">"xx.xx"</span>, label <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="st">"mean x for"</span>, <span class="va">labelstr</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">}</span><span class="op">)</span></span>
<span></span>
<span><span class="va">tbl11</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/build_table.html">build_table</a></span><span class="op">(</span><span class="va">lyt11</span>, <span class="va">df</span><span class="op">)</span></span>
<span><span class="va">tbl11</span></span></code></pre></div>
<pre><code><span><span class="co">#                     A       B       C  </span></span>
<span><span class="co"># ———————————————————————————————————————</span></span>
<span><span class="co"># U                                      </span></span>
<span><span class="co">#   mean x for u3   -0.04   0.36    -0.25</span></span>
<span><span class="co">#   mean x for u1   0.86    0.32     NA  </span></span>
<span><span class="co">#   mean x for u2   -0.28   0.38    0.08 </span></span>
<span><span class="co"># V                                      </span></span>
<span><span class="co">#   mean x for v2   0.01    0.55    0.60 </span></span>
<span><span class="co">#   mean x for v3   -0.03   -0.30   1.06 </span></span>
<span><span class="co">#   mean x for v1   0.56    -0.27   -0.54</span></span>
<span><span class="co"># W                                      </span></span>
<span><span class="co">#   mean x for w1   -0.58   0.42    0.67 </span></span>
<span><span class="co">#   mean x for w3   0.56    0.69    -0.39</span></span>
<span><span class="co">#   mean x for w2   -1.99   -0.10   0.53</span></span></code></pre>
<p>or, if we wanted to calculate two summaries per row split:</p>
<div class="sourceCode" id="cb62"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">s_mean_sd</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="../reference/in_rows.html">in_rows</a></span><span class="op">(</span><span class="st">"mean (sd)"</span> <span class="op">=</span> <span class="fu"><a href="../reference/rcell.html">rcell</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/stats/sd.html" class="external-link">sd</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">)</span>, format <span class="op">=</span> <span class="st">"xx.xx (xx.xx)"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="va">s_range</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="../reference/in_rows.html">in_rows</a></span><span class="op">(</span><span class="st">"range"</span> <span class="op">=</span> <span class="fu"><a href="../reference/rcell.html">rcell</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/range.html" class="external-link">range</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span>, format <span class="op">=</span> <span class="st">"xx.xx - xx.xx"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="va">lyt12</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/basic_table.html">basic_table</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/split_cols_by.html">split_cols_by</a></span><span class="op">(</span><span class="st">"c1"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/split_rows_by.html">split_rows_by</a></span><span class="op">(</span><span class="st">"r1"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/split_rows_by.html">split_rows_by</a></span><span class="op">(</span><span class="st">"r2"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/analyze.html">analyze</a></span><span class="op">(</span><span class="st">"x"</span>, <span class="va">s_mean_sd</span>, show_labels <span class="op">=</span> <span class="st">"hidden"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/analyze.html">analyze</a></span><span class="op">(</span><span class="st">"x"</span>, <span class="va">s_range</span>, show_labels <span class="op">=</span> <span class="st">"hidden"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">tbl12</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/build_table.html">build_table</a></span><span class="op">(</span><span class="va">lyt12</span>, <span class="va">df</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co"># Warning: Non-unique sibling analysis table names. Using Labels instead. Use the table_names argument to analyze to avoid this when analyzing the same variable multiple times.</span></span>
<span><span class="co">#   occured at (row) path: r1[U]-&gt;r2[u3]</span></span></code></pre>
<pre><code><span><span class="co"># Warning in min(x): no non-missing arguments to min; returning Inf</span></span></code></pre>
<pre><code><span><span class="co"># Warning in max(x): no non-missing arguments to max; returning -Inf</span></span></code></pre>
<pre><code><span><span class="co"># Warning: Non-unique sibling analysis table names. Using Labels instead. Use the table_names argument to analyze to avoid this when analyzing the same variable multiple times.</span></span>
<span><span class="co">#   occured at (row) path: r1[U]-&gt;r2[u1]</span></span></code></pre>
<pre><code><span><span class="co"># Warning: Non-unique sibling analysis table names. Using Labels instead. Use the table_names argument to analyze to avoid this when analyzing the same variable multiple times.</span></span>
<span><span class="co">#   occured at (row) path: r1[U]-&gt;r2[u2]</span></span></code></pre>
<pre><code><span><span class="co"># Warning: Non-unique sibling analysis table names. Using Labels instead. Use the table_names argument to analyze to avoid this when analyzing the same variable multiple times.</span></span>
<span><span class="co">#   occured at (row) path: r1[V]-&gt;r2[v2]</span></span></code></pre>
<pre><code><span><span class="co"># Warning: Non-unique sibling analysis table names. Using Labels instead. Use the table_names argument to analyze to avoid this when analyzing the same variable multiple times.</span></span>
<span><span class="co">#   occured at (row) path: r1[V]-&gt;r2[v3]</span></span></code></pre>
<pre><code><span><span class="co"># Warning: Non-unique sibling analysis table names. Using Labels instead. Use the table_names argument to analyze to avoid this when analyzing the same variable multiple times.</span></span>
<span><span class="co">#   occured at (row) path: r1[V]-&gt;r2[v1]</span></span></code></pre>
<pre><code><span><span class="co"># Warning: Non-unique sibling analysis table names. Using Labels instead. Use the table_names argument to analyze to avoid this when analyzing the same variable multiple times.</span></span>
<span><span class="co">#   occured at (row) path: r1[W]-&gt;r2[w1]</span></span></code></pre>
<pre><code><span><span class="co"># Warning: Non-unique sibling analysis table names. Using Labels instead. Use the table_names argument to analyze to avoid this when analyzing the same variable multiple times.</span></span>
<span><span class="co">#   occured at (row) path: r1[W]-&gt;r2[w3]</span></span></code></pre>
<pre><code><span><span class="co"># Warning: Non-unique sibling analysis table names. Using Labels instead. Use the table_names argument to analyze to avoid this when analyzing the same variable multiple times.</span></span>
<span><span class="co">#   occured at (row) path: r1[W]-&gt;r2[w2]</span></span></code></pre>
<div class="sourceCode" id="cb74"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tbl12</span></span></code></pre></div>
<pre><code><span><span class="co">#                       A              B              C      </span></span>
<span><span class="co"># ———————————————————————————————————————————————————————————</span></span>
<span><span class="co"># U                                                          </span></span>
<span><span class="co">#   u3                                                       </span></span>
<span><span class="co">#     mean (sd)   -0.04 (1.18)    0.36 (1.41)    -0.25 (0.72)</span></span>
<span><span class="co">#     range       -1.80 - 1.47    -1.28 - 2.40   -0.82 - 0.56</span></span>
<span><span class="co">#   u1                                                       </span></span>
<span><span class="co">#     mean (sd)    0.86 (0.38)    0.32 (0.51)         NA     </span></span>
<span><span class="co">#     range        0.59 - 1.12    -0.48 - 0.94    Inf - -Inf </span></span>
<span><span class="co">#   u2                                                       </span></span>
<span><span class="co">#     mean (sd)   -0.28 (0.96)    0.38 (0.67)    0.08 (0.91) </span></span>
<span><span class="co">#     range       -1.52 - 1.43    -0.39 - 0.82   -0.93 - 1.51</span></span>
<span><span class="co"># V                                                          </span></span>
<span><span class="co">#   v2                                                       </span></span>
<span><span class="co">#     mean (sd)    0.01 (0.25)    0.55 (1.14)    0.60 (0.03) </span></span>
<span><span class="co">#     range       -0.16 - 0.18    -0.84 - 1.60   0.58 - 0.62 </span></span>
<span><span class="co">#   v3                                                       </span></span>
<span><span class="co">#     mean (sd)   -0.03 (0.37)    -0.30 (0.36)    1.06 (NA)  </span></span>
<span><span class="co">#     range       -0.41 - 0.33    -0.62 - 0.03   1.06 - 1.06 </span></span>
<span><span class="co">#   v1                                                       </span></span>
<span><span class="co">#     mean (sd)    0.56 (1.10)    -0.27 (0.73)   -0.54 (1.18)</span></span>
<span><span class="co">#     range       -0.16 - 2.17    -1.22 - 0.59   -1.38 - 0.29</span></span>
<span><span class="co"># W                                                          </span></span>
<span><span class="co">#   w1                                                       </span></span>
<span><span class="co">#     mean (sd)   -0.58 (0.85)     0.42 (NA)     0.67 (0.39) </span></span>
<span><span class="co">#     range       -1.25 - 0.61    0.42 - 0.42    0.37 - 1.21 </span></span>
<span><span class="co">#   w3                                                       </span></span>
<span><span class="co">#     mean (sd)    0.56 (0.85)     0.69 (NA)     -0.39 (1.68)</span></span>
<span><span class="co">#     range       -0.71 - 1.98    0.69 - 0.69    -2.21 - 1.10</span></span>
<span><span class="co">#   w2                                                       </span></span>
<span><span class="co">#     mean (sd)    -1.99 (NA)     -0.10 (0.47)   0.53 (0.60) </span></span>
<span><span class="co">#     range       -1.99 - -1.99   -0.61 - 0.39   -0.10 - 1.16</span></span></code></pre>
<p>Which has the following structure:</p>
<pre><code>                   A              B              C
---------------------------------------------------------
U
  u1
     mean_sd  s_mean_sd(&lt;&gt;)  s_mean_sd(&lt;&gt;)  s_mean_sd(&lt;&gt;)
     range    s_range(&lt;&gt;)    s_range(&lt;&gt;)    s_range(&lt;&gt;)
  u2
     mean_sd  s_mean_sd(&lt;&gt;)  s_mean_sd(&lt;&gt;)  s_mean_sd(&lt;&gt;)
     range    s_range(&lt;&gt;)    s_range(&lt;&gt;)    s_range(&lt;&gt;)
  u3
     mean_sd  s_mean_sd(&lt;&gt;)  s_mean_sd(&lt;&gt;)  s_mean_sd(&lt;&gt;)
     range    s_range(&lt;&gt;)    s_range(&lt;&gt;)    s_range(&lt;&gt;)
V
  v1
     mean_sd  s_mean_sd(&lt;&gt;)  s_mean_sd(&lt;&gt;)  s_mean_sd(&lt;&gt;)
     range    s_range(&lt;&gt;)    s_range(&lt;&gt;)    s_range(&lt;&gt;)
  v2
     mean_sd  s_mean_sd(&lt;&gt;)  s_mean_sd(&lt;&gt;)  s_mean_sd(&lt;&gt;)
     range    s_range(&lt;&gt;)    s_range(&lt;&gt;)    s_range(&lt;&gt;)
  v3
     mean_sd  s_mean_sd(&lt;&gt;)  s_mean_sd(&lt;&gt;)  s_mean_sd(&lt;&gt;)
     range    s_range(&lt;&gt;)    s_range(&lt;&gt;)    s_range(&lt;&gt;)
W
  w1
     mean_sd  s_mean_sd(&lt;&gt;)  s_mean_sd(&lt;&gt;)  s_mean_sd(&lt;&gt;)
     range    s_range(&lt;&gt;)    s_range(&lt;&gt;)    s_range(&lt;&gt;)
  w2
     mean_sd  s_mean_sd(&lt;&gt;)  s_mean_sd(&lt;&gt;)  s_mean_sd(&lt;&gt;)
     range    s_range(&lt;&gt;)    s_range(&lt;&gt;)    s_range(&lt;&gt;)
  w3
     mean_sd  s_mean_sd(&lt;&gt;)  s_mean_sd(&lt;&gt;)  s_mean_sd(&lt;&gt;)
     range    s_range(&lt;&gt;)    s_range(&lt;&gt;)    s_range(&lt;&gt;)</code></pre>
<p>The rows <code>U</code>, <code>u1</code>, <code>u2</code>, …,
<code>W</code>, <code>w1</code>, <code>w2</code>, <code>w3</code> are
label rows and the other rows (with <code>mean_sd</code> and
<code>range</code>) are data rows. Currently we do not have content rows
in the table. Content rows summarize the data defined by their splitting
(i.e. <code>V &gt; v1, B</code>). So if we wanted to add content rows at
the <code>r2</code> split level then we would get:</p>
<pre><code>                   A              B              C
---------------------------------------------------------
U
  u1          s_cfun_2(&lt;&gt;)   s_cfun_2(&lt;&gt;)   s_cfun_2(&lt;&gt;)
     mean_sd  s_mean_sd(&lt;&gt;)  s_mean_sd(&lt;&gt;)  s_mean_sd(&lt;&gt;)
     range    s_range(&lt;&gt;)    s_range(&lt;&gt;)    s_range(&lt;&gt;)
  u2          s_cfun_2(&lt;&gt;)   s_cfun_2(&lt;&gt;)   s_cfun_2(&lt;&gt;)
     mean_sd  s_mean_sd(&lt;&gt;)  s_mean_sd(&lt;&gt;)  s_mean_sd(&lt;&gt;)
     range    s_range(&lt;&gt;)    s_range(&lt;&gt;)    s_range(&lt;&gt;)
  u3          s_cfun_2(&lt;&gt;)   s_cfun_2(&lt;&gt;)   s_cfun_2(&lt;&gt;)
     mean_sd  s_mean_sd(&lt;&gt;)  s_mean_sd(&lt;&gt;)  s_mean_sd(&lt;&gt;)
     range    s_range(&lt;&gt;)    s_range(&lt;&gt;)    s_range(&lt;&gt;)
V
  v1          s_cfun_2(&lt;&gt;)   s_cfun_2(&lt;&gt;)   s_cfun_2(&lt;&gt;)
     mean_sd  s_mean_sd(&lt;&gt;)  s_mean_sd(&lt;&gt;)  s_mean_sd(&lt;&gt;)
     range    s_range(&lt;&gt;)    s_range(&lt;&gt;)    s_range(&lt;&gt;)
  v2          s_cfun_2(&lt;&gt;)   s_cfun_2(&lt;&gt;)   s_cfun_2(&lt;&gt;)
     mean_sd  s_mean_sd(&lt;&gt;)  s_mean_sd(&lt;&gt;)  s_mean_sd(&lt;&gt;)
     range    s_range(&lt;&gt;)    s_range(&lt;&gt;)    s_range(&lt;&gt;)
  v3          s_cfun_2(&lt;&gt;)   s_cfun_2(&lt;&gt;)   s_cfun_2(&lt;&gt;)
     mean_sd  s_mean_sd(&lt;&gt;)  s_mean_sd(&lt;&gt;)  s_mean_sd(&lt;&gt;)
     range    s_range(&lt;&gt;)    s_range(&lt;&gt;)    s_range(&lt;&gt;)
W
  w1          s_cfun_2(&lt;&gt;)   s_cfun_2(&lt;&gt;)   s_cfun_2(&lt;&gt;)
     mean_sd  s_mean_sd(&lt;&gt;)  s_mean_sd(&lt;&gt;)  s_mean_sd(&lt;&gt;)
     range    s_range(&lt;&gt;)    s_range(&lt;&gt;)    s_range(&lt;&gt;)
  w2          s_cfun_2(&lt;&gt;)   s_cfun_2(&lt;&gt;)   s_cfun_2(&lt;&gt;)
     mean_sd  s_mean_sd(&lt;&gt;)  s_mean_sd(&lt;&gt;)  s_mean_sd(&lt;&gt;)
     range    s_range(&lt;&gt;)    s_range(&lt;&gt;)    s_range(&lt;&gt;)
  w3          s_cfun_2(&lt;&gt;)   s_cfun_2(&lt;&gt;)   s_cfun_2(&lt;&gt;)
     mean_sd  s_mean_sd(&lt;&gt;)  s_mean_sd(&lt;&gt;)  s_mean_sd(&lt;&gt;)
     range    s_range(&lt;&gt;)    s_range(&lt;&gt;)    s_range(&lt;&gt;)</code></pre>
<p>where <code>s_cfun_2</code> is the content function and either
returns one row via <code><a href="../reference/rcell.html">rcell()</a></code> or multiple rows via
<code><a href="../reference/in_rows.html">in_rows()</a></code>. The data represented by <code>&lt;&gt;</code>
for the content rows is same data as for it’s descendant, i.e. for the
<code>U &gt; u1, A</code> content row cell it is
<code>df %&gt;% filter(r1 == "U", r2 == "u1", c1 == "A")</code>. Note
that content functions <code>cfun</code> operate only on data frames and
not on vectors/variables so they must take the <code>df</code> argument.
Further, a <code>cfun</code> must also have the <code>labelstr</code>
argument which is the split level. This way, the <code>cfun</code> can
define its own row name. In order to get the table above we can use the
layout framework as follows:</p>
<div class="sourceCode" id="cb78"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">s_mean_sd</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="../reference/in_rows.html">in_rows</a></span><span class="op">(</span><span class="st">"mean (sd)"</span> <span class="op">=</span> <span class="fu"><a href="../reference/rcell.html">rcell</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/stats/sd.html" class="external-link">sd</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">)</span>, format <span class="op">=</span> <span class="st">"xx.xx (xx.xx)"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="va">s_range</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="../reference/in_rows.html">in_rows</a></span><span class="op">(</span><span class="st">"range"</span> <span class="op">=</span> <span class="fu"><a href="../reference/rcell.html">rcell</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/range.html" class="external-link">range</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span>, format <span class="op">=</span> <span class="st">"xx.xx - xx.xx"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="va">s_cfun_2</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">df</span>, <span class="va">labelstr</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="../reference/rcell.html">rcell</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span>, format <span class="op">=</span> <span class="st">"xx"</span>, label <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">labelstr</span>, <span class="st">"(n)"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="va">lyt13</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/basic_table.html">basic_table</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/split_cols_by.html">split_cols_by</a></span><span class="op">(</span><span class="st">"c1"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/split_rows_by.html">split_rows_by</a></span><span class="op">(</span><span class="st">"r1"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/split_rows_by.html">split_rows_by</a></span><span class="op">(</span><span class="st">"r2"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/summarize_row_groups.html">summarize_row_groups</a></span><span class="op">(</span>cfun <span class="op">=</span> <span class="va">s_cfun_2</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/analyze.html">analyze</a></span><span class="op">(</span><span class="st">"x"</span>, <span class="va">s_mean_sd</span>, show_labels <span class="op">=</span> <span class="st">"hidden"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/analyze.html">analyze</a></span><span class="op">(</span><span class="st">"x"</span>, <span class="va">s_range</span>, show_labels <span class="op">=</span> <span class="st">"hidden"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">tbl13</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/build_table.html">build_table</a></span><span class="op">(</span><span class="va">lyt13</span>, <span class="va">df</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co"># Warning: Non-unique sibling analysis table names. Using Labels instead. Use the table_names argument to analyze to avoid this when analyzing the same variable multiple times.</span></span>
<span><span class="co">#   occured at (row) path: r1[U]-&gt;r2[u3]</span></span></code></pre>
<pre><code><span><span class="co"># Warning in min(x): no non-missing arguments to min; returning Inf</span></span></code></pre>
<pre><code><span><span class="co"># Warning in max(x): no non-missing arguments to max; returning -Inf</span></span></code></pre>
<pre><code><span><span class="co"># Warning: Non-unique sibling analysis table names. Using Labels instead. Use the table_names argument to analyze to avoid this when analyzing the same variable multiple times.</span></span>
<span><span class="co">#   occured at (row) path: r1[U]-&gt;r2[u1]</span></span></code></pre>
<pre><code><span><span class="co"># Warning: Non-unique sibling analysis table names. Using Labels instead. Use the table_names argument to analyze to avoid this when analyzing the same variable multiple times.</span></span>
<span><span class="co">#   occured at (row) path: r1[U]-&gt;r2[u2]</span></span></code></pre>
<pre><code><span><span class="co"># Warning: Non-unique sibling analysis table names. Using Labels instead. Use the table_names argument to analyze to avoid this when analyzing the same variable multiple times.</span></span>
<span><span class="co">#   occured at (row) path: r1[V]-&gt;r2[v2]</span></span></code></pre>
<pre><code><span><span class="co"># Warning: Non-unique sibling analysis table names. Using Labels instead. Use the table_names argument to analyze to avoid this when analyzing the same variable multiple times.</span></span>
<span><span class="co">#   occured at (row) path: r1[V]-&gt;r2[v3]</span></span></code></pre>
<pre><code><span><span class="co"># Warning: Non-unique sibling analysis table names. Using Labels instead. Use the table_names argument to analyze to avoid this when analyzing the same variable multiple times.</span></span>
<span><span class="co">#   occured at (row) path: r1[V]-&gt;r2[v1]</span></span></code></pre>
<pre><code><span><span class="co"># Warning: Non-unique sibling analysis table names. Using Labels instead. Use the table_names argument to analyze to avoid this when analyzing the same variable multiple times.</span></span>
<span><span class="co">#   occured at (row) path: r1[W]-&gt;r2[w1]</span></span></code></pre>
<pre><code><span><span class="co"># Warning: Non-unique sibling analysis table names. Using Labels instead. Use the table_names argument to analyze to avoid this when analyzing the same variable multiple times.</span></span>
<span><span class="co">#   occured at (row) path: r1[W]-&gt;r2[w3]</span></span></code></pre>
<pre><code><span><span class="co"># Warning: Non-unique sibling analysis table names. Using Labels instead. Use the table_names argument to analyze to avoid this when analyzing the same variable multiple times.</span></span>
<span><span class="co">#   occured at (row) path: r1[W]-&gt;r2[w2]</span></span></code></pre>
<div class="sourceCode" id="cb90"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tbl13</span></span></code></pre></div>
<pre><code><span><span class="co">#                       A              B              C      </span></span>
<span><span class="co"># ———————————————————————————————————————————————————————————</span></span>
<span><span class="co"># U                                                          </span></span>
<span><span class="co">#   u3 (n)              6              5              3      </span></span>
<span><span class="co">#     mean (sd)   -0.04 (1.18)    0.36 (1.41)    -0.25 (0.72)</span></span>
<span><span class="co">#     range       -1.80 - 1.47    -1.28 - 2.40   -0.82 - 0.56</span></span>
<span><span class="co">#   u1 (n)              2              5              0      </span></span>
<span><span class="co">#     mean (sd)    0.86 (0.38)    0.32 (0.51)         NA     </span></span>
<span><span class="co">#     range        0.59 - 1.12    -0.48 - 0.94    Inf - -Inf </span></span>
<span><span class="co">#   u2 (n)              9              3              7      </span></span>
<span><span class="co">#     mean (sd)   -0.28 (0.96)    0.38 (0.67)    0.08 (0.91) </span></span>
<span><span class="co">#     range       -1.52 - 1.43    -0.39 - 0.82   -0.93 - 1.51</span></span>
<span><span class="co"># V                                                          </span></span>
<span><span class="co">#   v2 (n)              2              4              2      </span></span>
<span><span class="co">#     mean (sd)    0.01 (0.25)    0.55 (1.14)    0.60 (0.03) </span></span>
<span><span class="co">#     range       -0.16 - 0.18    -0.84 - 1.60   0.58 - 0.62 </span></span>
<span><span class="co">#   v3 (n)              3              4              1      </span></span>
<span><span class="co">#     mean (sd)   -0.03 (0.37)    -0.30 (0.36)    1.06 (NA)  </span></span>
<span><span class="co">#     range       -0.41 - 0.33    -0.62 - 0.03   1.06 - 1.06 </span></span>
<span><span class="co">#   v1 (n)              4              7              2      </span></span>
<span><span class="co">#     mean (sd)    0.56 (1.10)    -0.27 (0.73)   -0.54 (1.18)</span></span>
<span><span class="co">#     range       -0.16 - 2.17    -1.22 - 0.59   -1.38 - 0.29</span></span>
<span><span class="co"># W                                                          </span></span>
<span><span class="co">#   w1 (n)              4              1              4      </span></span>
<span><span class="co">#     mean (sd)   -0.58 (0.85)     0.42 (NA)     0.67 (0.39) </span></span>
<span><span class="co">#     range       -1.25 - 0.61    0.42 - 0.42    0.37 - 1.21 </span></span>
<span><span class="co">#   w3 (n)              9              1              3      </span></span>
<span><span class="co">#     mean (sd)    0.56 (0.85)     0.69 (NA)     -0.39 (1.68)</span></span>
<span><span class="co">#     range       -0.71 - 1.98    0.69 - 0.69    -2.21 - 1.10</span></span>
<span><span class="co">#   w2 (n)              1              4              4      </span></span>
<span><span class="co">#     mean (sd)    -1.99 (NA)     -0.10 (0.47)   0.53 (0.60) </span></span>
<span><span class="co">#     range       -1.99 - -1.99   -0.61 - 0.39   -0.10 - 1.16</span></span></code></pre>
<p>In the same manner, if we want content rows for the <code>r1</code>
split we can do it at as follows:</p>
<div class="sourceCode" id="cb92"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">lyt14</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/basic_table.html">basic_table</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/split_cols_by.html">split_cols_by</a></span><span class="op">(</span><span class="st">"c1"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/split_rows_by.html">split_rows_by</a></span><span class="op">(</span><span class="st">"r1"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/summarize_row_groups.html">summarize_row_groups</a></span><span class="op">(</span>cfun <span class="op">=</span> <span class="va">s_cfun_2</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/split_rows_by.html">split_rows_by</a></span><span class="op">(</span><span class="st">"r2"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/summarize_row_groups.html">summarize_row_groups</a></span><span class="op">(</span>cfun <span class="op">=</span> <span class="va">s_cfun_2</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/analyze.html">analyze</a></span><span class="op">(</span><span class="st">"x"</span>, <span class="va">s_mean_sd</span>, show_labels <span class="op">=</span> <span class="st">"hidden"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/analyze.html">analyze</a></span><span class="op">(</span><span class="st">"x"</span>, <span class="va">s_range</span>, show_labels <span class="op">=</span> <span class="st">"hidden"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">tbl14</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/build_table.html">build_table</a></span><span class="op">(</span><span class="va">lyt14</span>, <span class="va">df</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co"># Warning: Non-unique sibling analysis table names. Using Labels instead. Use the table_names argument to analyze to avoid this when analyzing the same variable multiple times.</span></span>
<span><span class="co">#   occured at (row) path: r1[U]-&gt;r2[u3]</span></span></code></pre>
<pre><code><span><span class="co"># Warning in min(x): no non-missing arguments to min; returning Inf</span></span></code></pre>
<pre><code><span><span class="co"># Warning in max(x): no non-missing arguments to max; returning -Inf</span></span></code></pre>
<pre><code><span><span class="co"># Warning: Non-unique sibling analysis table names. Using Labels instead. Use the table_names argument to analyze to avoid this when analyzing the same variable multiple times.</span></span>
<span><span class="co">#   occured at (row) path: r1[U]-&gt;r2[u1]</span></span></code></pre>
<pre><code><span><span class="co"># Warning: Non-unique sibling analysis table names. Using Labels instead. Use the table_names argument to analyze to avoid this when analyzing the same variable multiple times.</span></span>
<span><span class="co">#   occured at (row) path: r1[U]-&gt;r2[u2]</span></span></code></pre>
<pre><code><span><span class="co"># Warning: Non-unique sibling analysis table names. Using Labels instead. Use the table_names argument to analyze to avoid this when analyzing the same variable multiple times.</span></span>
<span><span class="co">#   occured at (row) path: r1[V]-&gt;r2[v2]</span></span></code></pre>
<pre><code><span><span class="co"># Warning: Non-unique sibling analysis table names. Using Labels instead. Use the table_names argument to analyze to avoid this when analyzing the same variable multiple times.</span></span>
<span><span class="co">#   occured at (row) path: r1[V]-&gt;r2[v3]</span></span></code></pre>
<pre><code><span><span class="co"># Warning: Non-unique sibling analysis table names. Using Labels instead. Use the table_names argument to analyze to avoid this when analyzing the same variable multiple times.</span></span>
<span><span class="co">#   occured at (row) path: r1[V]-&gt;r2[v1]</span></span></code></pre>
<pre><code><span><span class="co"># Warning: Non-unique sibling analysis table names. Using Labels instead. Use the table_names argument to analyze to avoid this when analyzing the same variable multiple times.</span></span>
<span><span class="co">#   occured at (row) path: r1[W]-&gt;r2[w1]</span></span></code></pre>
<pre><code><span><span class="co"># Warning: Non-unique sibling analysis table names. Using Labels instead. Use the table_names argument to analyze to avoid this when analyzing the same variable multiple times.</span></span>
<span><span class="co">#   occured at (row) path: r1[W]-&gt;r2[w3]</span></span></code></pre>
<pre><code><span><span class="co"># Warning: Non-unique sibling analysis table names. Using Labels instead. Use the table_names argument to analyze to avoid this when analyzing the same variable multiple times.</span></span>
<span><span class="co">#   occured at (row) path: r1[W]-&gt;r2[w2]</span></span></code></pre>
<div class="sourceCode" id="cb104"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tbl14</span></span></code></pre></div>
<pre><code><span><span class="co">#                       A              B              C      </span></span>
<span><span class="co"># ———————————————————————————————————————————————————————————</span></span>
<span><span class="co"># U (n)                17              13             10     </span></span>
<span><span class="co">#   u3 (n)              6              5              3      </span></span>
<span><span class="co">#     mean (sd)   -0.04 (1.18)    0.36 (1.41)    -0.25 (0.72)</span></span>
<span><span class="co">#     range       -1.80 - 1.47    -1.28 - 2.40   -0.82 - 0.56</span></span>
<span><span class="co">#   u1 (n)              2              5              0      </span></span>
<span><span class="co">#     mean (sd)    0.86 (0.38)    0.32 (0.51)         NA     </span></span>
<span><span class="co">#     range        0.59 - 1.12    -0.48 - 0.94    Inf - -Inf </span></span>
<span><span class="co">#   u2 (n)              9              3              7      </span></span>
<span><span class="co">#     mean (sd)   -0.28 (0.96)    0.38 (0.67)    0.08 (0.91) </span></span>
<span><span class="co">#     range       -1.52 - 1.43    -0.39 - 0.82   -0.93 - 1.51</span></span>
<span><span class="co"># V (n)                 9              15             5      </span></span>
<span><span class="co">#   v2 (n)              2              4              2      </span></span>
<span><span class="co">#     mean (sd)    0.01 (0.25)    0.55 (1.14)    0.60 (0.03) </span></span>
<span><span class="co">#     range       -0.16 - 0.18    -0.84 - 1.60   0.58 - 0.62 </span></span>
<span><span class="co">#   v3 (n)              3              4              1      </span></span>
<span><span class="co">#     mean (sd)   -0.03 (0.37)    -0.30 (0.36)    1.06 (NA)  </span></span>
<span><span class="co">#     range       -0.41 - 0.33    -0.62 - 0.03   1.06 - 1.06 </span></span>
<span><span class="co">#   v1 (n)              4              7              2      </span></span>
<span><span class="co">#     mean (sd)    0.56 (1.10)    -0.27 (0.73)   -0.54 (1.18)</span></span>
<span><span class="co">#     range       -0.16 - 2.17    -1.22 - 0.59   -1.38 - 0.29</span></span>
<span><span class="co"># W (n)                14              6              11     </span></span>
<span><span class="co">#   w1 (n)              4              1              4      </span></span>
<span><span class="co">#     mean (sd)   -0.58 (0.85)     0.42 (NA)     0.67 (0.39) </span></span>
<span><span class="co">#     range       -1.25 - 0.61    0.42 - 0.42    0.37 - 1.21 </span></span>
<span><span class="co">#   w3 (n)              9              1              3      </span></span>
<span><span class="co">#     mean (sd)    0.56 (0.85)     0.69 (NA)     -0.39 (1.68)</span></span>
<span><span class="co">#     range       -0.71 - 1.98    0.69 - 0.69    -2.21 - 1.10</span></span>
<span><span class="co">#   w2 (n)              1              4              4      </span></span>
<span><span class="co">#     mean (sd)    -1.99 (NA)     -0.10 (0.47)   0.53 (0.60) </span></span>
<span><span class="co">#     range       -1.99 - -1.99   -0.61 - 0.39   -0.10 - 1.16</span></span></code></pre>
<p>In pagination, content rows and label rows get repeated if a page is
split in a descendant of a content row. So, for example, if we were to
split the following table at <code>***</code>:</p>
<pre><code>                   A              B              C
---------------------------------------------------------
U
  u1 (n)      s_cfun_2(&lt;&gt;)   s_cfun_2(&lt;&gt;)   s_cfun_2(&lt;&gt;)
     mean_sd  s_mean_sd(&lt;&gt;)  s_mean_sd(&lt;&gt;)  s_mean_sd(&lt;&gt;)
***
     range    s_range(&lt;&gt;)    s_range(&lt;&gt;)    s_range(&lt;&gt;)
  u2 (n)      s_cfun_2(&lt;&gt;)   s_cfun_2(&lt;&gt;)   s_cfun_2(&lt;&gt;)
     mean_sd  s_mean_sd(&lt;&gt;)  s_mean_sd(&lt;&gt;)  s_mean_sd(&lt;&gt;)
     range    s_range(&lt;&gt;)    s_range(&lt;&gt;)    s_range(&lt;&gt;)</code></pre>
<p>Then we would get the following two tables:</p>
<pre><code>                   A              B              C
---------------------------------------------------------
U
  u1 (n)      s_cfun_2(&lt;&gt;)   s_cfun_2(&lt;&gt;)   s_cfun_2(&lt;&gt;)
     mean_sd  s_mean_sd(&lt;&gt;)  s_mean_sd(&lt;&gt;)  s_mean_sd(&lt;&gt;)</code></pre>
<p>and</p>
<pre><code>                   A              B              C
---------------------------------------------------------
U
  u1 (n)      s_cfun_2(&lt;&gt;)   s_cfun_2(&lt;&gt;)   s_cfun_2(&lt;&gt;)
     range    s_range(&lt;&gt;)    s_range(&lt;&gt;)    s_range(&lt;&gt;)
  u2 (n)      s_cfun_2(&lt;&gt;)   s_cfun_2(&lt;&gt;)   s_cfun_2(&lt;&gt;)
     mean_sd  s_mean_sd(&lt;&gt;)  s_mean_sd(&lt;&gt;)  s_mean_sd(&lt;&gt;)
     range    s_range(&lt;&gt;)    s_range(&lt;&gt;)    s_range(&lt;&gt;)</code></pre>
</div>
<div class="section level3">
<h3 id="pattern-iii">Pattern III<a class="anchor" aria-label="anchor" href="#pattern-iii"></a>
</h3>
<p>Let’s consider the following tabulation pattern:</p>
<pre><code>                     A         B         C
------------------------------------------------
label 1        foo(x_A)  bar(x_B)  zoo(x_C)
label 2        foo(x_A)  bar(x_B)  zoo(x_C)
label 3        foo(x_A)  bar(x_B)  zoo(x_C)</code></pre>
<p>We will discuss that in a future release of <code>rtables</code>.</p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="nest">
  <p>rtables is a part of the <strong>NEST</strong> and <a href="https://pharmaverse.org/" class="external-link"><strong>pharmaverse</strong></a>.</p>
</div>
<script type="text/javascript" src="../analytics.js"></script></footer>
</div>





  </body>
</html>
