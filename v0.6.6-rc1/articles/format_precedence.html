<!DOCTYPE html>
<!-- Generated by pkgdown + https://github.com/insightsengineering/r-pkgdown-multiversion -->
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="rtables">
<title>Format Precedence and NA Handling • rtables</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Format Precedence and NA Handling">
<meta property="og:description" content="rtables">
<meta property="og:image" content="https://insightsengineering.github.io/rtables/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><link rel="stylesheet" href="../consent.css">
<script src="../consent.js" type="text/javascript" charset="utf-8"></script>
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">rtables</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.6.6</small>

    <div style="width: 140px; margin-left: 0.5rem;"> <small class="nav-text text-muted me-auto">part of</small> <img src="https://github.com/insightsengineering/hex-stickers/blob/main/PNG/nest.png?raw=true" alt="NEST" style="height: 30px;"><a href="https://pharmaverse.org/" class="external-link"><img src="https://github.com/insightsengineering/hex-stickers/blob/main/PNG/pharmaverse.png?raw=true" alt="pharmaverse" style="height: 28px;"></a> </div>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <h6 class="dropdown-header" data-toc-skip>Getting Started</h6>
    <a class="dropdown-item" href="../articles/introduction.html">Introduction to {rtables}</a>
    <a class="dropdown-item" href="../articles/exploratory_analysis.html">Exploratory Analysis</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Clinical Trials</h6>
    <a class="dropdown-item" href="../articles/clinical_trials.html">Example Clinical Trials Tables</a>
    <a class="dropdown-item" href="../articles/baseline.html">Comparing Against Baselines or Control</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Table Customization</h6>
    <a class="dropdown-item" href="../articles/custom_appearance.html">Customizing Appearance</a>
    <a class="dropdown-item" href="../articles/title_footer.html">Titles, Footers, and Referential Footnotes</a>
    <a class="dropdown-item" href="../articles/sorting_pruning.html">Pruning and Sorting Tables</a>
    <div class="dropdown-divider"></div>
    <a class="dropdown-item" href="../articles/index.html">More articles...</a>
  </div>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-developer-guide">Developer Guide</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-developer-guide">
    <a class="dropdown-item" href="../articles/dev-guide/dg_split_machinery.html">Split Machinery</a>
    <a class="dropdown-item" href="../articles/dev-guide/dg_tabulation.html">Tabulation</a>
    <a class="dropdown-item" href="../articles/dev-guide/dg_table_hierarchy.html">Table Hierarchy</a>
    <a class="dropdown-item" href="../articles/dev-guide/dg_debug_rtables.html">Debugging in {rtables} and Beyond</a>
    <a class="dropdown-item" href="../articles/dev-guide/dg_notes.html">Sparse Notes on {rtables} Internals</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>

<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-reports">Reports</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-reports">
    <a class="dropdown-item" href="../coverage-report/">Coverage report</a>
    <a class="dropdown-item" href="../unit-test-report/">Unit test report</a>
  </div>
</li>
      <li class="nav-item dropdown">
    <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-versions">Versions</a>
    <div class="dropdown-menu" aria-labelledby="dropdown-versions">
    <a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/rtables/release-candidate">release-candidate</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/rtables/main">main</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/rtables/latest-release">latest-release</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/rtables/v0.6.13">v0.6.13</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/rtables/v0.6.13-rc2">v0.6.13-rc2</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/rtables/v0.6.13-rc1">v0.6.13-rc1</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/rtables/v0.6.12">v0.6.12</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/rtables/v0.6.12-rc2">v0.6.12-rc2</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/rtables/v0.6.12-rc1">v0.6.12-rc1</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/rtables/v0.6.11">v0.6.11</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/rtables/v0.6.10">v0.6.10</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/rtables/v0.6.9">v0.6.9</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/rtables/v0.6.8">v0.6.8</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/rtables/v0.6.7">v0.6.7</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/rtables/v0.6.6">v0.6.6</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/rtables/v0.6.6-rc1">v0.6.6-rc1</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/rtables/v0.6.5">v0.6.5</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/rtables/v0.6.4">v0.6.4</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/rtables/v0.6.3">v0.6.3</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/rtables/v0.6.2">v0.6.2</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/rtables/v0.6.1">v0.6.1</a>
</div>
</li>
</ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/insightsengineering/rtables">
    <span class="fa fa-github fa-lg"></span>

  </a>
</li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Format Precedence and NA Handling</h1>
                        <h4 data-toc-skip class="author">Wojciech
Wójciak and Gabriel Becker</h4>

            <h4 data-toc-skip class="date">2023-12-07</h4>

      <small class="dont-index">Source: <a href="https://github.com/insightsengineering/rtables/blob/main/vignettes/format_precedence.Rmd" class="external-link"><code>vignettes/format_precedence.Rmd</code></a></small>
      <div class="d-none name"><code>format_precedence.Rmd</code></div>
    </div>



<style type="text/css">
.reveal .r code {
  white-space: pre;
}
</style>
<div class="section level2">
<h2 id="formats-precedence">Formats Precedence<a class="anchor" aria-label="anchor" href="#formats-precedence"></a>
</h2>
<p>Users of the <code>rtables</code> package can specify the format in
which the numbers in the reporting tables are printed. Formatting
functionality is provided by the <a href="https://insightsengineering.github.io/formatters/" class="external-link"><code>formatters</code></a>
R package. See <code><a href="https://rdrr.io/pkg/formatters/man/list_formats.html" class="external-link">formatters::list_valid_format_labels()</a></code> for a
list of all available formats. The format can be specified by the user
in a few different places. It may happen that, for a single table
layout, the format is specified in more than one place. In such a case,
the final format that will be applied depends on format precedence rules
defined by <code>rtables</code>. In this vignette, we describe the basic
rules of <code>rtables</code> format precedence.</p>
<p>The examples shown in this vignette utilize the example
<code>ADSL</code> dataset, a demographic table that summarizes the
variables content for different population subsets (encoded in the
columns).</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/insightsengineering/rtables" class="external-link">rtables</a></span><span class="op">)</span></span>
<span><span class="va">ADSL</span> <span class="op">&lt;-</span> <span class="va">ex_adsl</span></span></code></pre></div>
<p>Note that all <code>ex_*</code> data which is currently attached to
the <code>rtables</code> package is provided by the <a href="https://insightsengineering.github.io/formatters/" class="external-link"><code>formatters</code></a>
package and was created using the publicly available <a href="https://insightsengineering.github.io/random.cdisc.data/" class="external-link"><code>random.cdisc.data</code></a>
R package.</p>
<div class="section level3">
<h3 id="format-precedence-and-inheritance-rules">Format Precedence and Inheritance Rules<a class="anchor" aria-label="anchor" href="#format-precedence-and-inheritance-rules"></a>
</h3>
<p>The format in which numbers are printed can be specified by the user
in a few different places. In the context of precedence, it is important
which level of the split hierarchy formats are specified at. In general,
there are two such levels: the <strong>cell</strong> level and the
so-called <strong>parent table</strong> level. The concept of the cell
and the parent table results from the way in which the
<code>rtables</code> package stores resulting tables. It models the
resulting tables as hierarchical, tree-like objects with the cells (as
leaves) containing multiple values. Particularly noteworthy in this
context is the fact that the actual table splitting occurs in a
row-dominant way (even if column splitting is present in the layout).
<code>rtables</code> provides user-end function
<code><a href="../reference/table_structure.html">table_structure()</a></code> that prints the structure of a given
table object.</p>
<p>For a simple illustration, consider the following example:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">lyt</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/basic_table.html">basic_table</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/split_cols_by.html">split_cols_by</a></span><span class="op">(</span><span class="st">"ARM"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/split_rows_by.html">split_rows_by</a></span><span class="op">(</span><span class="st">"SEX"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/analyze.html">analyze</a></span><span class="op">(</span>vars <span class="op">=</span> <span class="st">"AGE"</span>, afun <span class="op">=</span> <span class="va">mean</span><span class="op">)</span></span>
<span></span>
<span><span class="va">adsl_analyzed</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/build_table.html">build_table</a></span><span class="op">(</span><span class="va">lyt</span>, <span class="va">ADSL</span><span class="op">)</span></span>
<span><span class="va">adsl_analyzed</span></span></code></pre></div>
<pre><code><span><span class="co">#                       A: Drug X          B: Placebo       C: Combination </span></span>
<span><span class="co"># —————————————————————————————————————————————————————————————————————————</span></span>
<span><span class="co"># F                                                                        </span></span>
<span><span class="co">#   mean             32.7594936708861   34.1168831168831   35.1969696969697</span></span>
<span><span class="co"># M                                                                        </span></span>
<span><span class="co">#   mean             35.5686274509804   37.4363636363636   35.3833333333333</span></span>
<span><span class="co"># U                                                                        </span></span>
<span><span class="co">#   mean             31.6666666666667          31               35.25      </span></span>
<span><span class="co"># UNDIFFERENTIATED                                                         </span></span>
<span><span class="co">#   mean                    28                 NA                 45</span></span></code></pre>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/table_structure.html">table_structure</a></span><span class="op">(</span><span class="va">adsl_analyzed</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co"># [TableTree] SEX</span></span>
<span><span class="co">#  [TableTree] F</span></span>
<span><span class="co">#   [ElementaryTable] AGE (1 x 3)</span></span>
<span><span class="co">#  [TableTree] M</span></span>
<span><span class="co">#   [ElementaryTable] AGE (1 x 3)</span></span>
<span><span class="co">#  [TableTree] U</span></span>
<span><span class="co">#   [ElementaryTable] AGE (1 x 3)</span></span>
<span><span class="co">#  [TableTree] UNDIFFERENTIATED</span></span>
<span><span class="co">#   [ElementaryTable] AGE (1 x 3)</span></span></code></pre>
<p>In this table, there are 4 sub-tables under the <code>SEX</code>
table. These are: <code>F</code>, <code>M</code>, <code>U</code>, and
<code>UNDIFFERENTIATED</code>. Each of these sub-tables has one
sub-table <code>AGE</code>. For example, for the first <code>AGE</code>
sub-table, its parent table is <code>F</code>.</p>
<p>The concept of hierarchical, tree-like representations of resulting
tables translates directly to format precedence and inheritance rules.
As a general principle, the format being finally applied for the cell is
the one that is the most specific, that is, the one which is the closest
to the cell in a given path in the tree. Hence, the
precedence-inheritance chain looks like the following:</p>
<pre><code><span><span class="va">parent_table</span> <span class="op">-&gt;</span> <span class="va">parent_table</span> <span class="op">-&gt;</span> <span class="va">...</span> <span class="op">-&gt;</span> <span class="va">parent_table</span> <span class="op">-&gt;</span> <span class="va">cell</span></span></code></pre>
<p>In such a chain, the outermost <code>parent_table</code> is the least
specific place to specify the format, while the <code>cell</code> is the
most specific one. In cases where the format is specified by the user in
more than one place, the one which is most specific will be applied in
the cell. If no specific format has been selected by the user for the
split, then the default format will be applied. The default format is
<code>"xx"</code> and it yields the same formatting as the
<code><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character()</a></code> function. In the following sections of this
vignette, we will illustrate the format precedence rules with a few
examples.</p>
</div>
<div class="section level3">
<h3 id="standard-format">Standard Format<a class="anchor" aria-label="anchor" href="#standard-format"></a>
</h3>
<p>Below is a simple layout that does not explicitly set a format for
the output of the analysis function. In such a case, the default format
is applied.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">lyt0</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/basic_table.html">basic_table</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/split_cols_by.html">split_cols_by</a></span><span class="op">(</span><span class="st">"ARM"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/analyze.html">analyze</a></span><span class="op">(</span>vars <span class="op">=</span> <span class="st">"AGE"</span>, afun <span class="op">=</span> <span class="va">mean</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/build_table.html">build_table</a></span><span class="op">(</span><span class="va">lyt0</span>, <span class="va">ADSL</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">#           A: Drug X          B: Placebo       C: Combination </span></span>
<span><span class="co"># —————————————————————————————————————————————————————————————</span></span>
<span><span class="co"># mean   33.7686567164179   35.4328358208955   35.4318181818182</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="cell-format">Cell Format<a class="anchor" aria-label="anchor" href="#cell-format"></a>
</h3>
<p>The format of a cell can be explicitly specified via the
<code><a href="../reference/rcell.html">rcell()</a></code> or <code><a href="../reference/in_rows.html">in_rows()</a></code> functions. The former is
essentially a collection of data objects while the latter is a
collection of <code><a href="../reference/rcell.html">rcell()</a></code> objects. As previously mentioned,
this is the most specific place where the format can be specified by the
user.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">lyt1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/basic_table.html">basic_table</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/split_cols_by.html">split_cols_by</a></span><span class="op">(</span><span class="st">"ARM"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/analyze.html">analyze</a></span><span class="op">(</span>vars <span class="op">=</span> <span class="st">"AGE"</span>, afun <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="fu"><a href="../reference/rcell.html">rcell</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span>, format <span class="op">=</span> <span class="st">"xx.xx"</span>, label <span class="op">=</span> <span class="st">"Mean"</span><span class="op">)</span></span>
<span>  <span class="op">}</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/build_table.html">build_table</a></span><span class="op">(</span><span class="va">lyt1</span>, <span class="va">ADSL</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">#        A: Drug X   B: Placebo   C: Combination</span></span>
<span><span class="co"># ——————————————————————————————————————————————</span></span>
<span><span class="co"># Mean     33.77       35.43          35.43</span></span></code></pre>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">lyt1a</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/basic_table.html">basic_table</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/split_cols_by.html">split_cols_by</a></span><span class="op">(</span><span class="st">"ARM"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/analyze.html">analyze</a></span><span class="op">(</span>vars <span class="op">=</span> <span class="st">"AGE"</span>, afun <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="fu"><a href="../reference/in_rows.html">in_rows</a></span><span class="op">(</span></span>
<span>      <span class="st">"Mean"</span> <span class="op">=</span> <span class="fu"><a href="../reference/rcell.html">rcell</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">)</span>,</span>
<span>      .formats <span class="op">=</span> <span class="st">"xx.xx"</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">}</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/build_table.html">build_table</a></span><span class="op">(</span><span class="va">lyt1a</span>, <span class="va">ADSL</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">#        A: Drug X   B: Placebo   C: Combination</span></span>
<span><span class="co"># ——————————————————————————————————————————————</span></span>
<span><span class="co"># Mean     33.77       35.43          35.43</span></span></code></pre>
<p>If the format is specified in both of these places at the same time,
the one specified via <code><a href="../reference/in_rows.html">in_rows()</a></code> takes highest precedence.
Technically, in this case, the format defined in <code><a href="../reference/rcell.html">rcell()</a></code>
will simply be overwritten by the one defined in <code><a href="../reference/in_rows.html">in_rows()</a></code>.
This is because the format specified in <code><a href="../reference/in_rows.html">in_rows()</a></code> is
applied to the cells not the rows (overriding the previously specified
cell-specific values), which indicates that the precedence rules
described above are still in place.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">lyt2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/basic_table.html">basic_table</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/split_cols_by.html">split_cols_by</a></span><span class="op">(</span><span class="st">"ARM"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/analyze.html">analyze</a></span><span class="op">(</span>vars <span class="op">=</span> <span class="st">"AGE"</span>, afun <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="fu"><a href="../reference/in_rows.html">in_rows</a></span><span class="op">(</span></span>
<span>      <span class="st">"Mean"</span> <span class="op">=</span> <span class="fu"><a href="../reference/rcell.html">rcell</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span>, format <span class="op">=</span> <span class="st">"xx.xxx"</span><span class="op">)</span>,</span>
<span>      .formats <span class="op">=</span> <span class="st">"xx.xx"</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">}</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/build_table.html">build_table</a></span><span class="op">(</span><span class="va">lyt2</span>, <span class="va">ADSL</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">#        A: Drug X   B: Placebo   C: Combination</span></span>
<span><span class="co"># ——————————————————————————————————————————————</span></span>
<span><span class="co"># Mean     33.77       35.43          35.43</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="parent-table-format-and-inheritance">Parent Table Format and Inheritance<a class="anchor" aria-label="anchor" href="#parent-table-format-and-inheritance"></a>
</h3>
<p>In addition to the cell level, the format can be specified at the
parent table level. If no format has been set by the user for a cell,
the most specific format for that cell is the one defined at its
innermost parent table split (if any).</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">lyt3</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/basic_table.html">basic_table</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/split_cols_by.html">split_cols_by</a></span><span class="op">(</span><span class="st">"ARM"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/analyze.html">analyze</a></span><span class="op">(</span>vars <span class="op">=</span> <span class="st">"AGE"</span>, <span class="va">mean</span>, format <span class="op">=</span> <span class="st">"xx.x"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/build_table.html">build_table</a></span><span class="op">(</span><span class="va">lyt3</span>, <span class="va">ADSL</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">#        A: Drug X   B: Placebo   C: Combination</span></span>
<span><span class="co"># ——————————————————————————————————————————————</span></span>
<span><span class="co"># mean     33.8         35.4           35.4</span></span></code></pre>
<p>If the cell format is also specified for a cell, then the parent
table format is ignored for this cell since the cell format is more
specific and therefore takes precedence.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">lyt4</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/basic_table.html">basic_table</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/split_cols_by.html">split_cols_by</a></span><span class="op">(</span><span class="st">"ARM"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/analyze.html">analyze</a></span><span class="op">(</span></span>
<span>    vars <span class="op">=</span> <span class="st">"AGE"</span>, afun <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span></span>
<span>      <span class="fu"><a href="../reference/rcell.html">rcell</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span>, format <span class="op">=</span> <span class="st">"xx.xx"</span>, label <span class="op">=</span> <span class="st">"Mean"</span><span class="op">)</span></span>
<span>    <span class="op">}</span>,</span>
<span>    format <span class="op">=</span> <span class="st">"xx.x"</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/build_table.html">build_table</a></span><span class="op">(</span><span class="va">lyt4</span>, <span class="va">ADSL</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">#        A: Drug X   B: Placebo   C: Combination</span></span>
<span><span class="co"># ——————————————————————————————————————————————</span></span>
<span><span class="co"># Mean     33.77       35.43          35.43</span></span></code></pre>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">lyt4a</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/basic_table.html">basic_table</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/split_cols_by.html">split_cols_by</a></span><span class="op">(</span><span class="st">"ARM"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/analyze.html">analyze</a></span><span class="op">(</span></span>
<span>    vars <span class="op">=</span> <span class="st">"AGE"</span>, afun <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span></span>
<span>      <span class="fu"><a href="../reference/in_rows.html">in_rows</a></span><span class="op">(</span></span>
<span>        <span class="st">"Mean"</span> <span class="op">=</span> <span class="fu"><a href="../reference/rcell.html">rcell</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">)</span>,</span>
<span>        <span class="st">"SD"</span> <span class="op">=</span> <span class="fu"><a href="../reference/rcell.html">rcell</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/sd.html" class="external-link">sd</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">)</span>,</span>
<span>        .formats <span class="op">=</span> <span class="st">"xx.xx"</span></span>
<span>      <span class="op">)</span></span>
<span>    <span class="op">}</span>,</span>
<span>    format <span class="op">=</span> <span class="st">"xx.x"</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/build_table.html">build_table</a></span><span class="op">(</span><span class="va">lyt4a</span>, <span class="va">ADSL</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">#        A: Drug X   B: Placebo   C: Combination</span></span>
<span><span class="co"># ——————————————————————————————————————————————</span></span>
<span><span class="co"># Mean     33.77       35.43          35.43     </span></span>
<span><span class="co"># SD       6.55         7.90           7.72</span></span></code></pre>
<p>In the following, slightly more complicated, example, we can observe
partial inheritance. That is, only <code>SD</code> cells inherit the
parent table’s format while the <code>Mean</code> cells do not.</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">lyt5</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/basic_table.html">basic_table</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/split_cols_by.html">split_cols_by</a></span><span class="op">(</span><span class="st">"ARM"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/analyze.html">analyze</a></span><span class="op">(</span></span>
<span>    vars <span class="op">=</span> <span class="st">"AGE"</span>, afun <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span></span>
<span>      <span class="fu"><a href="../reference/in_rows.html">in_rows</a></span><span class="op">(</span></span>
<span>        <span class="st">"Mean"</span> <span class="op">=</span> <span class="fu"><a href="../reference/rcell.html">rcell</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span>, format <span class="op">=</span> <span class="st">"xx.xx"</span><span class="op">)</span>,</span>
<span>        <span class="st">"SD"</span> <span class="op">=</span> <span class="fu"><a href="../reference/rcell.html">rcell</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/sd.html" class="external-link">sd</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">)</span></span>
<span>      <span class="op">)</span></span>
<span>    <span class="op">}</span>,</span>
<span>    format <span class="op">=</span> <span class="st">"xx.x"</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/build_table.html">build_table</a></span><span class="op">(</span><span class="va">lyt5</span>, <span class="va">ADSL</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">#        A: Drug X   B: Placebo   C: Combination</span></span>
<span><span class="co"># ——————————————————————————————————————————————</span></span>
<span><span class="co"># Mean     33.77       35.43          35.43     </span></span>
<span><span class="co"># SD        6.6         7.9            7.7</span></span></code></pre>
</div>
</div>
<div class="section level2">
<h2 id="na-handling">
<code>NA</code> Handling<a class="anchor" aria-label="anchor" href="#na-handling"></a>
</h2>
<p>Consider the following layout and the resulting table created:</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">lyt6</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/basic_table.html">basic_table</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/split_cols_by.html">split_cols_by</a></span><span class="op">(</span><span class="st">"ARM"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/split_rows_by.html">split_rows_by</a></span><span class="op">(</span><span class="st">"SEX"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/analyze.html">analyze</a></span><span class="op">(</span>vars <span class="op">=</span> <span class="st">"AGE"</span>, afun <span class="op">=</span> <span class="va">mean</span>, format <span class="op">=</span> <span class="st">"xx.xx"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/build_table.html">build_table</a></span><span class="op">(</span><span class="va">lyt6</span>, <span class="va">ADSL</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">#                    A: Drug X   B: Placebo   C: Combination</span></span>
<span><span class="co"># ——————————————————————————————————————————————————————————</span></span>
<span><span class="co"># F                                                         </span></span>
<span><span class="co">#   mean               32.76       34.12          35.20     </span></span>
<span><span class="co"># M                                                         </span></span>
<span><span class="co">#   mean               35.57       37.44          35.38     </span></span>
<span><span class="co"># U                                                         </span></span>
<span><span class="co">#   mean               31.67       31.00          35.25     </span></span>
<span><span class="co"># UNDIFFERENTIATED                                          </span></span>
<span><span class="co">#   mean               28.00         NA           45.00</span></span></code></pre>
<p>In the output the cell corresponding to the
<code>UNDIFFERENTIATED</code> level of <code>SEX</code> and the
<code>B: Placebo</code> level of <code>ARM</code> is displayed as
<code>NA</code>. This occurs because there were no non-<code>NA</code>
values under this facet that could be used to compute the mean.
<code>rtables</code> allows the user to specify a string to display when
cell values are <code>NA</code>. Similar to formats for numbers, the
user can specify a string to replace <code>NA</code> with the parameter
<code>format_na_str</code> or <code>.format_na_str</code>. This can be
specified at the cell or parent table level. <code>NA</code> string
precedence and inheritance rules are the same as those for number format
precedence, described in the previous section of this vignette. We will
illustrate this with a few examples.</p>
<div class="section level3">
<h3 id="replacing-na-values-at-the-cell-level">Replacing <code>NA</code> Values at the Cell Level<a class="anchor" aria-label="anchor" href="#replacing-na-values-at-the-cell-level"></a>
</h3>
<p>At the cell level, it is possible to replace <code>NA</code> values
with a custom string by means of the <code>format_na_str</code>
parameter in <code><a href="../reference/rcell.html">rcell()</a></code> or <code>.format_na_str</code>
parameter in <code><a href="../reference/in_rows.html">in_rows()</a></code>.</p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">lyt7</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/basic_table.html">basic_table</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/split_cols_by.html">split_cols_by</a></span><span class="op">(</span><span class="st">"ARM"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/split_rows_by.html">split_rows_by</a></span><span class="op">(</span><span class="st">"SEX"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/analyze.html">analyze</a></span><span class="op">(</span>vars <span class="op">=</span> <span class="st">"AGE"</span>, afun <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="fu"><a href="../reference/rcell.html">rcell</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span>, format <span class="op">=</span> <span class="st">"xx.xx"</span>, label <span class="op">=</span> <span class="st">"Mean"</span>, format_na_str <span class="op">=</span> <span class="st">"&lt;missing&gt;"</span><span class="op">)</span></span>
<span>  <span class="op">}</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/build_table.html">build_table</a></span><span class="op">(</span><span class="va">lyt7</span>, <span class="va">ADSL</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">#                    A: Drug X   B: Placebo   C: Combination</span></span>
<span><span class="co"># ——————————————————————————————————————————————————————————</span></span>
<span><span class="co"># F                                                         </span></span>
<span><span class="co">#   Mean               32.76       34.12          35.20     </span></span>
<span><span class="co"># M                                                         </span></span>
<span><span class="co">#   Mean               35.57       37.44          35.38     </span></span>
<span><span class="co"># U                                                         </span></span>
<span><span class="co">#   Mean               31.67       31.00          35.25     </span></span>
<span><span class="co"># UNDIFFERENTIATED                                          </span></span>
<span><span class="co">#   Mean               28.00     &lt;missing&gt;        45.00</span></span></code></pre>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">lyt7a</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/basic_table.html">basic_table</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/split_cols_by.html">split_cols_by</a></span><span class="op">(</span><span class="st">"ARM"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/split_rows_by.html">split_rows_by</a></span><span class="op">(</span><span class="st">"SEX"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/analyze.html">analyze</a></span><span class="op">(</span>vars <span class="op">=</span> <span class="st">"AGE"</span>, afun <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="fu"><a href="../reference/in_rows.html">in_rows</a></span><span class="op">(</span></span>
<span>      <span class="st">"Mean"</span> <span class="op">=</span> <span class="fu"><a href="../reference/rcell.html">rcell</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span>, format <span class="op">=</span> <span class="st">"xx.xx"</span><span class="op">)</span>,</span>
<span>      .format_na_strs <span class="op">=</span> <span class="st">"&lt;MISSING&gt;"</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">}</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/build_table.html">build_table</a></span><span class="op">(</span><span class="va">lyt7a</span>, <span class="va">ADSL</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">#                    A: Drug X   B: Placebo   C: Combination</span></span>
<span><span class="co"># ——————————————————————————————————————————————————————————</span></span>
<span><span class="co"># F                                                         </span></span>
<span><span class="co">#   Mean               32.76       34.12          35.20     </span></span>
<span><span class="co"># M                                                         </span></span>
<span><span class="co">#   Mean               35.57       37.44          35.38     </span></span>
<span><span class="co"># U                                                         </span></span>
<span><span class="co">#   Mean               31.67       31.00          35.25     </span></span>
<span><span class="co"># UNDIFFERENTIATED                                          </span></span>
<span><span class="co">#   Mean               28.00     &lt;MISSING&gt;        45.00</span></span></code></pre>
<p>If the <code>NA</code> string is specified in both of these places at
the same time, the one specified with <code><a href="../reference/in_rows.html">in_rows()</a></code> takes
precedence. Technically, in this case the <code>NA</code> replacement
string defined in <code><a href="../reference/rcell.html">rcell()</a></code> will simply be overwritten by the
one defined in <code><a href="../reference/in_rows.html">in_rows()</a></code>. This is because the
<code>NA</code> string specified in <code><a href="../reference/in_rows.html">in_rows()</a></code> is applied to
the cells, not the rows (overriding the previously specified cell
specific values), which means that the precedence rules described above
are still in place.</p>
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">lyt8</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/basic_table.html">basic_table</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/split_cols_by.html">split_cols_by</a></span><span class="op">(</span><span class="st">"ARM"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/split_rows_by.html">split_rows_by</a></span><span class="op">(</span><span class="st">"SEX"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/analyze.html">analyze</a></span><span class="op">(</span>vars <span class="op">=</span> <span class="st">"AGE"</span>, afun <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="fu"><a href="../reference/in_rows.html">in_rows</a></span><span class="op">(</span></span>
<span>      <span class="st">"Mean"</span> <span class="op">=</span> <span class="fu"><a href="../reference/rcell.html">rcell</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span>, format <span class="op">=</span> <span class="st">"xx.xx"</span>, format_na_str <span class="op">=</span> <span class="st">"&lt;missing&gt;"</span><span class="op">)</span>,</span>
<span>      .format_na_strs <span class="op">=</span> <span class="st">"&lt;MISSING&gt;"</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">}</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/build_table.html">build_table</a></span><span class="op">(</span><span class="va">lyt8</span>, <span class="va">ADSL</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">#                    A: Drug X   B: Placebo   C: Combination</span></span>
<span><span class="co"># ——————————————————————————————————————————————————————————</span></span>
<span><span class="co"># F                                                         </span></span>
<span><span class="co">#   Mean               32.76       34.12          35.20     </span></span>
<span><span class="co"># M                                                         </span></span>
<span><span class="co">#   Mean               35.57       37.44          35.38     </span></span>
<span><span class="co"># U                                                         </span></span>
<span><span class="co">#   Mean               31.67       31.00          35.25     </span></span>
<span><span class="co"># UNDIFFERENTIATED                                          </span></span>
<span><span class="co">#   Mean               28.00     &lt;MISSING&gt;        45.00</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="parent-table-replacement-of-na-values-and-inheritance-principles">Parent Table Replacement of <code>NA</code> Values and Inheritance
Principles<a class="anchor" aria-label="anchor" href="#parent-table-replacement-of-na-values-and-inheritance-principles"></a>
</h3>
<p>In addition to the cell level, the string replacement for
<code>NA</code> values can be specified at the parent table level. If no
replacement string has been specified by the user for a cell, the most
specific <code>NA</code> string for that cell is the one defined at its
innermost parent table split (if any).</p>
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">lyt9</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/basic_table.html">basic_table</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/split_cols_by.html">split_cols_by</a></span><span class="op">(</span><span class="st">"ARM"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/split_rows_by.html">split_rows_by</a></span><span class="op">(</span><span class="st">"SEX"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/analyze.html">analyze</a></span><span class="op">(</span>vars <span class="op">=</span> <span class="st">"AGE"</span>, <span class="va">mean</span>, format <span class="op">=</span> <span class="st">"xx.xx"</span>, na_str <span class="op">=</span> <span class="st">"not available"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/build_table.html">build_table</a></span><span class="op">(</span><span class="va">lyt9</span>, <span class="va">ADSL</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">#                    A: Drug X    B: Placebo     C: Combination</span></span>
<span><span class="co"># —————————————————————————————————————————————————————————————</span></span>
<span><span class="co"># F                                                            </span></span>
<span><span class="co">#   mean               32.76         34.12           35.20     </span></span>
<span><span class="co"># M                                                            </span></span>
<span><span class="co">#   mean               35.57         37.44           35.38     </span></span>
<span><span class="co"># U                                                            </span></span>
<span><span class="co">#   mean               31.67         31.00           35.25     </span></span>
<span><span class="co"># UNDIFFERENTIATED                                             </span></span>
<span><span class="co">#   mean               28.00     not available       45.00</span></span></code></pre>
<p>If an <code>NA</code> value replacement string was also specified at
the cell level, then the one set at the parent table level is ignored
for this cell as the cell level format is more specific and therefore
takes precedence.</p>
<div class="sourceCode" id="cb33"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">lyt10</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/basic_table.html">basic_table</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/split_cols_by.html">split_cols_by</a></span><span class="op">(</span><span class="st">"ARM"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/split_rows_by.html">split_rows_by</a></span><span class="op">(</span><span class="st">"SEX"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/analyze.html">analyze</a></span><span class="op">(</span></span>
<span>    vars <span class="op">=</span> <span class="st">"AGE"</span>, afun <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span></span>
<span>      <span class="fu"><a href="../reference/rcell.html">rcell</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span>, format <span class="op">=</span> <span class="st">"xx.xx"</span>, label <span class="op">=</span> <span class="st">"Mean"</span>, format_na_str <span class="op">=</span> <span class="st">"&lt;missing&gt;"</span><span class="op">)</span></span>
<span>    <span class="op">}</span>,</span>
<span>    na_str <span class="op">=</span> <span class="st">"not available"</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/build_table.html">build_table</a></span><span class="op">(</span><span class="va">lyt10</span>, <span class="va">ADSL</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">#                    A: Drug X   B: Placebo   C: Combination</span></span>
<span><span class="co"># ——————————————————————————————————————————————————————————</span></span>
<span><span class="co"># F                                                         </span></span>
<span><span class="co">#   Mean               32.76       34.12          35.20     </span></span>
<span><span class="co"># M                                                         </span></span>
<span><span class="co">#   Mean               35.57       37.44          35.38     </span></span>
<span><span class="co"># U                                                         </span></span>
<span><span class="co">#   Mean               31.67       31.00          35.25     </span></span>
<span><span class="co"># UNDIFFERENTIATED                                          </span></span>
<span><span class="co">#   Mean               28.00     &lt;missing&gt;        45.00</span></span></code></pre>
<div class="sourceCode" id="cb35"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">lyt10a</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/basic_table.html">basic_table</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/split_cols_by.html">split_cols_by</a></span><span class="op">(</span><span class="st">"ARM"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/split_rows_by.html">split_rows_by</a></span><span class="op">(</span><span class="st">"SEX"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/analyze.html">analyze</a></span><span class="op">(</span></span>
<span>    vars <span class="op">=</span> <span class="st">"AGE"</span>, afun <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span></span>
<span>      <span class="fu"><a href="../reference/in_rows.html">in_rows</a></span><span class="op">(</span></span>
<span>        <span class="st">"Mean"</span> <span class="op">=</span> <span class="fu"><a href="../reference/rcell.html">rcell</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">)</span>,</span>
<span>        <span class="st">"SD"</span> <span class="op">=</span> <span class="fu"><a href="../reference/rcell.html">rcell</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/sd.html" class="external-link">sd</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">)</span>,</span>
<span>        .formats <span class="op">=</span> <span class="st">"xx.xx"</span>,</span>
<span>        .format_na_strs <span class="op">=</span> <span class="st">"&lt;missing&gt;"</span></span>
<span>      <span class="op">)</span></span>
<span>    <span class="op">}</span>,</span>
<span>    na_str <span class="op">=</span> <span class="st">"not available"</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/build_table.html">build_table</a></span><span class="op">(</span><span class="va">lyt10a</span>, <span class="va">ADSL</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">#                    A: Drug X   B: Placebo   C: Combination</span></span>
<span><span class="co"># ——————————————————————————————————————————————————————————</span></span>
<span><span class="co"># F                                                         </span></span>
<span><span class="co">#   Mean               32.76       34.12          35.20     </span></span>
<span><span class="co">#   SD                 6.09         7.06           7.43     </span></span>
<span><span class="co"># M                                                         </span></span>
<span><span class="co">#   Mean               35.57       37.44          35.38     </span></span>
<span><span class="co">#   SD                 7.08         8.69           8.24     </span></span>
<span><span class="co"># U                                                         </span></span>
<span><span class="co">#   Mean               31.67       31.00          35.25     </span></span>
<span><span class="co">#   SD                 3.21         5.66           3.10     </span></span>
<span><span class="co"># UNDIFFERENTIATED                                          </span></span>
<span><span class="co">#   Mean               28.00     &lt;missing&gt;        45.00     </span></span>
<span><span class="co">#   SD               &lt;missing&gt;   &lt;missing&gt;         1.41</span></span></code></pre>
<p>In the following, slightly more complicated example, we can observe
partial inheritance of NA strings. That is, only <code>SD</code> cells
inherit the parent table’s <code>NA</code> string, while the
<code>Mean</code> cells do not.</p>
<div class="sourceCode" id="cb37"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">lyt11</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/basic_table.html">basic_table</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/split_cols_by.html">split_cols_by</a></span><span class="op">(</span><span class="st">"ARM"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/split_rows_by.html">split_rows_by</a></span><span class="op">(</span><span class="st">"SEX"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/analyze.html">analyze</a></span><span class="op">(</span></span>
<span>    vars <span class="op">=</span> <span class="st">"AGE"</span>, afun <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span></span>
<span>      <span class="fu"><a href="../reference/in_rows.html">in_rows</a></span><span class="op">(</span></span>
<span>        <span class="st">"Mean"</span> <span class="op">=</span> <span class="fu"><a href="../reference/rcell.html">rcell</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span>, format_na_str <span class="op">=</span> <span class="st">"&lt;missing&gt;"</span><span class="op">)</span>,</span>
<span>        <span class="st">"SD"</span> <span class="op">=</span> <span class="fu"><a href="../reference/rcell.html">rcell</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/sd.html" class="external-link">sd</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">)</span></span>
<span>      <span class="op">)</span></span>
<span>    <span class="op">}</span>,</span>
<span>    format <span class="op">=</span> <span class="st">"xx.xx"</span>,</span>
<span>    na_str <span class="op">=</span> <span class="st">"not available"</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/build_table.html">build_table</a></span><span class="op">(</span><span class="va">lyt11</span>, <span class="va">ADSL</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">#                      A: Drug X      B: Placebo     C: Combination</span></span>
<span><span class="co"># —————————————————————————————————————————————————————————————————</span></span>
<span><span class="co"># F                                                                </span></span>
<span><span class="co">#   Mean                 32.76           34.12           35.20     </span></span>
<span><span class="co">#   SD                   6.09            7.06             7.43     </span></span>
<span><span class="co"># M                                                                </span></span>
<span><span class="co">#   Mean                 35.57           37.44           35.38     </span></span>
<span><span class="co">#   SD                   7.08            8.69             8.24     </span></span>
<span><span class="co"># U                                                                </span></span>
<span><span class="co">#   Mean                 31.67           31.00           35.25     </span></span>
<span><span class="co">#   SD                   3.21            5.66             3.10     </span></span>
<span><span class="co"># UNDIFFERENTIATED                                                 </span></span>
<span><span class="co">#   Mean                 28.00         &lt;missing&gt;         45.00     </span></span>
<span><span class="co">#   SD               not available   not available        1.41</span></span></code></pre>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="nest">
  <p>rtables is a part of the <strong>NEST</strong> and <a href="https://pharmaverse.org/" class="external-link"><strong>pharmaverse</strong></a>.</p>
</div>
<script type="text/javascript" src="../analytics.js"></script></footer>
</div>





  </body>
</html>
