<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="rtables">
<title>Exploratory Analysis • rtables</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js" integrity="sha512-7O5pXpc0oCRrxk8RUfDYFgn0nO1t+jLuIOQdOMRp4APB7uZ4vSjspzp5y6YDtDs4VzUSTbWzBFZ/LKJhnyFOKw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Exploratory Analysis">
<meta property="og:description" content="rtables">
<meta property="og:image" content="https://insightsengineering.github.io/rtables/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><link rel="stylesheet" href="../consent.css">
<script src="../consent.js" type="text/javascript" charset="utf-8"></script>
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light" data-bs-theme="light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">rtables</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.6.8</small>

    <div style="width: 140px; margin-left: 0.5rem;"> <small class="nav-text text-muted me-auto">part of</small> <img src="https://github.com/insightsengineering/hex-stickers/blob/main/PNG/nest.png?raw=true" alt="NEST" style="height: 30px;"><a href="https://pharmaverse.org/" class="external-link"><img src="https://github.com/insightsengineering/hex-stickers/blob/main/PNG/pharmaverse.png?raw=true" alt="pharmaverse" style="height: 28px;"></a> </div>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <h6 class="dropdown-header" data-toc-skip>Getting Started</h6>
    <a class="dropdown-item" href="../articles/introduction.html">Introduction to {rtables}</a>
    <a class="dropdown-item" href="../articles/exploratory_analysis.html">Exploratory Analysis</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Clinical Trials</h6>
    <a class="dropdown-item" href="../articles/clinical_trials.html">Example Clinical Trials Tables</a>
    <a class="dropdown-item" href="../articles/baseline.html">Comparing Against Baselines or Control</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Table Customization</h6>
    <a class="dropdown-item" href="../articles/custom_appearance.html">Customizing Appearance</a>
    <a class="dropdown-item" href="../articles/title_footer.html">Titles, Footers, and Referential Footnotes</a>
    <a class="dropdown-item" href="../articles/sorting_pruning.html">Pruning and Sorting Tables</a>
    <a class="dropdown-item" href="../articles/col_counts.html">Column Counts and Formats</a>
    <div class="dropdown-divider"></div>
    <a class="dropdown-item" href="../articles/index.html">More articles...</a>
  </div>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-developer-guide">Developer Guide</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-developer-guide">
    <a class="dropdown-item" href="../articles/dev-guide/dg_split_machinery.html">Split Machinery</a>
    <a class="dropdown-item" href="../articles/dev-guide/dg_tabulation.html">Tabulation</a>
    <a class="dropdown-item" href="../articles/dev-guide/dg_table_hierarchy.html">Table Hierarchy</a>
    <a class="dropdown-item" href="../articles/dev-guide/dg_debug_rtables.html">Debugging in {rtables} and Beyond</a>
    <a class="dropdown-item" href="../articles/dev-guide/dg_notes.html">Sparse Notes on {rtables} Internals</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
<!-- start dropdown for versions --> <li class="nav-item dropdown">
        <a href="#" class="nav-link dropdown-toggle"
          data-bs-toggle="dropdown" role="button"
          aria-expanded="false" aria-haspopup="true"
          id="dropdown-versions">Versions</a> <div class="dropdown-menu" aria-labelledby="dropdown-versions"> <a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/rtables/main">main</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/rtables/release-candidate">release-candidate</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/rtables/latest-release">latest-release</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/rtables/v0.6.6-rc1">v0.6.6-rc1</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/rtables/v0.6.10">v0.6.10</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/rtables/v0.6.9">v0.6.9</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/rtables/v0.6.8">v0.6.8</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/rtables/v0.6.7">v0.6.7</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/rtables/v0.6.6">v0.6.6</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/rtables/v0.6.5">v0.6.5</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/rtables/v0.6.4">v0.6.4</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/rtables/v0.6.3">v0.6.3</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/rtables/v0.6.2">v0.6.2</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/rtables/v0.6.1">v0.6.1</a> </div></li>
<!-- end dropdown for versions -->
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-reports">Reports</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-reports">
    <a class="dropdown-item" href="../coverage-report/">Coverage report</a>
    <a class="dropdown-item" href="../unit-test-report/">Unit test report</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/insightsengineering/rtables">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Exploratory Analysis</h1>
                        <h4 data-toc-skip class="author">Jana Stoilova,
Adrian Waddell and Gabriel Becker</h4>
            
            <h4 data-toc-skip class="date">2024-06-20</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/insightsengineering/rtables/blob/main/vignettes/exploratory_analysis.Rmd" class="external-link"><code>vignettes/exploratory_analysis.Rmd</code></a></small>
      <div class="d-none name"><code>exploratory_analysis.Rmd</code></div>
    </div>

    
    
<style type="text/css">
.reveal .r code {
    white-space: pre;
}
</style>
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>In this vignette, we would like to introduce how
<code><a href="../reference/qtable_layout.html">qtable()</a></code> can be used to easily create cross tabulations for
exploratory data analysis. <code><a href="../reference/qtable_layout.html">qtable()</a></code> is an extension of
<code><a href="https://rdrr.io/r/base/table.html" class="external-link">table()</a></code> from base R and can do much beyond creating two-way
contingency tables. The function has a simple to use interface while
internally it builds layouts using the <code>rtables</code>
framework.</p>
</div>
<div class="section level2">
<h2 id="getting-started">Getting Started<a class="anchor" aria-label="anchor" href="#getting-started"></a>
</h2>
<p>Load packages used in this vignette:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/insightsengineering/rtables" class="external-link">rtables</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span></code></pre></div>
<p>Let’s start by seeing what <code><a href="https://rdrr.io/r/base/table.html" class="external-link">table()</a></code> can do:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">ex_adsl</span><span class="op">$</span><span class="va">ARM</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co"># </span></span>
<span><span class="co">#      A: Drug X     B: Placebo C: Combination </span></span>
<span><span class="co">#            134            134            132</span></span></code></pre>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">ex_adsl</span><span class="op">$</span><span class="va">SEX</span>, <span class="va">ex_adsl</span><span class="op">$</span><span class="va">ARM</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">#                   </span></span>
<span><span class="co">#                    A: Drug X B: Placebo C: Combination</span></span>
<span><span class="co">#   F                       79         77             66</span></span>
<span><span class="co">#   M                       51         55             60</span></span>
<span><span class="co">#   U                        3          2              4</span></span>
<span><span class="co">#   UNDIFFERENTIATED         1          0              2</span></span></code></pre>
<p>We can easily recreate the cross-tables above with
<code><a href="../reference/qtable_layout.html">qtable()</a></code> by specifying a data.frame with variable(s) to
tabulate. The <code>col_vars</code> and <code>row_vars</code> arguments
control how to split the data across columns and rows respectively.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/qtable_layout.html">qtable</a></span><span class="op">(</span><span class="va">ex_adsl</span>, col_vars <span class="op">=</span> <span class="st">"ARM"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">#         A: Drug X   B: Placebo   C: Combination</span></span>
<span><span class="co">#          (N=134)     (N=134)        (N=132)    </span></span>
<span><span class="co"># ———————————————————————————————————————————————</span></span>
<span><span class="co"># count      134         134            132</span></span></code></pre>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/qtable_layout.html">qtable</a></span><span class="op">(</span><span class="va">ex_adsl</span>, col_vars <span class="op">=</span> <span class="st">"ARM"</span>, row_vars <span class="op">=</span> <span class="st">"SEX"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">#                    A: Drug X   B: Placebo   C: Combination</span></span>
<span><span class="co"># count               (N=134)     (N=134)        (N=132)    </span></span>
<span><span class="co"># ——————————————————————————————————————————————————————————</span></span>
<span><span class="co"># F                     79           77             66      </span></span>
<span><span class="co"># M                     51           55             60      </span></span>
<span><span class="co"># U                      3           2              4       </span></span>
<span><span class="co"># UNDIFFERENTIATED       1           0              2</span></span></code></pre>
<p>Aside from the display style, the main difference is that
<code><a href="../reference/qtable_layout.html">qtable()</a></code> will add (N=xx) in the table header by default.
This can be removed with <code>show_colcounts</code>.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/qtable_layout.html">qtable</a></span><span class="op">(</span><span class="va">ex_adsl</span>, <span class="st">"ARM"</span>, show_colcounts <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co"># count            all obs</span></span>
<span><span class="co"># ————————————————————————</span></span>
<span><span class="co"># A: Drug X          134  </span></span>
<span><span class="co"># B: Placebo         134  </span></span>
<span><span class="co"># C: Combination     132</span></span></code></pre>
<p>Any variables used as the row or column facets should not have any
empty strings (““). This is because non empty values are required as
labels when generating the table. The code below will generate an
error.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tmp_adsl</span> <span class="op">&lt;-</span> <span class="va">ex_adsl</span></span>
<span><span class="va">tmp_adsl</span><span class="op">$</span><span class="va">new</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep_len</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">""</span>, <span class="st">"A"</span>, <span class="st">"B"</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">tmp_adsl</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/qtable_layout.html">qtable</a></span><span class="op">(</span><span class="va">tmp_adsl</span>, row_vars <span class="op">=</span> <span class="st">"new"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="nested-tables">Nested Tables<a class="anchor" aria-label="anchor" href="#nested-tables"></a>
</h2>
<p>Providing more than one variable name for the row or column structure
in <code><a href="../reference/qtable_layout.html">qtable()</a></code> will create a nested table. Arbitrary nesting
is supported in each dimension.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/qtable_layout.html">qtable</a></span><span class="op">(</span><span class="va">ex_adsl</span>, row_vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"SEX"</span>, <span class="st">"STRATA1"</span><span class="op">)</span>, col_vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ARM"</span>, <span class="st">"STRATA2"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">#                       A: Drug X        B: Placebo       C: Combination  </span></span>
<span><span class="co">#                      S1       S2       S1       S2       S1        S2   </span></span>
<span><span class="co"># count              (N=73)   (N=61)   (N=67)   (N=67)   (N=56)    (N=76) </span></span>
<span><span class="co"># ————————————————————————————————————————————————————————————————————————</span></span>
<span><span class="co"># F                                                                       </span></span>
<span><span class="co">#   A                  12       9        11       13        7        11   </span></span>
<span><span class="co">#   B                  14       11       12       15        9        12   </span></span>
<span><span class="co">#   C                  17       16       13       13       14        13   </span></span>
<span><span class="co"># M                                                                       </span></span>
<span><span class="co">#   A                  5        11       10       9         6        14   </span></span>
<span><span class="co">#   B                  13       8        7        10        9        12   </span></span>
<span><span class="co">#   C                  8        6        13       6         8        11   </span></span>
<span><span class="co"># U                                                                       </span></span>
<span><span class="co">#   A                  1        0        1        0         1         0   </span></span>
<span><span class="co">#   B                  1        0        0        1         0         1   </span></span>
<span><span class="co">#   C                  1        0        0        0         1         1   </span></span>
<span><span class="co"># UNDIFFERENTIATED                                                        </span></span>
<span><span class="co">#   A                  0        0        0        0         0         1   </span></span>
<span><span class="co">#   C                  1        0        0        0         1         0</span></span></code></pre>
<p>Note that by default, unobserved factor levels within a facet are not
included in the table. This can be modified with
<code>drop_levels</code>. The code below adds a row of 0s for
<code>STRATA1</code> level “B” nested under the <code>SEX</code> level
“UNDIFFERENTIATED”.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/qtable_layout.html">qtable</a></span><span class="op">(</span></span>
<span>  <span class="va">ex_adsl</span>,</span>
<span>  row_vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"SEX"</span>, <span class="st">"STRATA1"</span><span class="op">)</span>,</span>
<span>  col_vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ARM"</span>, <span class="st">"STRATA2"</span><span class="op">)</span>,</span>
<span>  drop_levels <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">#                       A: Drug X        B: Placebo       C: Combination  </span></span>
<span><span class="co">#                      S1       S2       S1       S2       S1        S2   </span></span>
<span><span class="co"># count              (N=73)   (N=61)   (N=67)   (N=67)   (N=56)    (N=76) </span></span>
<span><span class="co"># ————————————————————————————————————————————————————————————————————————</span></span>
<span><span class="co"># F                                                                       </span></span>
<span><span class="co">#   A                  12       9        11       13        7        11   </span></span>
<span><span class="co">#   B                  14       11       12       15        9        12   </span></span>
<span><span class="co">#   C                  17       16       13       13       14        13   </span></span>
<span><span class="co"># M                                                                       </span></span>
<span><span class="co">#   A                  5        11       10       9         6        14   </span></span>
<span><span class="co">#   B                  13       8        7        10        9        12   </span></span>
<span><span class="co">#   C                  8        6        13       6         8        11   </span></span>
<span><span class="co"># U                                                                       </span></span>
<span><span class="co">#   A                  1        0        1        0         1         0   </span></span>
<span><span class="co">#   B                  1        0        0        1         0         1   </span></span>
<span><span class="co">#   C                  1        0        0        0         1         1   </span></span>
<span><span class="co"># UNDIFFERENTIATED                                                        </span></span>
<span><span class="co">#   A                  0        0        0        0         0         1   </span></span>
<span><span class="co">#   B                  0        0        0        0         0         0   </span></span>
<span><span class="co">#   C                  1        0        0        0         1         0</span></span></code></pre>
<p>In contrast, <code><a href="https://rdrr.io/r/base/table.html" class="external-link">table()</a></code> cannot return a nested table.
Rather it produces a list of contingency tables when more than two
variables are used as inputs.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">ex_adsl</span><span class="op">$</span><span class="va">SEX</span>, <span class="va">ex_adsl</span><span class="op">$</span><span class="va">STRATA1</span>, <span class="va">ex_adsl</span><span class="op">$</span><span class="va">ARM</span>, <span class="va">ex_adsl</span><span class="op">$</span><span class="va">STRATA2</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co"># , ,  = A: Drug X,  = S1</span></span>
<span><span class="co"># </span></span>
<span><span class="co">#                   </span></span>
<span><span class="co">#                     A  B  C</span></span>
<span><span class="co">#   F                12 14 17</span></span>
<span><span class="co">#   M                 5 13  8</span></span>
<span><span class="co">#   U                 1  1  1</span></span>
<span><span class="co">#   UNDIFFERENTIATED  0  0  1</span></span>
<span><span class="co"># </span></span>
<span><span class="co"># , ,  = B: Placebo,  = S1</span></span>
<span><span class="co"># </span></span>
<span><span class="co">#                   </span></span>
<span><span class="co">#                     A  B  C</span></span>
<span><span class="co">#   F                11 12 13</span></span>
<span><span class="co">#   M                10  7 13</span></span>
<span><span class="co">#   U                 1  0  0</span></span>
<span><span class="co">#   UNDIFFERENTIATED  0  0  0</span></span>
<span><span class="co"># </span></span>
<span><span class="co"># , ,  = C: Combination,  = S1</span></span>
<span><span class="co"># </span></span>
<span><span class="co">#                   </span></span>
<span><span class="co">#                     A  B  C</span></span>
<span><span class="co">#   F                 7  9 14</span></span>
<span><span class="co">#   M                 6  9  8</span></span>
<span><span class="co">#   U                 1  0  1</span></span>
<span><span class="co">#   UNDIFFERENTIATED  0  0  1</span></span>
<span><span class="co"># </span></span>
<span><span class="co"># , ,  = A: Drug X,  = S2</span></span>
<span><span class="co"># </span></span>
<span><span class="co">#                   </span></span>
<span><span class="co">#                     A  B  C</span></span>
<span><span class="co">#   F                 9 11 16</span></span>
<span><span class="co">#   M                11  8  6</span></span>
<span><span class="co">#   U                 0  0  0</span></span>
<span><span class="co">#   UNDIFFERENTIATED  0  0  0</span></span>
<span><span class="co"># </span></span>
<span><span class="co"># , ,  = B: Placebo,  = S2</span></span>
<span><span class="co"># </span></span>
<span><span class="co">#                   </span></span>
<span><span class="co">#                     A  B  C</span></span>
<span><span class="co">#   F                13 15 13</span></span>
<span><span class="co">#   M                 9 10  6</span></span>
<span><span class="co">#   U                 0  1  0</span></span>
<span><span class="co">#   UNDIFFERENTIATED  0  0  0</span></span>
<span><span class="co"># </span></span>
<span><span class="co"># , ,  = C: Combination,  = S2</span></span>
<span><span class="co"># </span></span>
<span><span class="co">#                   </span></span>
<span><span class="co">#                     A  B  C</span></span>
<span><span class="co">#   F                11 12 13</span></span>
<span><span class="co">#   M                14 12 11</span></span>
<span><span class="co">#   U                 0  1  1</span></span>
<span><span class="co">#   UNDIFFERENTIATED  1  0  0</span></span></code></pre>
<p>With some help from <code><a href="https://rdrr.io/r/stats/ftable.html" class="external-link">stats::ftable()</a></code> the nested structure
can be achieved in two steps.</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">t1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/ftable.html" class="external-link">ftable</a></span><span class="op">(</span><span class="va">ex_adsl</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"SEX"</span>, <span class="st">"STRATA1"</span>, <span class="st">"ARM"</span>, <span class="st">"STRATA2"</span><span class="op">)</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/stats/ftable.html" class="external-link">ftable</a></span><span class="op">(</span><span class="va">t1</span>, row.vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"SEX"</span>, <span class="st">"STRATA1"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">#                          ARM     A: Drug X    B: Placebo    C: Combination   </span></span>
<span><span class="co">#                          STRATA2        S1 S2         S1 S2             S1 S2</span></span>
<span><span class="co"># SEX              STRATA1                                                     </span></span>
<span><span class="co"># F                A                      12  9         11 13              7 11</span></span>
<span><span class="co">#                  B                      14 11         12 15              9 12</span></span>
<span><span class="co">#                  C                      17 16         13 13             14 13</span></span>
<span><span class="co"># M                A                       5 11         10  9              6 14</span></span>
<span><span class="co">#                  B                      13  8          7 10              9 12</span></span>
<span><span class="co">#                  C                       8  6         13  6              8 11</span></span>
<span><span class="co"># U                A                       1  0          1  0              1  0</span></span>
<span><span class="co">#                  B                       1  0          0  1              0  1</span></span>
<span><span class="co">#                  C                       1  0          0  0              1  1</span></span>
<span><span class="co"># UNDIFFERENTIATED A                       0  0          0  0              0  1</span></span>
<span><span class="co">#                  B                       0  0          0  0              0  0</span></span>
<span><span class="co">#                  C                       1  0          0  0              1  0</span></span></code></pre>
</div>
<div class="section level2">
<h2 id="na-values">NA Values<a class="anchor" aria-label="anchor" href="#na-values"></a>
</h2>
<p>So far in all the examples we have seen, we used counts to summarize
the data in each table cell as this is the default analysis used by
<code><a href="../reference/qtable_layout.html">qtable()</a></code>. Internally, a single analysis variable specified
by <code>avar</code> is used to generate the counts in the table. The
default analysis variable is the first variable in <code>data</code>. In
the case of <code>ex_adsl</code> this is “STUDYID”.</p>
<p>Let’s see what happens when we introduce some <code>NA</code> values
into the analysis variable:</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tmp_adsl</span> <span class="op">&lt;-</span> <span class="va">ex_adsl</span></span>
<span><span class="va">tmp_adsl</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="cn">NA_character_</span></span>
<span></span>
<span><span class="fu"><a href="../reference/qtable_layout.html">qtable</a></span><span class="op">(</span><span class="va">tmp_adsl</span>, row_vars <span class="op">=</span> <span class="st">"ARM"</span>, col_vars <span class="op">=</span> <span class="st">"SEX"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">#                     F         M        U     UNDIFFERENTIATED</span></span>
<span><span class="co"># count            (N=222)   (N=166)   (N=9)        (N=3)      </span></span>
<span><span class="co"># —————————————————————————————————————————————————————————————</span></span>
<span><span class="co"># A: Drug X           0         0        0            0        </span></span>
<span><span class="co"># B: Placebo          0         0        0            0        </span></span>
<span><span class="co"># C: Combination      0         0        0            0</span></span></code></pre>
<p>The resulting table is showing 0’s across all cells because all the
values of the analysis variable are <code>NA</code>.</p>
<p>Keep this behavior in mind when doing quick exploratory analysis
using the default counts aggregate function of <code>qtable</code>.</p>
<p>If this does not suit your purpose, you can either pre-process your
data to re-code the <code>NA</code> values or use another analysis
function. We will see how the latter is done in the <a href="#custom-aggregation">Custom Aggregation</a> section.</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Recode NA values</span></span>
<span><span class="va">tmp_adsl</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">addNA</a></span><span class="op">(</span><span class="va">tmp_adsl</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/qtable_layout.html">qtable</a></span><span class="op">(</span><span class="va">tmp_adsl</span>, row_vars <span class="op">=</span> <span class="st">"ARM"</span>, col_vars <span class="op">=</span> <span class="st">"SEX"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">#                     F         M        U     UNDIFFERENTIATED</span></span>
<span><span class="co"># count            (N=222)   (N=166)   (N=9)        (N=3)      </span></span>
<span><span class="co"># —————————————————————————————————————————————————————————————</span></span>
<span><span class="co"># A: Drug X          79        51        3            1        </span></span>
<span><span class="co"># B: Placebo         77        55        2            0        </span></span>
<span><span class="co"># C: Combination     66        60        4            2</span></span></code></pre>
<p>In addition, row and column variables should have <code>NA</code>
levels explicitly labelled as above. If this is not done, the columns
and/or rows will not reflect the full data.</p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tmp_adsl</span><span class="op">$</span><span class="va">new1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="cn">NA_character_</span>, levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"X"</span>, <span class="st">"Y"</span>, <span class="st">"Z"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/qtable_layout.html">qtable</a></span><span class="op">(</span><span class="va">tmp_adsl</span>, row_vars <span class="op">=</span> <span class="st">"ARM"</span>, col_vars <span class="op">=</span> <span class="st">"new1"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">#                    X       Y       Z  </span></span>
<span><span class="co"># count            (N=0)   (N=0)   (N=0)</span></span>
<span><span class="co"># ——————————————————————————————————————</span></span>
<span><span class="co"># A: Drug X          0       0       0  </span></span>
<span><span class="co"># B: Placebo         0       0       0  </span></span>
<span><span class="co"># C: Combination     0       0       0</span></span></code></pre>
<p>Explicitly labeling the <code>NA</code> levels in the column facet
adds a column to the table:</p>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tmp_adsl</span><span class="op">$</span><span class="va">new2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">addNA</a></span><span class="op">(</span><span class="va">tmp_adsl</span><span class="op">$</span><span class="va">new1</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/levels.html" class="external-link">levels</a></span><span class="op">(</span><span class="va">tmp_adsl</span><span class="op">$</span><span class="va">new2</span><span class="op">)</span><span class="op">[</span><span class="fl">4</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="st">"&lt;NA&gt;"</span> <span class="co"># NA needs to be a recognizible string</span></span>
<span><span class="fu"><a href="../reference/qtable_layout.html">qtable</a></span><span class="op">(</span><span class="va">tmp_adsl</span>, row_vars <span class="op">=</span> <span class="st">"ARM"</span>, col_vars <span class="op">=</span> <span class="st">"new2"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">#                    X       Y       Z      &lt;NA&gt;  </span></span>
<span><span class="co"># count            (N=0)   (N=0)   (N=0)   (N=400)</span></span>
<span><span class="co"># ————————————————————————————————————————————————</span></span>
<span><span class="co"># A: Drug X          0       0       0       134  </span></span>
<span><span class="co"># B: Placebo         0       0       0       134  </span></span>
<span><span class="co"># C: Combination     0       0       0       132</span></span></code></pre>
</div>
<div class="section level2">
<h2 id="custom-aggregation">Custom Aggregation<a class="anchor" aria-label="anchor" href="#custom-aggregation"></a>
</h2>
<p>A powerful feature of <code><a href="../reference/qtable_layout.html">qtable()</a></code> is that the user can
define the type of function used to summarize the data in each facet. We
can specify the type of analysis summary using the <code>afun</code>
argument:</p>
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/qtable_layout.html">qtable</a></span><span class="op">(</span><span class="va">ex_adsl</span>, row_vars <span class="op">=</span> <span class="st">"STRATA2"</span>, col_vars <span class="op">=</span> <span class="st">"ARM"</span>, avar <span class="op">=</span> <span class="st">"AGE"</span>, afun <span class="op">=</span> <span class="va">mean</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">#              A: Drug X   B: Placebo   C: Combination</span></span>
<span><span class="co"># AGE - mean    (N=134)     (N=134)        (N=132)    </span></span>
<span><span class="co"># ————————————————————————————————————————————————————</span></span>
<span><span class="co"># S1             34.10       36.46          35.70     </span></span>
<span><span class="co"># S2             33.38       34.40          35.24</span></span></code></pre>
<p>Note that the analysis variable <code>AGE</code> and analysis
function name are included in the top right header of the table.</p>
<p>If the analysis function returns a vector of 2 or 3 elements, the
result is displayed in multi-valued single cells.</p>
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/qtable_layout.html">qtable</a></span><span class="op">(</span><span class="va">ex_adsl</span>, row_vars <span class="op">=</span> <span class="st">"STRATA2"</span>, col_vars <span class="op">=</span> <span class="st">"ARM"</span>, avar <span class="op">=</span> <span class="st">"AGE"</span>, afun <span class="op">=</span> <span class="va">range</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">#                A: Drug X    B: Placebo    C: Combination</span></span>
<span><span class="co"># AGE - range     (N=134)       (N=134)        (N=132)    </span></span>
<span><span class="co"># ————————————————————————————————————————————————————————</span></span>
<span><span class="co"># S1            23.0 / 48.0   24.0 / 62.0    20.0 / 69.0  </span></span>
<span><span class="co"># S2            21.0 / 50.0   21.0 / 58.0    23.0 / 64.0</span></span></code></pre>
<p>If you want to use an analysis function with more than 3 summary
elements, you can use a list. In this case, the values are displayed in
the table as multiple stacked cells within each facet. If the list
elements are named, the names are used as row labels.</p>
<div class="sourceCode" id="cb33"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fivenum2</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/setNames.html" class="external-link">setNames</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">as.list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/fivenum.html" class="external-link">fivenum</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"min"</span>, <span class="st">"Q1"</span>, <span class="st">"MED"</span>, <span class="st">"Q3"</span>, <span class="st">"max"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span><span class="fu"><a href="../reference/qtable_layout.html">qtable</a></span><span class="op">(</span><span class="va">ex_adsl</span>, row_vars <span class="op">=</span> <span class="st">"STRATA2"</span>, col_vars <span class="op">=</span> <span class="st">"ARM"</span>, avar <span class="op">=</span> <span class="st">"AGE"</span>, afun <span class="op">=</span> <span class="va">fivenum2</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">#                  A: Drug X   B: Placebo   C: Combination</span></span>
<span><span class="co"># AGE - fivenum2    (N=134)     (N=134)        (N=132)    </span></span>
<span><span class="co"># ————————————————————————————————————————————————————————</span></span>
<span><span class="co"># S1                                                      </span></span>
<span><span class="co">#   min              23.00       24.00          20.00     </span></span>
<span><span class="co">#   Q1               28.00       30.00          30.50     </span></span>
<span><span class="co">#   MED              34.00       36.00          35.00     </span></span>
<span><span class="co">#   Q3               39.00       40.50          40.00     </span></span>
<span><span class="co">#   max              48.00       62.00          69.00     </span></span>
<span><span class="co"># S2                                                      </span></span>
<span><span class="co">#   min              21.00       21.00          23.00     </span></span>
<span><span class="co">#   Q1               29.00       29.50          30.00     </span></span>
<span><span class="co">#   MED              32.00       32.00          34.50     </span></span>
<span><span class="co">#   Q3               38.00       39.50          38.00     </span></span>
<span><span class="co">#   max              50.00       58.00          64.00</span></span></code></pre>
<p>More advanced formatting can be controlled with
<code><a href="../reference/in_rows.html">in_rows()</a></code>. See function documentation for more details.</p>
<div class="sourceCode" id="cb35"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">meansd_range</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="../reference/in_rows.html">in_rows</a></span><span class="op">(</span></span>
<span>    <span class="st">"Mean (sd)"</span> <span class="op">=</span> <span class="fu"><a href="../reference/rcell.html">rcell</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/stats/sd.html" class="external-link">sd</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">)</span>, format <span class="op">=</span> <span class="st">"xx.xx (xx.xx)"</span><span class="op">)</span>,</span>
<span>    <span class="st">"Range"</span> <span class="op">=</span> <span class="fu"><a href="../reference/rcell.html">rcell</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/range.html" class="external-link">range</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span>, format <span class="op">=</span> <span class="st">"xx - xx"</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="fu"><a href="../reference/qtable_layout.html">qtable</a></span><span class="op">(</span><span class="va">ex_adsl</span>, row_vars <span class="op">=</span> <span class="st">"STRATA2"</span>, col_vars <span class="op">=</span> <span class="st">"ARM"</span>, avar <span class="op">=</span> <span class="st">"AGE"</span>, afun <span class="op">=</span> <span class="va">meansd_range</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">#                       A: Drug X      B: Placebo    C: Combination</span></span>
<span><span class="co"># AGE - meansd_range     (N=134)        (N=134)         (N=132)    </span></span>
<span><span class="co"># —————————————————————————————————————————————————————————————————</span></span>
<span><span class="co"># S1                                                               </span></span>
<span><span class="co">#   Mean (sd)          34.10 (6.71)   36.46 (7.72)    35.70 (8.22) </span></span>
<span><span class="co">#   Range                23 - 48        24 - 62         20 - 69    </span></span>
<span><span class="co"># S2                                                               </span></span>
<span><span class="co">#   Mean (sd)          33.38 (6.40)   34.40 (7.99)    35.24 (7.39) </span></span>
<span><span class="co">#   Range                21 - 50        21 - 58         23 - 64</span></span></code></pre>
</div>
<div class="section level2">
<h2 id="marginal-summaries">Marginal Summaries<a class="anchor" aria-label="anchor" href="#marginal-summaries"></a>
</h2>
<p>Another feature of <code><a href="../reference/qtable_layout.html">qtable()</a></code> is the ability to quickly
add marginal summary rows with the <code>summarize_groups</code>
argument. This summary will add to the table the count of non-NA records
of the analysis variable at each level of nesting. For example, compare
these two tables:</p>
<div class="sourceCode" id="cb37"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/qtable_layout.html">qtable</a></span><span class="op">(</span></span>
<span>  <span class="va">ex_adsl</span>,</span>
<span>  row_vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"STRATA1"</span>, <span class="st">"STRATA2"</span><span class="op">)</span>, col_vars <span class="op">=</span> <span class="st">"ARM"</span>,</span>
<span>  avar <span class="op">=</span> <span class="st">"AGE"</span>, afun <span class="op">=</span> <span class="va">mean</span></span>
<span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">#              A: Drug X   B: Placebo   C: Combination</span></span>
<span><span class="co"># AGE - mean    (N=134)     (N=134)        (N=132)    </span></span>
<span><span class="co"># ————————————————————————————————————————————————————</span></span>
<span><span class="co"># A                                                   </span></span>
<span><span class="co">#   S1           31.61       36.68          34.00     </span></span>
<span><span class="co">#   S2           34.40       33.55          34.35     </span></span>
<span><span class="co"># B                                                   </span></span>
<span><span class="co">#   S1           34.57       37.68          35.83     </span></span>
<span><span class="co">#   S2           32.79       34.77          36.68     </span></span>
<span><span class="co"># C                                                   </span></span>
<span><span class="co">#   S1           35.26       35.38          36.58     </span></span>
<span><span class="co">#   S2           32.95       34.89          34.72</span></span></code></pre>
<div class="sourceCode" id="cb39"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/qtable_layout.html">qtable</a></span><span class="op">(</span></span>
<span>  <span class="va">ex_adsl</span>,</span>
<span>  row_vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"STRATA1"</span>, <span class="st">"STRATA2"</span><span class="op">)</span>, col_vars <span class="op">=</span> <span class="st">"ARM"</span>,</span>
<span>  summarize_groups <span class="op">=</span> <span class="cn">TRUE</span>, avar <span class="op">=</span> <span class="st">"AGE"</span>, afun <span class="op">=</span> <span class="va">mean</span></span>
<span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">#                  A: Drug X    B: Placebo   C: Combination</span></span>
<span><span class="co"># AGE - mean        (N=134)      (N=134)        (N=132)    </span></span>
<span><span class="co"># —————————————————————————————————————————————————————————</span></span>
<span><span class="co"># A                38 (28.4%)   44 (32.8%)     40 (30.3%)  </span></span>
<span><span class="co">#   S1             18 (13.4%)   22 (16.4%)     14 (10.6%)  </span></span>
<span><span class="co">#     AGE - mean     31.61        36.68          34.00     </span></span>
<span><span class="co">#   S2             20 (14.9%)   22 (16.4%)     26 (19.7%)  </span></span>
<span><span class="co">#     AGE - mean     34.40        33.55          34.35     </span></span>
<span><span class="co"># B                47 (35.1%)   45 (33.6%)     43 (32.6%)  </span></span>
<span><span class="co">#   S1             28 (20.9%)   19 (14.2%)     18 (13.6%)  </span></span>
<span><span class="co">#     AGE - mean     34.57        37.68          35.83     </span></span>
<span><span class="co">#   S2             19 (14.2%)   26 (19.4%)     25 (18.9%)  </span></span>
<span><span class="co">#     AGE - mean     32.79        34.77          36.68     </span></span>
<span><span class="co"># C                49 (36.6%)   45 (33.6%)     49 (37.1%)  </span></span>
<span><span class="co">#   S1             27 (20.1%)   26 (19.4%)     24 (18.2%)  </span></span>
<span><span class="co">#     AGE - mean     35.26        35.38          36.58     </span></span>
<span><span class="co">#   S2             22 (16.4%)   19 (14.2%)     25 (18.9%)  </span></span>
<span><span class="co">#     AGE - mean     32.95        34.89          34.72</span></span></code></pre>
<p>In the second table, there are marginal summary rows for each level
of the two row facet variables: <code>STRATA1</code> and
<code>STRATA2</code>. The number 18 in the second row gives the count of
observations part of <code>ARM</code> level “A: Drug X”,
<code>STRATA1</code> level “A”, and <code>STRATA2</code> level “S1”. The
percent is calculated as the cell count divided by the column count
given in the table header. So we can see that the mean <code>AGE</code>
of 31.61 in that subgroup is based on 18 subjects which correspond to
13.4% of the subjects in arm “A: Drug X”.</p>
<p>See <code><a href="../reference/summarize_row_groups.html">?summarize_row_groups</a></code> for how to add marginal
summary rows when using the core <code>rtables</code> framework.</p>
</div>
<div class="section level2">
<h2 id="table-decorations">Table Decorations<a class="anchor" aria-label="anchor" href="#table-decorations"></a>
</h2>
<p>Tables generated with <code><a href="../reference/qtable_layout.html">qtable()</a></code> can include annotations
such as titles, subtitles and footnotes like so:</p>
<div class="sourceCode" id="cb41"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/qtable_layout.html">qtable</a></span><span class="op">(</span></span>
<span>  <span class="va">ex_adsl</span>,</span>
<span>  row_vars <span class="op">=</span> <span class="st">"STRATA2"</span>, col_vars <span class="op">=</span> <span class="st">"ARM"</span>,</span>
<span>  title <span class="op">=</span> <span class="st">"Strata 2 Summary"</span>,</span>
<span>  subtitle <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"STUDY "</span>, <span class="va">ex_adsl</span><span class="op">$</span><span class="va">STUDYID</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span>,</span>
<span>  main_footer <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"Date: "</span>, <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html" class="external-link">Sys.Date</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co"># Strata 2 Summary</span></span>
<span><span class="co"># STUDY AB12345</span></span>
<span><span class="co"># </span></span>
<span><span class="co"># ———————————————————————————————————————————————</span></span>
<span><span class="co">#         A: Drug X   B: Placebo   C: Combination</span></span>
<span><span class="co"># count    (N=134)     (N=134)        (N=132)    </span></span>
<span><span class="co"># ———————————————————————————————————————————————</span></span>
<span><span class="co"># S1         73           67             56      </span></span>
<span><span class="co"># S2         61           67             76      </span></span>
<span><span class="co"># ———————————————————————————————————————————————</span></span>
<span><span class="co"># </span></span>
<span><span class="co"># Date: 2024-06-20</span></span></code></pre>
</div>
<div class="section level2">
<h2 id="summary">Summary<a class="anchor" aria-label="anchor" href="#summary"></a>
</h2>
<p>Here is what we have learned in this vignette:</p>
<ul>
<li><p><code><a href="../reference/qtable_layout.html">qtable()</a></code> can replace and extend uses of
<code><a href="https://rdrr.io/r/base/table.html" class="external-link">table()</a></code> and <code><a href="https://rdrr.io/r/stats/ftable.html" class="external-link">stats::ftable()</a></code></p></li>
<li><p><code><a href="../reference/qtable_layout.html">qtable()</a></code> is useful for exploratory data
analysis</p></li>
</ul>
<p>As the intended use of <code><a href="../reference/qtable_layout.html">qtable()</a></code> is for exploratory data
analysis, there is limited functionality for building very complex
tables. For details on how to get started with the core
<code>rtables</code> layout functionality see the <a href="https://insightsengineering.github.io/rtables/latest-tag/articles/introduction.html"><code>introduction</code></a>
vignette.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="nest">
  <p>rtables is a part of the <strong>NEST</strong> and <a href="https://pharmaverse.org/" class="external-link"><strong>pharmaverse</strong></a>.</p>
</div>
<script type="text/javascript" src="../analytics.js"></script></footer>
</div>

  

  

  </body>
</html>
